var vbd={version:'2.0.0'};vbd.Ce=[1];vbd.ns="http://www.w3.org/2000/svg";vbd.TILE_SIZE=256;vbd.isSphericalMercator=false;vbd.J4='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANAQMAAABIJXY/AAAABlBMVEUAAACZmZl+9SADAAAAAXRSTlMAQObYZgAAACNJREFUCNdjgAAFB4aCBwyWBxjkGxj4GYAIyABygYJAKaA8AHb6Bq9p/silAAAAAElFTkSuQmCC';vbd.J9='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAIAgMAAADB3li5AAAADFBMVEUAAAD///8AAAD5+fud3040AAAAAXRSTlMAQObYZgAAACxJREFUGNNjCGUgDQA1ZJKoA6ghM5REkMmQtYpEsJIMLWQ4jHTvvyQ9kP8CAKsIZ4v+qHD+AAAAAElFTkSuQmCC';vbd.Hf="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABaCAMAAADNRvW0AAAAllBMVEUaEhIAAAD/+/saEhL/+/v/+/saEhIaEhIaEhIaEhL/+/v/+/saEhL/+/v/+/v/+/v/+/v/+/saEhIaEhIaEhL/+/saEhL/+/v/+/v/+/v/+/v/+/v/+/v/+/v/+/vq5uf/+/v/+/v///8iIiQZGRpTVFZHSEpDQ0U2NjhZWlxOT1BMTU8+P0A0NDVfX2JaXF7p6erm5+eGzAQhAAAAInRSTlM2ANkG1IAtJyQTAskvwZJzZksgHxoYCi8QtLOZlwkR3csw5sgS4QAAAh9JREFUWMPMz7sOAyEMRNFZjWRsiWpB/P+nZvOgyJoA7nJb68gaHC5aSZKBLKkY/f1OWAVfSeWUNMUgbT8JO/CIY2KYZCNyYtrpScKidCeCZdKJ+7H8A7djvqcTw2bWCbEdP0T3ib5JQ6D2Ihoh+iREKF6kxki9iMSIHCCCERYlhhIlBSlKEnJQdBAjf9qD0zogAAAAYRBWgP556bAI6j0E48OS4ZQQGIglhB9eDB4Z6gJKCaoPChZqHGABSALwAV4B4qAKICSgPS5XrnB3Vma7DcJAFFVH9outsDwgIHvTAiUu0P7/z3VSPMjAsMjnyb7KUVguHpVGwVELoY9BlCpKV5QkPIDDIUw2lEwKmCBktqbEGhh0vKgoCQtIxSuXEyxyunCKOsMKZ8UoElaRcyWGDeKpkml48WmB+U5fxwpd1oeF28mxkog+br7+abidSEZKCD1VVf0+kH73QH4wgp7QVRT1qjQGJhhTUt+Uo6RgeRZPWjJR6igRhUVd0JKJIkcJKOzaDoghqmkZOEpOId05wkS5o2jYhXYUsU8Rnor/heX7lJx7yFRbhIkC7lXa2hIUMa/yncIGa2thopSrJdWWGEUHxZW/NOVtbNwwovKznxjWtvpG+t1rVWHEfmJvcqitKRH7n4gZmiz546Ju266u6UcFLrvWNlln/KH0sMB8F3scfR4HrM8x7j8s/EcSceUG39VzvG4P8bsQ97Uh/geUFzaspaocMQAAAABJRU5ErkJggg==')";vbd.J$='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAhFBMVEUAAAD///8zNDSampuEhIScnZ6IiIn///8bGxyenqCPj5CMjY2ur69vb3CeoKFNTk////9JSktFRkdRUlM7PD01NTfc3N1YWVpSU1RjZWdbXF5eX2JVVlcwMTJAQUJCQ0Q9PkBgYmQ4ODosLC0pKSsnJygjIyQcHB4ZGRrW1ta8vL0hISIfDVDsAAAAD3RSTlMAMzNqampqPDxqamqIiGoX+fvyAAAA60lEQVRIx+3Ly26DMBSE4bTkfiMYUxwgxlzbJO//fpVGXnQ26Fgqahb9ljP6F/9+w/bL28qTTy8geY7wlCfLcYBxKU+GHoaApO+gD0i6G3TyZH3z1gFJBiFJ1kImTw6thvYgT7QDLU/2zoLbyxNbg51K3snJKrAn3inJiK4V1Jp3SvRPzqoElHV0UFIrkni81pSoREBRksQCyR8kcSoQU/JBHsZ78E7JhdyNd+d9KkkrSKeSN3I0FZgj75SwyORgooVUVOVQzZvkBeSzJquihGI1b9JAQLIrr1Du5kzOzRWaszjZXLzNiyWv4BvBPDoxeCmhmAAAAABJRU5ErkJggg==';vbd.KD='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAM1BMVEUAAAD///8ZGRr///9ZWVtTVFVMTU9FRUcaGhvh4eFfYGM3NzkkJCbf3+BBQUM0NDYjIyXNlLmyAAAAA3RSTlMAMzOxzcD4AAAAT0lEQVRIx+3LOQ6AMAxFwQCxzZbl/qel/t2TEBWefkpK6c9WRMqOSJk3MKWMCxhSegBdSjgQUtwAl2IVMCn1BKqUdgBNyoa8LQtSUkrfewAIaAwnjeOgYwAAAABJRU5ErkJggg==';vbd.JH='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAiCAMAAABodAmPAAAAtFBMVEUAAAD/gHb/fXKdPTf/g3j/f3X/h3z/hXv/e2//eW31fnSyT0jChoLCVUyyTEWsR0CiQTvdu7nJlJHsdm3/dmqxX1rHV0+oT0m6TUanS0bu2tnjsa3OnpvDbmejQzzet7TZtLHOmpbHkIz1d23sc2nQYlrQYFfUXVTHXFStV1LJWVG+UEivSkSlSUOxSEGePTfsxMHsvrrPoJ3gnpnYk47ZiYPKhoPKf3rAd3LHc23AZF20U0wawMGfAAAAAXRSTlMAQObYZgAAAQJJREFUKM9tzdd2gzAMgGEFUSgYDAFC2Nl7dc/3f68KA2U4/5XPd2QJ6uZLy1rOoVt2QXY+M7xkrU1wb2qUucdJY1MmSDCb1nPc1PQ6zeRiNkNf11V1RKnEPr6UnzdmRYJVc0MLxuiTtaj6OAaPVdYq88ByCHvqWISjQYQeHyL36NC6b2s6BPH2gaqgfG1jAFjgSlFKLklRVrgA6mArQoko+wCimLTJjqEqKcLGwiKBuhkeH0VHnMF/X7xCnkOnIjSo0IVuH06Jzif0cm3DsF3ol0eGEf0MMMUgwFcY5AaBC8N+dzsm4ffplEv4FkXvEqbXayrhE+IzSCEm9xDkbjdo+gOMghGGo/phOwAAAABJRU5ErkJggg==';vbd.Ah={CA:1,B9:2,FG:3,HX:4,MS:5};vbd.Ek='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAAApJREFUCB1jYAAAAAIAAc/INeUAAAAASUVORK5CYII=';vbd.Guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);};vbd.MapTypeId={ROADMAP:0,SATELLITE:1,TERRAIN:2};vbd.getServerId=function(x,y){var index=Math.abs(x+y)%this.Servers.length;return this.Servers[index];};vbd.getUrl=function(K9){switch(K9){case this.MapTypeId.ROADMAP:return this.pathImgMap;case this.MapTypeId.TERRAIN:return this.pathImgMapTerrain;case this.MapTypeId.SATELLITE:return this.pathImgMapSatellite;default:return this.pathImgMap;}};vbd.Cf=function(HY,HZ,b){for(var p in HZ){HY[p]=HZ[p];}if(b){return HY;}};(function(){var ua=window.navigator.userAgent.toLowerCase(),doc=document.documentElement,ie='ActiveXObject'in window,webkit=ua.indexOf('webkit')!==-1,phantomjs=ua.indexOf('phantom')!==-1,android23=ua.search('android [23]')!==-1,chrome=ua.indexOf('chrome')!==-1,mobile=typeof orientation!=='undefined',ie3d=ie&&('transition'in doc.style),webkit3d=('WebKitCSSMatrix'in window)&&('m11'in new window.WebKitCSSMatrix())&&!android23,gecko3d='MozPerspective'in doc.style,opera12='OTransition'in doc.style;var msPointer=!window.PointerEvent&&window.MSPointerEvent;var pointer=!webkit&&!!(window.PointerEvent||msPointer);var touch=(pointer||'ontouchstart'in window||(window.DocumentTouch&&document instanceof window.DocumentTouch));vbd.Browser={ie:ie,ielt9:ie&&!document.addEventListener,webkit:webkit,gecko:(ua.indexOf('gecko')!==-1)&&!webkit&&!window.opera&&!ie,android:ua.indexOf('android')!==-1,android23:android23,chrome:chrome,safari:!chrome&&ua.indexOf('safari')!==-1,ie3d:ie3d,webkit3d:webkit3d,gecko3d:gecko3d,opera12:opera12,any3d:!window.L_DISABLE_3D&&(ie3d||webkit3d||gecko3d)&&!opera12&&!phantomjs,mobile:mobile,mobileWebkit:mobile&&webkit,mobileWebkit3d:mobile&&webkit3d,mobileOpera:mobile&&window.opera,touch:touch,msPointer:msPointer,pointer:pointer,retina:(window.devicePixelRatio||(window.screen.deviceXDPI/window.screen.logicalXDPI))>1};vbd.checkKey='vietbandomapsapi';vbd.http='https://';vbd.address='developers.vietbando.com';vbd.root=vbd.http+vbd.address;vbd.pathImgMap=vbd.root+'/V2/MapsAPIService.ashx?Type=LoadMapImage';vbd.pathImgMapTerrain=vbd.root+'/V2/MapsAPIService.ashx?Type=LoadTerrainImage';vbd.pathImgMapSatellite=vbd.root+'/V2/MapsAPIService.ashx?Type=LoadSatelliteImage';var img=new Image(16,16);vbd.Cf(img.style,{position:'absolute',left:'0px',top:'0px',border:'0px none',display:'none',marginLeft:'-8px',marginTop:'-8px',zIndex:-33832289},false);img.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAALVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADBoCg+AAAAD3RSTlMAq6AgC4trQEt1FWA2K4DSKcc0AAAAZElEQVQI12PABMwHQCSLAQOnGIhhKszAEhjFwMChmMDA4CZUwPVQAyRcJNYk6QBWHih0AKJPUdQBzCiUSAwB0dxCF9iEDBiA2oMZGBqVGRjYxIAK2IUuMLBvABsxAWojlwPccgDEag57u58fNgAAAABJRU5ErkJggg==';vbd.Hb=img;vbd.Servers=[];}());var vietbando=vbd;vbd.RTree=function(EA){this.EA=Math.max(4,EA||9);this.L4=Math.max(2,Math.ceil(this.EA*0.4));var Bh;var IT=function(){return[Infinity,Infinity,-Infinity,-Infinity];};var DI=function(a,b){a[0]=Math.min(a[0],b[0]);a[1]=Math.min(a[1],b[1]);a[2]=Math.max(a[2],b[2]);a[3]=Math.max(a[3],b[3]);return a;};var L3=function(Ag,H,AP){for(var i=AP;i>=0;i--){DI(H[i].bbox,Ag);}};var IU=function(K,As){var Bm=[];while(K){if(K.leaf)As.push.apply(As,K.children);else Bm.push.apply(Bm,K.children);K=Bm.pop();}return As;};var IV=function(a,b){return a[0]<=b[0]&&a[1]<=b[1]&&b[2]<=a[2]&&b[3]<=a[3];};var D6=function(a,b){return b[0]<=a[2]&&b[1]<=a[3]&&b[2]>=a[0]&&b[3]>=a[1];};var FS=function(a){return(a[2]-a[0])*(a[3]-a[1]);};var Dy=function(a){return(a[2]-a[0])+(a[3]-a[1]);};var ML=function(a,b){return(Math.max(b[2],a[2])-Math.min(b[0],a[0]))*(Math.max(b[3],a[3])-Math.min(b[1],a[1]));};var MA=function(a,b){var minX=Math.max(a[0],b[0]),minY=Math.max(a[1],b[1]),maxX=Math.min(a[2],b[2]),maxY=Math.min(a[3],b[3]);return Math.max(0,maxX-minX)*Math.max(0,maxY-minY);};var DK=function(K,k,p){var Ag=IT();for(var i=k,AR;i<p;i++){AR=K.children[i];DI(Ag,K.leaf?AR:AR.bbox);}return Ag;};var Dw=function(K){K.bbox=DK(K,0,K.children.length);};var MG=function(a,b){return a.bbox[0]-b.bbox[0];};var L9=function(a,b){return a.bbox[1]-b.bbox[1];};var L7=function(a,b){return a[0]-b[0];};var L8=function(a,b){return a[1]-b[1];};var IX=function(K,m,M,MC){K.children.sort(MC);var FA=DK(K,0,m),E9=DK(K,M-m,M),E8=Dy(FA)+Dy(E9),i,AR;for(i=m;i<M-m;i++){AR=K.children[i];DI(FA,K.leaf?AR:AR.bbox);E8+=Dy(FA);}for(i=M-m-1;i>=m;i--){AR=K.children[i];DI(E9,K.leaf?AR:AR.bbox);E8+=Dy(E9);}return E8;};var MN=function(Ag,K,AP,H){var i,AR,E7,BK,Du,C7,Dv;while(true){H.push(K);if(K.leaf||H.length-1===AP)break;C7=Dv=Infinity;var G=K.children.length;for(i=0;i<G;i++){AR=K.children[i];BK=FS(AR.bbox);Du=ML(Ag,AR.bbox)-BK;if(Du<Dv){Dv=Du;C7=BK<C7?BK:C7;E7=AR;}else if(Du===Dv){if(BK<C7){C7=BK;E7=AR;}}}K=E7||K.children[0];}return K;};var MM=function(K,m,M){var IY=K.leaf?L7:MG,ME=K.leaf?L8:L9,MF=IX(K,m,M,IY),MB=IX(K,m,M,ME);if(MF<MB)K.children.sort(IY);};var L_=function(K,m,M){var i,E$,FB,overlap,area,minOverlap,minArea,index;minOverlap=minArea=Infinity;for(i=m;i<=M-m;i++){E$=DK(K,0,i);FB=DK(K,i,M);overlap=MA(E$,FB);area=FS(E$)+FS(FB);if(overlap<minOverlap){minOverlap=overlap;index=i;minArea=area<minArea?area:minArea;}else if(overlap===minOverlap){if(area<minArea){minArea=area;index=i;}}}return index;};var MJ=function(K,C6){Bh={children:[K,C6],height:K.height+1,bbox:null,leaf:false};Dw(Bh);};this.clear=function(){Bh={children:[],height:1,bbox:IT(),leaf:true};return this;};this.getAll=function(){return IU(Bh,[]);};this.getDataInBox=function(Ag){var K=Bh,rs=[];if(!D6(Ag,K.bbox))return rs;var Bm=[],i,AR,B5;while(K){var G=K.children.length;for(i=0;i<G;i++){AR=K.children[i];B5=K.leaf?AR:AR.bbox;if(D6(Ag,B5)){if(K.leaf){rs.push(AR);}else if(IV(Ag,B5)){IU(AR,rs);}else{Bm.push(AR);}}}K=Bm.pop();}return rs;};this.collides=function(Ag){var K=Bh;if(!D6(Ag,K.bbox))return false;var Bm=[],i,AR,B5;while(K){var G=K.children.length;for(i=0;i<G;i++){AR=K.children[i];B5=K.leaf?AR:AR.bbox;if(D6(Ag,B5)){if(K.leaf||IV(Ag,B5))return true;Bm.push(AR);}}K=Bm.pop();}return false;};this.insert=function(BT){if(BT){this.JJ(BT,Bh.height-1);}return this;};this.L5=function(B6,AP){var K=B6[AP],M=K.children.length,m=this.L4;MM(K,m,M);var IZ=L_(K,m,M);var C6={children:K.children.splice(IZ,K.children.length-IZ),height:K.height,bbox:null,leaf:false};if(K.leaf){C6.leaf=true;}Dw(K);Dw(C6);if(AP){B6[AP-1].children.push(C6);}else{MJ(K,C6);}};this.JJ=function(BT,AP,MK){var Ag=MK?BT.bbox:BT,B6=[];var K=MN(Ag,Bh,AP,B6);K.children.push(BT);DI(K.bbox,Ag);while(AP>=0){if(B6[AP].children.length>this.EA){this.L5(B6,AP);AP--;}else{break;}}L3(Ag,B6,AP);};this.MI=function(H){for(var i=H.length-1,FE;i>=0;i--){if(H[i].children.length===0){if(i>0){FE=H[i-1].children;FE.splice(FE.indexOf(H[i]),1);}else{this.clear();}}else{Dw(H[i]);}}};this.remove=function(BT){if(!BT)return this;var K=Bh,Ag=BT,H=[],Ia=[],i,BQ,index,FD;while(K||H.length){if(!K){K=H.pop();BQ=H[H.length-1];i=Ia.pop();FD=true;}if(K.leaf){index=K.children.indexOf(BT);if(index!==-1){K.children.splice(index,1);H.push(K);this.MI(H);return this;}}if(!FD&&!K.leaf&&IV(K.bbox,Ag)){H.push(K);Ia.push(i);i=0;BQ=K;K=K.children[0];}else if(BQ){i++;K=BQ.children[i];FD=false;}else K=null;}return this;};this.clear();};vbd.DomUtil={get:function(id){return typeof id==='string'?document.getElementById(id):id;},getStyle:function(el,R){var Ay=el.style[R]||(el.currentStyle&&el.currentStyle[R]);if((!Ay||Ay==='auto')&&document.defaultView){var Hc=document.defaultView.getComputedStyle(el,null);Ay=Hc?Hc[R]:null;}return Ay==='auto'?null:Ay;},getSize:function(el){var L=new vbd.Size(el.clientWidth,el.clientHeight);if(L.width!==0||L.height!==0){return L;}if(L.width===0&&L.height===0||isNaN(L.width)&&isNaN(L.height)){L.width=el.offsetWidth;L.height=el.offsetHeight;}if(L.width===0&&L.height===0||isNaN(L.width)&&isNaN(L.height)){L.width=parseInt(el.style.width);L.height=parseInt(el.style.height);}return L;},create:function(FF,CO,S){var el=document.createElement(FF);el.className=CO;if(S){S.appendChild(el);}return el;},remove:function(el){if(el){var _p=el.parentNode;if(_p){_p.removeChild(el);}}},add:function(el,pEl){if(pEl&&el){var _p=el.parentNode;if(!_p){pEl.appendChild(el);}}},empty:function(el){while(el.firstChild){el.removeChild(el.firstChild);}},hasClass:function(el,BE){if(el.classList!==undefined){return el.classList.contains(BE);}var CO=vbd.DomUtil.getClass(el);return CO.length>0&&new RegExp('(^|\\s)'+BE+'(\\s|$)').test(CO);},addClass:function(el,BE){if(el.classList!==undefined){var JG=vbd.Util.splitWords(BE);for(var i=0,G=JG.length;i<G;i++){el.classList.add(JG[i]);}}else if(!vbd.DomUtil.hasClass(el,BE)){var CO=vbd.DomUtil.getClass(el);vbd.DomUtil.setClass(el,(CO?CO+' ':'')+BE);}},removeClass:function(el,BE){if(el.classList!==undefined){el.classList.remove(BE);}else{vbd.DomUtil.setClass(el,vbd.Util.trim((' '+vbd.DomUtil.getClass(el)+' ').replace(' '+BE+' ',' ')));}},setClass:function(el,BE){if(el.className.baseVal===undefined){el.className=BE;}else{el.className.baseVal=BE;}},getClass:function(el){return el.className.baseVal===undefined?el.className:el.className.baseVal;},setOpacity:function(el,Ay){if('opacity'in el.style){el.style.opacity=Ay;}else if('filter'in el.style){vbd.DomUtil.K8(el,Ay);}},K8:function(el,Ay){var filter=false,filterName='DXImageTransform.Microsoft.Alpha';try{filter=el.filters.item(filterName);}catch(e){if(Ay===1){return;}}Ay=Math.round(Ay*100);if(filter){filter.Enabled=(Ay!==100);filter.Opacity=Ay;}else{el.style.filter+=' progid:'+filterName+'(opacity='+Ay+')';}},CG:function(props){var R=document.documentElement.style;for(var i=0;i<props.length;i++){if(props[i]in R){return props[i];}}return false;},setTransform:function(el,V,AA){var pos=V||new vbd.Point(0,0);el.style[vbd.D5]='translate3d('+pos.x+'px,'+pos.y+'px'+',0)'+(AA?' scale('+AA+')':'');},Jf:function(el,AA,x,y,dx,dy){el.style[vbd.D5]='translate('+dx+'px, '+dy+'px) scale('+AA+')';el.style[vbd.Fu]=x+'px '+y+'px';},MR:function(el,pro,val){el.style[pro]=val;},setPosition:function(el,AL,no3d){if(!el){return;}el.AH=AL;if(vbd.Browser.any3d&&!no3d){vbd.DomUtil.setTransform(el,AL);}else{el.style.left=AL.x+'px';el.style.top=AL.y+'px';}},getPosition:function(el){return el.AH||new vbd.Point(0,0);},getTarget:function(e){return(e.target||e.srcElement);},Fg:function(e){var rs={AD:vbd.Ah.CA,obj:null};try{var Ai=this.getTarget(e);var Dx=Ai.BI;rs.AD=Dx;rs.obj=Ai.obj;while(!Dx&&Ai.tagName.toLowerCase()!=='body'){Ai=Ai.parentNode;Dx=Ai.BI;}var AD=parseInt(Dx);rs.AD=AD;rs.obj=Ai.obj;}finally{return rs;}},JY:function(a,obj){if(typeof a.indexOf=="function"){return a.indexOf(obj);}else{for(var i=0,G=a.length;i<G;i++){if(a[i]==obj){return i;}}return-1;}},toFront:function(el){var parent=el.parentNode;if(parent.lastChild!==el){parent.appendChild(el);}},toBack:function(el){var parent=el.parentNode;if(parent.firstChild!==el){parent.insertBefore(el,parent.firstChild);}},Hd:function(str){var Fs=str.split('-'),Iy=Fs[0];for(var i=1,G=Fs.length;i<G;i++){var s=Fs[i];Iy+=s.charAt(0).toUpperCase()+s.substring(1);}return Iy;},K_:function(){var Dh=[];for(var i=0,G=arguments.length;i<G;i++){var el=arguments[i];if(typeof el=='string'){el=document.getElementById(el);}if(arguments.length==1){return el;}Dh.push(el);}return Dh;},He:function(e,s){e=this.K_(e);var v=null;if(e&&e.style){v=e.style[this.Hd(s)];if(!v){if(document.defaultView&&document.defaultView.getComputedStyle){var css=document.defaultView.getComputedStyle(e,null);v=css?css.getPropertyValue(s):null;}else if(e.currentStyle)v=e.currentStyle[this.Hd(s)];}var p=['left','top','right','bottom'];if(window.opera&&(this.JY(p,s)!=-1)&&(this.He(e,'position')=='static')){v='auto';}}return v=='auto'?null:v;},getRenderedDimensions:function(JW,size,D){var w,h;var A3=document.createElement("div");A3.style.visibility="hidden";var containerElement=(D&&D.containerElement)?D.containerElement:document.body;var parentHasPositionAbsolute=false,superContainer=null,parent=containerElement;while(parent&&parent.tagName.toLowerCase()!="body"){var parentPosition=this.He(parent,"position");if(parentPosition=="absolute"){parentHasPositionAbsolute=true;break;}else if(parentPosition&&parentPosition!="static"){break;}parent=parent.parentNode;}if(parentHasPositionAbsolute&&(containerElement.clientHeight===0||containerElement.clientWidth===0)){superContainer=vbd.DomUtil.create('div','');vbd.extend(superContainer.style,{height:document.body.clientHeight+'px',width:document.body.clientWidth+'px',visibility:'hidden',position:'absolute',overflow:'visible'});superContainer.appendChild(A3);}A3.style.position='absolute';if(size){if(size.width){w=size.width;A3.style.width=w+'px';}else if(size.height){h=size.height;A3.style.height=h+'px';}}if(D&&D.displayClass){A3.className=D.displayClass;}var content=document.createElement('div');content.innerHTML=JW;content.style.overflow='visible';if(content.childNodes){for(var i=0,l=content.childNodes.length;i<l;i++){if(!content.childNodes[i].style){continue;}content.childNodes[i].style.overflow='visible';}}A3.appendChild(content);if(superContainer){containerElement.appendChild(superContainer);}else{containerElement.appendChild(A3);}if(!w){w=parseInt(A3.scrollWidth);A3.style.width=w+'px';}if(!h){h=parseInt(content.scrollHeight)||parseInt(content.firstChild.scrollHeight);}A3.removeChild(content);if(superContainer){superContainer.removeChild(A3);containerElement.removeChild(superContainer);}else{containerElement.removeChild(A3);}return new vbd.Size(w,h);}};vbd.D5=vbd.DomUtil.CG(['Transform','WebkitTransform','OTransform','MozTransform','msTransform']);vbd.Fu=vbd.DomUtil.CG(['TransformOrigin','WebkitTransformOrigin','MozTransformOrigin','OTransformOrigin','msTransformOrigin']);vbd.F0=vbd.DomUtil.CG(['webkitTransition','Transition','OTransition','MozTransition','msTransition']);vbd.Bf=vbd.DomUtil.CG(['userSelect','WebkitUserSelect','OUserSelect','MozUserSelect','msUserSelect']);vbd.JV=vbd.DomUtil.CG(['borderRadius','MozBorderRadius','WebkitBorderRadius']);vbd.F1=vbd.DomUtil.CG(['boxShadow','MozBoxShadow','WebkitBoxShadow']);(function(){vbd.DomUtil.MZ=vbd.F0==='webkitTransition'||vbd.F0==='OTransition'?vbd.F0+'End':'transitionend';if('onselectstart'in document){vbd.DomUtil.disableTextSelection=function(){vbd.selectstart=vbd.event.addDomListener(window,'selectstart',vbd.event.preventDefault);};vbd.DomUtil.enableTextSelection=function(){vbd.event.removeDomListener(vbd.selectstart);vbd.selectstart=null;};}else{vbd.DomUtil.disableTextSelection=function(){if(vbd.Bf){var style=document.documentElement.style;this.HW=style[vbd.Bf];style[vbd.Bf]='none';}};vbd.DomUtil.enableTextSelection=function(){if(vbd.Bf){document.documentElement.style[vbd.Bf]=this.HW;delete this.HW;}};}vbd.DomUtil.disableImageDrag=function(){vbd.Ha=vbd.event.addDomListener(window,'dragstart',vbd.event.preventDefault);};vbd.DomUtil.enableImageDrag=function(){vbd.event.removeDomListener(vbd.Ha);vbd.Ha=null;};vbd.DomUtil.preventOutline=function(element){vbd.DomUtil.restoreOutline();this.E4=element;this.HV=element.style.outline;element.style.outline='none';vbd.event.addDomListener(window,'keydown',vbd.DomUtil.restoreOutline,this);};vbd.DomUtil.restoreOutline=function(){if(!this.E4){return;}this.E4.style.outline=this.HV;delete this.E4;delete this.HV;vbd.event.removeDomListener(window,'keydown',vbd.DomUtil.restoreOutline,this);};})();vbd.Util={Distance:function(x1,y1,x2,y2){return(Math.pow((x2-x1),2)+Math.pow((y2-y1),2));},Distance2Point:function(x0,y0,x1,y1){return Math.sqrt(this.Distance(x0,y0,x1,y1));},DistanceBetween2LatLng:function(IE,IG){var rad=vbd.Projection.GH;var I$=IE.Latitude*rad,JA=IG.Latitude*rad,a=Math.sin(I$)*Math.sin(JA)+Math.cos(I$)*Math.cos(JA)*Math.cos((IG.Longitude-IE.Longitude)*rad);return vbd.Projection.JF*Math.acos(Math.min(a,1));},CG:function(props){var style=document.documentElement.style;for(var i=0;i<props.length;i++){if(props[i]in style){return props[i];}}return false;},ProjectFactor:function(x,y,x1,y1,x2,y2){if((x===x1)&&(y===y1))return 0;if((x===x2)&&(y===y2))return 1;var dx=(x2-x1),dy=(y2-y1);var G=(dx*dx)+(dy*dy);return((x-x1)*dx+(y-y1)*dy)/G;},ProjectPoint:function(x,y,x1,y1,x2,y2){if(((x===x1)&&(y===y1))||((x===x2)&&(y===y2))){return new vbd.LatLng(y,x);}else{var r=this.ProjectFactor(x,y,x1,y1,x2,y2);return new vbd.LatLng((y1+r*(y2-y1)),(x1+r*(x2-x1)));}},ClosePoint:function(x,y,x1,y1,x2,y2){var f=this.ProjectFactor(x,y,x1,y1,x2,y2);if(f>0&&f<1)return this.ProjectPoint(x,y,x1,y1,x2,y2);var d1=this.Distance(x,y,x1,y1),d2=this.Distance(x,y,x2,y2);return d1<d2?new vbd.LatLng(y1,x1):new vbd.LatLng(y2,x2);},ClosePointPolyline:function(N,Ba){var II=0,GX=0,cp=null,x1=Ba[0].Longitude,y1=Ba[0].Latitude,x2=Ba[1].Longitude,y2=Ba[1].Latitude,sp=this.ClosePoint(N.Longitude,N.Latitude,x1,y1,x2,y2),Gc=this.Distance(N.Longitude,N.Latitude,sp.Longitude,sp.Latitude);for(var i=1,G=(Ba.length-1);i<G;i++){x1=Ba[i].Longitude;y1=Ba[i].Latitude;x2=Ba[i+1].Longitude;y2=Ba[i+1].Latitude;cp=this.ClosePoint(N.Longitude,N.Latitude,x1,y1,x2,y2);GX=this.Distance(N.Longitude,N.Latitude,cp.Longitude,cp.Latitude);if(GX<Gc){Gc=GX;sp=cp;II=i;}}return{LatLng:sp,edge:II,distance:Gc};},AI:function(FF,pro,pr){var el=document.createElement(FF);vbd.Cf(el.style,pro,false);el.style[vbd.Bf]='none';if(pr){pr.appendChild(el);}return el;},K7:function(src,pro,pro2){var img=new Image();vbd.Cf(img.style,pro,false);vbd.Cf(img,pro2,false);img.src=src;return img;},Jo:function(a,obj){if(typeof a.indexOf=="function")return a.indexOf(obj);else{for(var i=0,G=a.length;i<G;i++)if(a[i]==obj)return i;return-1;}},Iz:function(str){var GY=str.split('-'),IM=GY[0];for(var i=1,G=GY.length;i<G;i++){var s=GY[i];IM+=s.charAt(0).toUpperCase()+s.substring(1);}return IM;},Je:function(){var Dh=[];for(var i=0,G=arguments.length;i<G;i++){var el=arguments[i];if(typeof el=='string')el=document.getElementById(el);if(arguments.length==1)return el;Dh.push(el);}return Dh;},I1:function(e,s){e=this.Je(e);var v=null;if(e&&e.style){v=e.style[this.Iz(s)];if(!v){if(document.defaultView&&document.defaultView.getComputedStyle){var css=document.defaultView.getComputedStyle(e,null);v=css?css.getPropertyValue(s):null;}else if(e.currentStyle)v=e.currentStyle[this.Iz(s)];}var p=['left','top','right','bottom'];if(window.opera&&(this.Jo(p,s)!=-1)&&(this.I1(e,'position')=='static')){v='auto';}}return v=='auto'?null:v;},getRenderedDimensions:function(KY,size,B){var w,h,S=document.createElement("div");S.style.visibility="hidden";var CD=(B&&B.containerElement)?B.containerElement:document.body;var IJ=false,A$=null,BQ=CD;while(BQ&&BQ.tagName.toLowerCase()!="body"){var parentPosition=this.I1(BQ,"position");if(parentPosition=="absolute"){IJ=true;break;}else if(parentPosition&&parentPosition!="static")break;BQ=BQ.parentNode;}if(IJ&&(CD.clientHeight===0||CD.clientWidth===0)){A$=document.createElement("div");A$.style.visibility="hidden";A$.style.position="absolute";A$.style.overflow="visible";A$.style.width=document.body.clientWidth+"px";A$.style.height=document.body.clientHeight+"px";A$.appendChild(S);}S.style.position="absolute";if(size){if(size.width){w=size.width;S.style.width=w+"px";}else if(size.height){h=size.height;S.style.height=h+"px";}}if(B&&B.displayClass){S.className=B.displayClass;}var Ak=document.createElement("div");Ak.innerHTML=KY;Ak.style.overflow="visible";if(Ak.childNodes){for(var i=0,l=Ak.childNodes.length;i<l;i++){if(!Ak.childNodes[i].style)continue;Ak.childNodes[i].style.overflow="visible";}}S.appendChild(Ak);if(A$)CD.appendChild(A$);else CD.appendChild(S);if(!w){w=parseInt(S.scrollWidth);S.style.width=w+"px";}if(!h)h=parseInt(Ak.scrollHeight)||parseInt(Ak.firstChild.scrollHeight);;S.removeChild(Ak);if(A$){A$.removeChild(S);CD.removeChild(A$);}else CD.removeChild(S);return new vbd.Size(w,h);},K5:function(D){var K4=new Date;var id=setInterval(function(){var K6=new Date-K4;var C5=K6/D.duration;if(C5>1){C5=1;}var AN=D.delta(C5);D.step(AN);if(C5==1){clearInterval(id);if(D.fnStop){D.fnStop.call();}}},D.delay||10);},Jc:function(p){for(var a=0,b=1;true;){if(p>=(7-4*a)/11){return-Math.pow((11-6*a-11*p)/4,2)+Math.pow(b,2);}a+=b;b/=2;}},JS:function(d){return function(p){return 1-d(1-p)}},ConvertArrLatLng2Point:function(a,m){return a.map(function(l){return m.MT(l);});},ConverALongLat2ALatLng:function(E5){var HP=[];for(var i=0;i<E5.length;i+=2)HP.push(new vbd.LatLng(E5[i+1],E5[i]));return HP;},MU:function(pt,rect){return((rect.Left<pt.x)&&(rect.Right>pt.x)&&(rect.Top<pt.y)&&(rect.Bottom>pt.y));},GetBoundArrLatLng:function(a){if(a.length<1)return null;var miny=a[0].Latitude,minx=a[0].Longitude,maxy=a[0].Latitude,maxx=a[0].Longitude;for(var i=1,G=a.length;i<G;i++){minx=Math.min(minx,a[i].Longitude);maxx=Math.max(maxx,a[i].Longitude);miny=Math.min(miny,a[i].Latitude);maxy=Math.max(maxy,a[i].Latitude);}return new vbd.LatLngBounds(new vbd.LatLng(miny,minx),new vbd.LatLng(maxy,maxx));},MV:function(a){var b=this.GetBoundArrLatLng(a);if(b)return{Left:b.sw.Latitude,Top:b.sw.Longitude,Right:b.ne.Latitude,Bottom:b.ne.Longitude};return null;},K$:function(AW){if(AW&&AW.length==0){return null;}var F=new vbd.LatLngBounds(AW[0],AW[1]);for(var i=2,G=AW.length;i<G;i++){F.extend(AW[i]);}return F;},GetMBR:function(a){var b=this.GetBoundArrLatLng(a);if(b)return{x:b.sw.Longitude,y:b.sw.Latitude,w:b.getWidth(),h:b.getHeight()};return null;},UnionRect:function(r0,r1){return{Left:Math.min(r0.Left,r1.Left),Top:Math.min(r0.Top,r1.Top),Right:Math.max(r0.Right,r1.Right),Bottom:Math.max(r0.Bottom,r1.Bottom)};},MX:function(a){if(a instanceof Array&&a[0]instanceof Array)return false;else if(a instanceof Array)return true;else return false;},getOffsetSum:function(el){var t=0,l=0;while(el){t=t+parseInt(el.offsetTop);l=l+parseInt(el.offsetLeft);el=el.offsetParent;}return vbd.point(l,t);},getOffsetRect:function(Br){var box=Br.getBoundingClientRect(),body=document.body,docElem=document.documentElement;var scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft;var clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0;var top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return vbd.point(left,top);},getOffset:function(el){var r=el.getBoundingClientRect();return vbd.point(r.left+el.clientLeft,r.top+el.clientTop);},convertUrl2Object:function(url){var vars={};url.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m,key,value){vars[key]=value;});return vars;},getParamString:function(obj,existingUrl,uppercase){var params=[];for(var i in obj){params.push(window.encodeURIComponent(uppercase?i.toUpperCase():i)+'='+window.encodeURIComponent(obj[i]));}return((!existingUrl||existingUrl.indexOf('?')===-1)?'?':'&')+params.join('&');},stamp:function(obj){obj.$=obj.$||++vbd.Util.KJ;return obj.$;},KJ:0,trim:function(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,'');},splitWords:function(str){return vbd.Util.trim(str).split(/\s+/);},bind:function(fn,obj){var slice=Array.prototype.slice;if(fn.bind){return fn.bind.apply(fn,slice.call(arguments,1));}var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.length?args.concat(slice.call(arguments)):arguments);};},extend:function(JB){var i,j,G=arguments.length,src;for(j=1;j<G;j++){src=arguments[j];for(i in src){JB[i]=src[i];}}return JB;},create:Object.create||(function(){function f(){}return function(proto){f.prototype=proto;return new f();};})(),JP:function(str,_){return str.replace(/\{ *([\w_]+) *\}/g,function(str,key){var value=_[key];if(value===undefined){throw new Error('No value provided for variable '+str);}else if(typeof value==='function'){value=value(_);}return value;});},isArray:Array.isArray||function(obj){return(Object.prototype.toString.call(obj)==='[object Array]');},DN:function(){return false;},setOptions:function(obj,AQ){if(!obj.hasOwnProperty('_options')){obj.B=obj.B?vbd.Util.create(obj.B):{};}for(var i in AQ){obj.B[i]=AQ[i];}return obj.B;},getContextID:function(ctx){return[ctx.zoom,ctx.tile.x,ctx.tile.y].join(":");},getIDForLayerFeature:function(feature){return feature.properties.id;},getJSON:function(url,callback){}};(function(){function getPrefixed(name){return window['webkit'+name]||window['moz'+name]||window['ms'+name];}var EO=0;function Gj(fn){var time=+new Date(),Hx=Math.max(0,16-(time-EO));EO=time+Hx;return window.setTimeout(fn,Hx);}var _requestFn=window.requestAnimationFrame||getPrefixed('RequestAnimationFrame')||Gj,_cancelFn=window.cancelAnimationFrame||getPrefixed('CancelAnimationFrame')||getPrefixed('CancelRequestAnimationFrame')||function(id){window.clearTimeout(id);};vbd.Util.requestAnimFrame=function(fn,T,MD,p){if(MD&&_requestFn===Gj){fn.call(T,p);}else{return _requestFn.call(window,vbd.bind(fn,T,p));}};vbd.Util.cancelAnimFrame=function(id){if(id){_cancelFn.call(window,id);}};})();vbd.extend=vbd.Util.extend;vbd.bind=vbd.Util.bind;vbd.stamp=vbd.Util.stamp;vbd.setOptions=vbd.Util.setOptions;vbd.convertWktToGeoJson=function(input){if(!input)return null;var numberRegexp=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/;var tuples=new RegExp('^'+numberRegexp.source+'(\\s'+numberRegexp.source+'){1,}');var parts=input.split(';');var _=parts.pop();var srid=(parts.shift()||'').split('=').pop();var i=0;function $(re){var match=_.substring(i).match(re);if(!match)return null;else{i+=match[0].length;return match[0];}}function crs(obj){if(obj&&srid.match(/\d+/)){obj.crs={type:'name',properties:{name:'urn:ogc:def:crs:EPSG::'+srid}};}return obj;}function white(){$(/^\s*/);}function multicoords(){white();var depth=0;var rings=[];var stack=[rings];var pointer=rings;var Br;while(Br=$(/^(\()/)||$(/^(\))/)||$(/^(,)/)||$(tuples)){if(Br==='('){stack.push(pointer);pointer=[];stack[stack.length-1].push(pointer);depth++;}else if(Br===')'){if(pointer.length===0)return null;pointer=stack.pop();if(!pointer)return null;depth--;if(depth===0)break;}else if(Br===','){pointer=[];stack[stack.length-1].push(pointer);}else if(!Br.split(/\s/g).some(isNaN)){Array.prototype.push.apply(pointer,Br.split(/\s/g).map(parseFloat));}else{return null;}white();}if(depth!==0)return null;return rings;}function coords(){var list=[];var item;var pt;while(pt=$(tuples)||$(/^(,)/)){if(pt===','){list.push(item);item=[];}else if(!pt.split(/\s/g).some(isNaN)){if(!item)item=[];Array.prototype.push.apply(item,pt.split(/\s/g).map(parseFloat));}white();}if(item)list.push(item);else return null;return list.length?list:null;}function point(){if(!$(/^(point(\sz)?)/i))return null;white();if(!$(/^(\()/))return null;var c=coords();if(!c)return null;white();if(!$(/^(\))/))return null;return{type:'Point',coordinates:c[0]};}function multipoint(){if(!$(/^(multipoint)/i))return null;white();var newCoordsFormat=_.substring(_.indexOf('(')+1,_.length-1).replace(/\(/g,'').replace(/\)/g,'');_='MULTIPOINT ('+newCoordsFormat+')';var c=multicoords();if(!c)return null;white();return{type:'MultiPoint',coordinates:c};}function multilinestring(){if(!$(/^(multilinestring)/i))return null;white();var c=multicoords();if(!c)return null;white();return{type:'MultiLineString',coordinates:c};}function linestring(){if(!$(/^(linestring(\sz)?)/i))return null;white();if(!$(/^(\()/))return null;var c=coords();if(!c)return null;if(!$(/^(\))/))return null;return{type:'LineString',coordinates:c};}function polygon(){if(!$(/^(polygon(\sz)?)/i))return null;white();var c=multicoords();if(!c)return null;return{type:'Polygon',coordinates:c};}function multipolygon(){if(!$(/^(multipolygon)/i))return null;white();var c=multicoords();if(!c)return null;return{type:'MultiPolygon',coordinates:c};}function geometrycollection(){var geometries=[];var geometry;if(!$(/^(geometrycollection)/i))return null;white();if(!$(/^(\()/))return null;while(geometry=root()){geometries.push(geometry);white();$(/^(,)/);white();}if(!$(/^(\))/))return null;return{type:'GeometryCollection',geometries:geometries};}function root(){return point()||linestring()||polygon()||multipoint()||multilinestring()||multipolygon()||geometrycollection();}return crs(root());};vbd.convertGeoJsonToWkt=function(gj){if(!gj)return null;if(gj.type==='Feature'){gj=gj.geometry;}function pairWKT(c){return c.join(' ');}function ringWKT(r){return r.map(pairWKT).join(', ');}function ringsWKT(r){return r.map(ringWKT).map(wrapParens).join(', ');}function multiRingsWKT(r){return r.map(ringsWKT).map(wrapParens).join(', ');}function wrapParens(s){return'('+s+')';}switch(gj.type){case'Point':return'POINT ('+pairWKT(gj.coordinates)+')';case'LineString':return'LINESTRING ('+ringWKT(gj.coordinates)+')';case'Polygon':return'POLYGON ('+ringsWKT(gj.coordinates)+')';case'MultiPoint':return'MULTIPOINT ('+ringWKT(gj.coordinates)+')';case'MultiPolygon':return'MULTIPOLYGON ('+multiRingsWKT(gj.coordinates)+')';case'MultiLineString':return'MULTILINESTRING ('+ringsWKT(gj.coordinates)+')';case'GeometryCollection':return'GEOMETRYCOLLECTION ('+gj.geometries.map(vbd.convertGeoJsonToWkt).join(', ')+')';default:throw new Error('requires a valid GeoJSON Feature or geometry object as input');}};vbd.getBoundsCenterZoom=function(bounds,size,minZoom,maxZoom,snap){bounds=bounds.getBounds?bounds.getBounds():vbd.latLngBounds(bounds);var zoom=0,min=minZoom||2,max=maxZoom||19,nw=bounds.getNorthWest(),se=bounds.getSouthEast();var boundsSize=vbd.Projection.LatLng2Pixel(se,zoom).subtract(vbd.Projection.LatLng2Pixel(nw,zoom)),snap=snap||1;var scale=Math.min(size.width/boundsSize.x,size.height/boundsSize.y);zoom=zoom+(Math.log(scale)/Math.LN2);if(snap){zoom=Math.round(zoom/(snap/100))*(snap/100);zoom=Math.floor(zoom/snap)*snap;}var zoom=Math.max(min,Math.min(max,zoom));zoom=Math.min(max,zoom);var swPoint=vbd.Projection.LatLng2Pixel(bounds.getSouthWest(),zoom),nePoint=vbd.Projection.LatLng2Pixel(bounds.getNorthEast(),zoom);var pt=swPoint.add(nePoint);pt.x/=2;pt.y/=2;var ct=vbd.Projection.Pixel2LatLng(pt,zoom);return{center:ct,zoom:zoom};};vbd.event={element:function(evt){return(evt.target||evt.srcElement);},MY:function(evt){return(evt.touches&&evt.touches.length===1);},Ma:function(evt){return(evt.touches&&evt.touches.length>1);},Mc:function(evt){return(((evt.which)&&(evt.which==1))||((evt.button)&&(evt.button==1)));},Mh:function(evt){return(((evt.which)&&(evt.which==3))||((evt.button)&&(evt.button==2)));},stop:function(evt,isD){if(!isD)this.preventDefault(evt);if(evt.stopPropagation)evt.stopPropagation();else evt.cancelBubble=true;},applyDefaults:function(to,from){to=to||{};var HQ=typeof window.Event=="function"&&from instanceof window.Event;for(var key in from){if(!to[key]||(!HQ&&from.hasOwnProperty&&from.hasOwnProperty(key)&&!to.hasOwnProperty(key))){to[key]=from[key];}}if(!HQ&&from&&from.hasOwnProperty&&from.hasOwnProperty('toString')&&!to.hasOwnProperty('toString')){to.toString=from.toString;}return to;},getMousePosition:function(e){return new vbd.Point(e.clientX,e.clientY);},A2:'_vbd_events',F4:vbd.Browser.msPointer?'MSPointerDown':'pointerdown',F6:vbd.Browser.msPointer?'MSPointerMove':'pointermove',F5:vbd.Browser.msPointer?'MSPointerUp':'pointerup',F8:vbd.Browser.msPointer?'MSPointerCancel':'pointercancel',HR:vbd.Browser.msPointer?'MSPointerDown':vbd.Browser.pointer?'pointerdown':'touchstart',Hu:vbd.Browser.msPointer?'MSPointerUp':vbd.Browser.pointer?'pointerup':'touchend',C8:{},E6:0,addPointerListener:function(obj){if(obj.type==='touchstart'){this.LB(obj,obj.handler);}else if(obj.type==='touchmove'){this.LF(obj,obj.handler);}else if(obj.type==='touchend'){this.LC(obj,obj.handler);}},removePointerListener:function(q,AF){if(q.type==='touchstart'){q.obj.removeEventListener(this.F4,AF,false);}else if(q.type==='touchmove'){q.obj.removeEventListener(this.F6,AF,false);}else if(q.type==='touchend'){q.obj.removeEventListener(this.F5,AF,false);q.obj.removeEventListener(this.F8,AF,false);}},LB:function(obj,AF){var onDown=vbd.bind(function(e){vbd.event.preventDefault(e);this.E_(e,AF);},this);obj.obj[this.A2][obj.$]=onDown;obj.obj.addEventListener(this.F4,onDown,false);if(!this.LI){var pointerUp=vbd.bind(this.LH,this);document.documentElement.addEventListener(this.F4,vbd.bind(this.LJ,this),true);document.documentElement.addEventListener(this.F6,vbd.bind(this.LG,this),true);document.documentElement.addEventListener(this.F5,pointerUp,true);document.documentElement.addEventListener(this.F8,pointerUp,true);this.LI=true;}},LJ:function(e){this.C8[e.pointerId]=e;this.E6++;},LG:function(e){if(this.C8[e.pointerId]){this.C8[e.pointerId]=e;}},LH:function(e){delete this.C8[e.pointerId];this.E6--;},E_:function(e,AF){e.touches=[];for(var i in this.C8){e.touches.push(this.C8[i]);}e.changedTouches=[e];AF(e);},LF:function(obj,AF){var C4=vbd.bind(function(e){if((e.pointerType===e.MSPOINTER_TYPE_MOUSE||e.pointerType==='mouse')&&e.buttons===0){return;}this.E_(e,AF);},this);obj.obj[this.A2][obj.$]=C4;obj.obj.addEventListener(this.F6,C4,false);},LC:function(obj,AF){var B3=vbd.bind(function(e){this.E_(e,AF);},this);obj.obj[this.A2][obj.$]=B3;obj.obj.addEventListener(this.F5,B3,false);obj.obj.addEventListener(this.F8,B3,false);},addDoubleTapListener:function(obj,AF){var F7,touch,HT=false,delay=250;function EB(e){var count;if(vbd.Browser.pointer){count=vbd.event.E6;}else{count=e.touches.length;}if(count>1){return;}var EZ=Date.EZ(),delta=EZ-(F7||EZ);touch=e.touches?e.touches[0]:e;HT=(delta>0&&delta<=delay);F7=EZ;}function EI(){if(HT){if(vbd.Browser.pointer){var HU={},DF,i;for(i in touch){DF=touch[i];HU[i]=DF&&DF.bind?DF.bind(touch):DF;}touch=HU;}touch.type='dblclick';AF(touch);F7=null;}}obj.obj[this.A2][obj.obj.$]={touchStart:EB,touchEnd:EI};obj.obj.addEventListener(this.HR,EB,false);obj.obj.addEventListener(this.Hu,EI,false);},removeDoubleTapListener:function(q,AF){q.obj.removeEventListener(this.HR,AF.touchStart,false);q.obj.removeEventListener(this.Hu,AF.touchEnd,false);},addDomListener:function(obj,Bc,fn,T){var Ar=[];Bc=vbd.Util.splitWords(Bc);for(var i=0,G=Bc.length;i<G;i++){Ar.push(this.LE(obj,Bc[i],fn,T));}return Ar;},removeDomListener:function(Ar){if(!Ar){return;}for(var i=0,G=Ar.length;i<G;i++){this.LD(Ar[i]);}Ar.length=0;},LE:function(obj,type,fn,T){var $=type+vbd.stamp(fn)+(T?'_'+vbd.stamp(T):'');if(obj[this.A2]&&obj[this.A2][$]){return{obj:obj,type:type,handler:obj[this.A2][$],context:T,$:$};}var AF=function(e){return fn.call(T||obj,e||window.event);};var Hg=AF;obj[this.A2]=obj[this.A2]||{};obj[this.A2][$]=AF;var _rs={obj:obj,type:type,handler:AF,context:T,$:$};if(vbd.Browser.pointer&&type.indexOf('touch')===0){this.addPointerListener(_rs);}else if(vbd.Browser.touch&&(type==='dblclick')&&this.addDoubleTapListener){this.addDoubleTapListener(_rs,AF);}else if('addEventListener'in obj){if(type==='mousewheel'){obj.addEventListener('DOMMouseScroll',AF,false);obj.addEventListener(type,AF,false);}else if((type==='mouseenter')||(type==='mouseleave')){AF=function(e){e=e||window.event;if(vbd.event.K3(obj,e)){Hg(e);}};obj.addEventListener(type==='mouseenter'?'mouseover':'mouseout',AF,false);}else{if(type==='click'&&vbd.Browser.android){AF=function(e){return vbd.event.LA(e,Hg);};}obj.addEventListener(type,AF,false);}}else if('attachEvent'in obj){obj.attachEvent('on'+type,AF);}return _rs;},LD:function(q){if(!(q&&q.obj)){return;}var $=q.$,AF=q.obj[this.A2]&&q.obj[this.A2][$];if(!AF){return q.obj;}if(vbd.Browser.pointer&&q.type.indexOf('touch')===0){this.removePointerListener(q,AF);}else if(vbd.Browser.touch&&(q.type==='dblclick')&&this.removeDoubleTapListener){this.removeDoubleTapListener(q,AF);}else if('removeEventListener'in q.obj){if(q.type==='mousewheel'){q.obj.removeEventListener('DOMMouseScroll',AF,false);q.obj.removeEventListener(q.type,AF,false);}else{q.obj.removeEventListener(q.type==='mouseenter'?'mouseover':q.type==='mouseleave'?'mouseout':q.type,AF,false);}}else if('detachEvent'in q.obj){q.obj.detachEvent('on'+q.type,AF);}delete q.obj[this.A2][$];},stopPropagation:function(e){if(e.stopPropagation){e.stopPropagation();}else{e.cancelBubble=true;}vbd.event.EC(e);},disableScrollPropagation:function(el){return vbd.event.addDomListener(el,'mousewheel MozMousePixelScroll',vbd.event.stopPropagation);},disableClickPropagation:function(el){},preventDefault:function(e){if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}return this;},getOffsetDom:function(el){var rect=el.getBoundingClientRect();return new vbd.Point(rect.left-el.clientLeft,rect.top-el.clientTop);},FU:{},MQ:function(e){vbd.event.FU[e.type]=true;},EC:function(e){var EC=this.FU[e.type];this.FU[e.type]=false;return EC;},getWheelDelta:function(e){var delta=0;if(e.wheelDelta){delta=e.wheelDelta/120;}if(e.detail){delta=-e.detail/3;}return delta;},K3:function(el,e){var related=e.relatedTarget;if(!related){return true;}try{while(related&&(related!==el)){related=related.parentNode;}}catch(err){return false;}return(related!==el);},LA:function(e,AF){var Hq=(e.timeStamp||e.originalEvent.timeStamp),Be=vbd.event.Hh&&(Hq-vbd.event.Hh);if((Be&&Be>100&&Be<500)||(e.target.K2&&!e.K0)){vbd.event.stop(e);return;}vbd.event.Hh=Hq;AF(e);},clearEvents:function(obj){delete obj['_events'];},addListener:function(obj,Bc,fn,T){var Ar=[];Bc=vbd.Util.splitWords(Bc);for(var i=0,G=Bc.length;i<G;i++){Ar.push(this.JO(obj,Bc[i],fn,T));}return Ar;},removeListener:function(Ar){if(!Ar){return;}for(var i=0,G=Ar.length;i<G;i++){this.Kq(Ar[i]);}Ar.length=0;},JO:function(obj,type,fn,T){if(obj){var AO=obj.AO=obj.AO||{},DH=T&&T!==obj&&vbd.stamp(T);if(DH){var DG=type+'_idx',DE=type+'_len',Cp=AO[DG]=AO[DG]||{},$=vbd.stamp(fn)+'_'+DH;if(!Cp[$]){Cp[$]={fn:fn,ctx:T};AO[DE]=(AO[DE]||0)+1;}}else{AO[type]=AO[type]||[];AO[type].push({fn:fn});}return{obj:obj,type:type,fn:fn,context:T};}},Kq:function(q){if(!q){return;}var AO=q.obj.AO,DG=q.type+'_idx',DE=q.type+'_len';if(!AO){return;}if(!q.fn){delete AO[q.type];delete AO[DG];delete AO[DE];return;}var DH=q.context&&q.context!==q.obj&&vbd.stamp(q.context),Aw,i,G,EF,$;if(DH){$=vbd.stamp(q.fn)+'_'+DH;Aw=AO[DG];if(Aw&&Aw[$]){EF=Aw[$];delete Aw[$];AO[DE]--;}}else{Aw=AO[q.type];if(Aw){G=Aw.length;for(i=0;i<G;i++){if(Aw[i].fn===q.fn){EF=Aw[i];Aw.splice(i,1);break;}}}}if(EF){EF.fn=vbd.Util.DN;}},fire:function(obj,type,data){if(!obj){return;}var Ht=vbd.Util.extend({},data,{type:type,Me:obj}),AO=obj.AO;if(AO){var Cp=AO[type+'_idx'],i,Aw,$,G;if(AO[type]){Aw=AO[type].slice();G=Aw.length;for(i=0;i<G;i++){Aw[i].fn.call(obj,Ht);}}for($ in Cp){Cp[$].fn.call(Cp[$].ctx,Ht);}}return obj;}};vbd.Class=function(){};vbd.Class.extend=function(BJ){var O=function(){if(this.initialize){this.initialize.apply(this,arguments);}};var Kn=O.__super__=this.prototype;var Co=vbd.Util.create(Kn);Co.constructor=O;O.prototype=Co;for(var i in this){if(this.hasOwnProperty(i)&&i!=='prototype'){O[i]=this[i];}}if(BJ.statics){vbd.extend(O,BJ.statics);delete BJ.statics;}if(BJ.includes){vbd.Util.extend.apply(null,[Co].concat(BJ.includes));delete BJ.includes;}if(Co.B){BJ.B=vbd.Util.extend(vbd.Util.create(Co.B),BJ.B);}vbd.extend(Co,BJ);return O;};vbd.Class.include=function(BJ){vbd.extend(this.prototype,BJ);};vbd.Class.mergeOptions=function(B){vbd.extend(this.prototype.B,B);};vbd.LatLng=function(lat,lng){this.Latitude=lat;this.Longitude=lng;this.copy=function(){return new vbd.LatLng(this.Latitude,this.Longitude);};this.equals=function(N){if(this.Latitude!==N.Latitude){return false;}if(this.Longitude!==N.Longitude){return false;}return true;};this.lat=function(){return this.Latitude;};this.lng=function(){return this.Longitude;};this.toString=function(){return this.Latitude.toString()+','+this.Longitude.toString();};this.toUrlValue=function(){return this.Longitude.toString()+','+this.Latitude.toString();};this.toArray=function(){return[this.Longitude,this.Latitude];};this.toBounds=function(J3){var Ev=180*J3/40075017,Ib=Ev/Math.cos((Math.PI/180)*this.Latitude);return new vbd.LatLngBounds(new vbd.LatLng(this.Latitude-Ev,this.Longitude-Ib),new vbd.LatLng(this.Latitude+Ev,this.lng+Ib));};this.toGeoJSON=function(){var J_={'type':'Feature','geometry':{'type':'Point','coordinates':[this.Longitude,this.Latitude]}};return J_;};this.toWKT=function(){return'POINT ('+this.Longitude+' '+this.Latitude+')';};};vbd.latlng=function(lat,lng){if(lat instanceof vbd.LatLng){return lat;}else if(vbd.Util.isArray(lat)&&typeof lat[0]!=='object'){return new vbd.LatLng(lat[1],lat[0]);}else if(lat&&typeof lat==='object'){return new vbd.LatLng(lat.Latitude||lat.lat,lat.Longitude||lat.lng);}return new vbd.LatLng(lat,lng);};vbd.Point=function(x,y,r){if(r){this.x=Math.round(x);this.y=Math.round(y);}else{this.x=x;this.y=y;}this.add=function(pt){return this.copy().CI(pt);};this.CI=function(pt){this.x+=pt.x;this.y+=pt.y;return this;};this.subtract=function(pt){return this.copy().IS(pt);};this.IS=function(pt){this.x-=pt.x;this.y-=pt.y;return this;};this.copy=function(){return new vbd.Point(this.x,this.y);};this.equals=function(pt){if(this.x!==pt.x)return false;if(this.y!==pt.y)return false;return true;};this.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this;};this.distanceTo=function(pt){var x=pt.x-this.x,y=pt.y-this.y;return Math.sqrt(x*x+y*y);};this.toString=function(){return this.x.toString()+','+this.y.toString();};this.toArray=function(){return[this.x,this.y];};};vbd.point=function(x,y,r){if(x instanceof vbd.Point){return x;}if(vbd.Util.isArray(x)){return new vbd.Point(x[0],x[1]);}if(x===undefined||x===null){return x;}if(typeof x==='object'&&'x'in x&&'y'in x){return new vbd.Point(x.x,x.y);}return new vbd.Point(x,y,r);};vbd.Size=function(w,h){this.width=w;this.height=h;this.equals=function(sw){if(this.width!==sw.width){return false;}if(this.height!==sw.height){return false;}return true;};this.toString=function(){return this.width.toString()+','+this.height.toString();};this.toArray=function(){return[this.width,this.height];};this.copy=function(){return new vbd.Size(this.width,this.height);};};vbd.size=function(w,h){if(w instanceof vbd.Size){return w;}else if(vbd.Util.isArray(w)){if(w.length===2){return new vbd.Size(w[0],w[1]);}}return new vbd.Size(w,h);};vbd.Bounds=function(a,b){if(!a){return;}var U=b?[a,b]:a;for(var i=0,G=U.length;i<G;i++){this.extend(U[i]);}};vbd.Bounds.prototype={extend:function(pt){if(!this.min&&!this.max){this.min=pt.copy();this.max=pt.copy();return this;}this.min.x=Math.min(pt.x,this.min.x);this.max.x=Math.max(pt.x,this.max.x);this.min.y=Math.min(pt.y,this.min.y);this.max.y=Math.max(pt.y,this.max.y);return this;},getCenter:function(round){return new vbd.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,round);},getBottomLeft:function(){return new vbd.Point(this.min.x,this.max.y);},getTopRight:function(){return new vbd.Point(this.max.x,this.min.y);},getSize:function(){return this.max.subtract(this.min);},contains:function(obj){var min,max;if(typeof obj[0]==='number'||obj instanceof vbd.Point){obj=vbd.point(obj);}else{obj=vbd.bounds(obj);}if(obj instanceof vbd.Bounds){min=obj.min;max=obj.max;}else{min=max=obj;}return(min.x>=this.min.x)&&(max.x<=this.max.x)&&(min.y>=this.min.y)&&(max.y<=this.max.y);},intersects:function(bounds){bounds=vbd.bounds(bounds);var min=this.min,max=this.max,min2=bounds.min,max2=bounds.max,xIntersects=(max2.x>=min.x)&&(min2.x<=max.x),yIntersects=(max2.y>=min.y)&&(min2.y<=max.y);return xIntersects&&yIntersects;},overlaps:function(bounds){bounds=vbd.bounds(bounds);var min=this.min,max=this.max,min2=bounds.min,max2=bounds.max,xOverlaps=(max2.x>min.x)&&(min2.x<max.x),yOverlaps=(max2.y>min.y)&&(min2.y<max.y);return xOverlaps&&yOverlaps;},isValid:function(){return!!(this.min&&this.max);}};vbd.bounds=function(a,b){if(!a||a instanceof vbd.Bounds){return a;}return new vbd.Bounds(a,b);};vbd.LatLngBounds=function(sw,ne){if(vbd.Util.isArray(sw)){sw=new vbd.LatLng(sw);}if(vbd.Util.isArray(ne)){ne=new vbd.LatLng(ne);}if(!ne&&sw){if(typeof sw==='object'){sw=vbd.latlng(sw);}ne=sw.copy();}if(sw&&ne){this.sw=new vbd.LatLng(Math.min(ne.Latitude,sw.Latitude),Math.min(ne.Longitude,sw.Longitude));this.ne=new vbd.LatLng(Math.max(ne.Latitude,sw.Latitude),Math.max(ne.Longitude,sw.Longitude));}};vbd.LatLngBounds.prototype={fixBounds:function(){this.sw=new vbd.LatLng(Math.min(this.ne.Latitude,this.sw.Latitude),Math.min(this.ne.Longitude,this.sw.Longitude));this.ne=new vbd.LatLng(Math.max(this.ne.Latitude,this.sw.Latitude),Math.max(this.ne.Longitude,this.sw.Longitude));return this;},extend:function(N){if(vbd.Util.isArray(N)){N=vbd.latlng(N);}if(N instanceof vbd.LatLng){if(!this.sw&&!this.ne){this.sw=N.copy();this.ne=N.copy();return this;}this.sw.Longitude=Math.min(N.Longitude,this.sw.Longitude);this.sw.Latitude=Math.min(N.Latitude,this.sw.Latitude);this.ne.Longitude=Math.max(N.Longitude,this.ne.Longitude);this.ne.Latitude=Math.max(N.Latitude,this.ne.Latitude);return this;}if(N instanceof vbd.LatLngBounds){this.extend(N.sw);this.extend(N.ne);}return this;},getNorthEast:function(){return this.ne;},getNorthWest:function(){return new vbd.LatLng(this.ne.Latitude,this.sw.Longitude);},getSouthWest:function(){return this.sw;},getSouthEast:function(){return new vbd.LatLng(this.sw.Latitude,this.ne.Longitude);},toArray:function(Km){if(!Km){return[this.sw.Longitude,this.sw.Latitude,this.ne.Longitude,this.ne.Latitude];}return[this.sw,this.ne];},contains:function(Aq){if(vbd.Util.isArray(Aq)){Aq=vbd.latlng(Aq);}var sw,ne;if(Aq instanceof vbd.LatLngBounds){sw=Aq.sw;ne=Aq.ne;}else{sw=ne=Aq;}return(sw.Longitude>=this.sw.Longitude)&&(ne.Longitude<=this.ne.Longitude)&&(sw.Latitude>=this.sw.Latitude)&&(ne.Latitude<=this.ne.Latitude);},notContains:function(N){if(vbd.Util.isArray(N)){N=vbd.latlng(N);}return((N.Longitude<this.sw.Longitude)||(N.Longitude>this.ne.Longitude)||(N.Latitude<this.sw.Latitude)||(N.Latitude>this.ne.Latitude));},equals:function(F){return(this.sw.equals(F.sw)&&this.ne.equals(F.ne));},getCenter:function(){return new vbd.LatLng((this.sw.Latitude+this.ne.Latitude)/2,(this.sw.Longitude+this.ne.Longitude)/2);},toString:function(){return this.sw.Latitude.toString()+','+this.sw.Longitude.toString()+','+this.ne.Latitude.toString()+','+this.ne.Longitude.toString();},copy:function(){return new vbd.LatLngBounds(this.sw,this.ne);},union:function(F){return new vbd.LatLngBounds(vbd.latlng(Math.min(this.sw.Latitude,F.sw.Latitude),Math.min(this.sw.Longitude,F.sw.Longitude)),vbd.latlng(Math.max(this.ne.Latitude,F.ne.Latitude),Math.max(this.ne.Longitude,F.ne.Longitude)));},intersects:function(F){return!(this.ne.Longitude<F.sw.Longitude||this.sw.Longitude>F.ne.Longitude||this.sw.Latitude>F.ne.Latitude||this.ne.Latitude<F.sw.Latitude);},getWidth:function(){return(this.ne.Longitude-this.sw.Longitude);},getHeight:function(){return(this.ne.Latitude-this.sw.Latitude);},isLatLng:function(){return this.sw.equals(this.ne);},isValid:function(){return!!(this.sw&&this.ne);}};vbd.latLngBounds=function(a,b){if(a instanceof vbd.LatLngBounds){return a;}return new vbd.LatLngBounds(a,b);};var SphericalMercator=(function(){var cache={},EPSLN=0.0000000001,D2R=Math.PI/180,R2D=180/Math.PI,A=6378137.0,HP=2*Math.PI,MAXEXTENT=20037508.342789244;function isFloat(n){return Number(n)===n&&n%1!==0;}function SphericalMercator(options){options=options||{};this.size=options.size||256;if(!cache[this.size]){var size=this.size;var c=cache[this.size]={};c.Bc=[];c.Cc=[];c.zc=[];c.Ac=[];for(var d=0;d<30;d++){c.Bc.push(size/360);c.Cc.push(size/(2*Math.PI));c.zc.push(size/2);c.Ac.push(size);size*=2;}}this.Bc=cache[this.size].Bc;this.Cc=cache[this.size].Cc;this.zc=cache[this.size].zc;this.Ac=cache[this.size].Ac;};SphericalMercator.prototype.px=function(ll,zoom){var d,f,x,y;if(isFloat(zoom)){var size=this.size*Math.pow(2,zoom);d=size/2;var bc=(size/360);var cc=(size/HP);var ac=size;f=Math.min(Math.max(Math.sin(D2R*ll[1]),-0.9999),0.9999);x=d+ll[0]*bc;y=d+0.5*Math.log((1+f)/(1-f))*-cc;(x>ac)&&(x=ac);(y>ac)&&(y=ac);return[x,y];}else{d=this.zc[zoom];f=Math.min(Math.max(Math.sin(D2R*ll[1]),-0.9999),0.9999);x=Math.round(d+ll[0]*this.Bc[zoom]);y=Math.round(d+0.5*Math.log((1+f)/(1-f))*(-this.Cc[zoom]));(x>this.Ac[zoom])&&(x=this.Ac[zoom]);(y>this.Ac[zoom])&&(y=this.Ac[zoom]);return[x,y];}};SphericalMercator.prototype.ll=function(px,zoom){var lon,lat,g;if(isFloat(zoom)){var size=this.size*Math.pow(2,zoom);var bc=(size/360);var cc=(size/HP);var zc=size/2;g=(px[1]-zc)/-cc;lon=(px[0]-zc)/bc;lat=R2D*(2*Math.atan(Math.exp(g))-0.5*Math.PI);return[lon,lat];}else{g=(px[1]-this.zc[zoom])/(-this.Cc[zoom]);lon=(px[0]-this.zc[zoom])/this.Bc[zoom];lat=R2D*(2*Math.atan(Math.exp(g))-0.5*Math.PI);return[lon,lat];}};SphericalMercator.prototype.bbox=function(x,y,zoom,tms_style,srs){if(tms_style){y=(Math.pow(2,zoom)-1)-y;}var ll=[x*this.size,(+y+1)*this.size];var ur=[(+x+1)*this.size,y*this.size];var bbox=this.ll(ll,zoom).concat(this.ll(ur,zoom));if(srs==='900913'){return this.convert(bbox,'900913');}else{return bbox;}};SphericalMercator.prototype.xyz=function(bbox,zoom,tms_style,srs){if(srs==='900913'){bbox=this.convert(bbox,'WGS84');}var ll=[bbox[0],bbox[1]];var ur=[bbox[2],bbox[3]];var px_ll=this.px(ll,zoom);var px_ur=this.px(ur,zoom);var x=[Math.floor(px_ll[0]/this.size),Math.floor((px_ur[0]-1)/this.size)];var y=[Math.floor(px_ur[1]/this.size),Math.floor((px_ll[1]-1)/this.size)];var bounds={minX:Math.min.apply(Math,x)<0?0:Math.min.apply(Math,x),minY:Math.min.apply(Math,y)<0?0:Math.min.apply(Math,y),maxX:Math.max.apply(Math,x),maxY:Math.max.apply(Math,y)};if(tms_style){var tms={minY:(Math.pow(2,zoom)-1)-bounds.maxY,maxY:(Math.pow(2,zoom)-1)-bounds.minY};bounds.minY=tms.minY;bounds.maxY=tms.maxY;}return bounds;};SphericalMercator.prototype.convert=function(bbox,to){if(to==='900913'){return this.forward(bbox.slice(0,2)).concat(this.forward(bbox.slice(2,4)));}else{return this.inverse(bbox.slice(0,2)).concat(this.inverse(bbox.slice(2,4)));}};SphericalMercator.prototype.forward=function(ll){var xy=[A*ll[0]*D2R,A*Math.log(Math.tan((Math.PI*0.25)+(0.5*ll[1]*D2R)))];(xy[0]>MAXEXTENT)&&(xy[0]=MAXEXTENT);(xy[0]<-MAXEXTENT)&&(xy[0]=-MAXEXTENT);(xy[1]>MAXEXTENT)&&(xy[1]=MAXEXTENT);(xy[1]<-MAXEXTENT)&&(xy[1]=-MAXEXTENT);return xy;};SphericalMercator.prototype.inverse=function(xy){return[(xy[0]*R2D/A),((Math.PI*0.5)-2.0*Math.atan(Math.exp(-xy[1]/A)))*R2D];};return SphericalMercator;})();if(typeof module!=='undefined'&&typeof exports!=='undefined'){module.exports=exports=SphericalMercator;}vbd.Projection={JF:6378137,Ed:-85.05112878,Ec:85.05112878,F3:-180,Fv:180,It:(4*Math.PI),H6:(2*Math.PI),GH:(Math.PI/180),__rrad:(180/Math.PI),sphericalMercator:new SphericalMercator(),MAX_LATITUDE:85.0511287798,project:function(latlng){var max=this.MAX_LATITUDE;var lat=Math.max(Math.min(max,latlng.Latitude),-max);var sin=Math.sin(lat*this.GH);return new vbd.Point(this.JF*latlng.Longitude*this.GH,this.JF*Math.log((1+sin)/(1-sin))/2);},unproject:function(point){return new vbd.LatLng((2*Math.atan(Math.exp(point.y/this.JF))-(Math.PI/2))*this.__rrad,point.x*this.__rrad/this.JF);},Clip:function(n,Fj,Fk){return Math.min(Math.max(n,Fj),Fk);},MapSize:function(z){return 256<<z;},GroundResolution:function(lat,l){lat=this.Clip(lat,this.Ed,this.Ec);return Math.cos(lat*this.GH)*this.H6*this.JF/this.MapSize(l);},scale:function(z){return Math.pow(2,z);},Mb:function(lat,l,Kc){return this.GroundResolution(lat,l)*Kc/0.0254;},PixelXY2TileXY:function(pt,s){return new vbd.Point(pt.x/s,pt.y/s);},TileXY2PixelXY:function(t,s){return new vbd.Point(t.x*s,t.y*s);},LatLng2Pixel:function(N,P){if(vbd.isSphericalMercator){var pt=this.sphericalMercator.px([N.Longitude,N.Latitude],P);return new vbd.Point(pt[0],pt[1]);}var FV=this.Clip(N.Latitude,this.Ed,this.Ec);var FQ=this.Clip(N.Longitude,this.F3,this.Fv);var x=(FQ+180)/360;var DW=Math.sin(FV*this.GH);var y=0.5-Math.log((1+DW)/(1-DW))/this.It;var s=this.MapSize(P);return new vbd.Point(this.Clip(x*s+0.5,0,s-1),this.Clip(y*s+0.5,0,s-1));},LatLng2PixelEx:function(N,Fq,r){var FV=this.Clip(N.Latitude,this.Ed,this.Ec),FQ=this.Clip(N.Longitude,this.F3,this.Fv);var x=(FQ+180)/360;var DW=Math.sin(FV*this.GH),_d=Fq-1;var y=0.5-Math.log((1+DW)/(1-DW))/this.It;return new vbd.Point(this.Clip(x*Fq+0.5,0,_d),this.Clip(y*Fq+0.5,0,_d));},Pixel2LatLng:function(pt,l){if(vbd.isSphericalMercator){var ll=this.sphericalMercator.ll([pt.x,pt.y],l);return new vbd.LatLng(ll[1],ll[0]);}var s=this.MapSize(l);pt.x=((pt.x%s)+s)%s;var x=(this.Clip(pt.x,0,s-1)/s)-0.5;var y=0.5-(this.Clip(pt.y,0,s-1)/s);return new vbd.LatLng((90-360*Math.atan(Math.exp(-y*this.H6))/Math.PI),(360*x));}};vbd.MVCArray=function(AW){AW=AW||[];this.f=function(AD,W){vbd.event.fire(this,AD,W);vbd.event.fire(this,'changed',W);};this.copy=function(){return new vbd.MVCArray(AW.slice());};this.setArr=function(a){this.clear();AW=a.slice();};this.clear=function(){AW.length=0;delete this['_events'];};this.getLength=function(){return AW.length;};this.forEach=function(cb){if(cb){for(var i=0,G=this.getLength();i<G;i++){cb(AW[i],i,this);}}};this.getArray=function(){return AW;};this.toArray=function(){return AW.slice();};this.getAt=function(i){return AW[i];};this.insertAt=function(i,el){if(vbd.Util.isArray(el)){el=new vbd.MVCArray(el);}AW.splice(i,0,el);this.f('insert_at',{index:i});};this.pop=function(){if(this.getLength()>0){var el=AW.pop();this.f('remove_at',{index:this.getLength(),Br:el});return el;}};this.push=function(el){if(vbd.Util.isArray(el)){el=new vbd.MVCArray(el);}var l=AW.push(el);this.f('insert_at',{index:(l-1)});return l;};this.removeAt=function(i){if(AW[i]){var el=AW.splice(i,1);this.f('remove_at',{index:i,Br:el});return el;}};this.setAt=function(i,el){if(AW[i]){if(vbd.Util.isArray(el)){el=new vbd.MVCArray(el);}AW[i]=el;this.f('set_at',{index:i,Br:el});}};};vbd.Eh=function(P,BA,EK,Z,Cr){var FM=Math.floor(EK.height/Z)+2+(2*Cr);var E2=Math.floor(EK.width/Z)+2+(2*Cr);BA=vbd.latlng(BA);var pt=vbd.Projection.LatLng2Pixel(BA,P);var dx=pt.x-EK.width/2;var dy=pt.y-EK.height/2;this.BG=parseInt(dx/Z)-Cr;this.BL=parseInt(dy/Z)-Cr;this.Left=-parseInt(dx%Z)-Cr*Z;this.Top=-parseInt(dy%Z)-Cr*Z;if(dx<0){this.BG--;this.Left-=Z;}if(dy<0){this.BL--;this.Top-=Z;}this.CB=function(){var d=vbd.Ce[P];return Z*(((this.BG%d)+d)%d);};this.DQ=function(){return(Z*this.BL);};this.Hv=function(){return(this.BG+E2-1);};this.Hw=function(){return(this.BL+FM-1);};this.Right=function(){return(this.Left+(E2-1)*Z);};this.Bottom=function(){return this.Top+(FM-1)*Z;};this.width=function(){return Z*E2;};this.height=function(){return Z*FM;};this.getSize=function(){return new vbd.Size(this.width(),this.height());};this.getTileRange=function(){return{minX:this.BG,maxX:this.Hv(),minY:this.BL,maxY:this.Hw()};};this.getCenter=function(r){return new vbd.Point((this.BG+this.Hv())/2,(this.BL+this.Hw())/2,r);};this.getTilePos=function(J){return new vbd.Point((J.x-this.BG)*Z+this.Left,(J.y-this.BL)*Z+this.Top,true);};this.getBounds=function(){var x1=this.CB();var y1=this.DQ();var BR,w,BV;BR=vbd.Projection.Pixel2LatLng({x:x1,y:(y1+this.height())},P);w=Math.min((x1+this.width()),(vbd.Ce[P]*Z-0.1));BV=vbd.Projection.Pixel2LatLng({x:w,y:y1},P);return new vbd.LatLngBounds(BR,BV);};this.getMBR=function(){return this.getBounds().toArray(false);};};vbd.ControlPosition={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_CENTER:3,RIGHT_CENTER:4,BOTTOM_LEFT:5,BOTTOM_CENTER:6,BOTTOM_RIGHT:7};vbd.ZoomControlStyle={DEFAULT:0,LARGE:1,SMALL:2};vbd.ZoomControlOptions=function(opt){return vbd.Util.extend({position:vbd.ControlPosition.TOP_LEFT,offset:new vbd.Size(0,0),style:vbd.ZoomControlStyle.DEFAULT},opt);};vbd.ZoomControl=function(opt){var S,Bo,Bn,EU,Q=this,B=new vbd.ZoomControlOptions(opt);function MO(s){if(s===vbd.ZoomControlStyle.DEFAULT){return 134;}return 68;}function FL(JQ,cmd){vbd.event.addDomListener(JQ,'click',function(e){e.preventDefault();cmd===0?EU.zoomFit():cmd===1?EU.zoomIn():EU.zoomOut();return false;});}function Ko(){if(Bo.childNodes.length===0){var a=vbd.Util.AI('a',{position:'absolute',left:'5px',top:'5px',width:'40px',height:'40px',backgroundImage:vbd.Hf,backgroundRepeat:'no-repeat',backgroundPosition:"0px -50px",opacity:0.5},Bo);FL(a,0);}}function Kl(){if(Bo.childNodes.length>0)Bo.removeChild(Bo.childNodes[0]);}function Kj(){if(B.style===vbd.ZoomControlStyle.DEFAULT){Bn.style.marginLeft='8px';}var BM=new Image();BM.width=22;BM.height=22;BM.style.margin='5px';BM.style.opacity=0.5;BM.src=vbd.J$;Bn.childNodes[0].appendChild(BM);FL(Bn.childNodes[0],1);var Cl=new Image();Cl.width=22;Cl.height=22;Cl.style.opacity=0.5;Cl.src=vbd.KD;Cl.style.margin='6px';Bn.childNodes[1].appendChild(Cl);FL(Bn.childNodes[1],2);}this.setControlStyle=function(s){B.style=s;if(s===vbd.ZoomControlStyle.DEFAULT){Bo.style.width='50px';Bo.style.height='50px';Ko();}else if(s===vbd.ZoomControlStyle.SMALL){Kl();}Kj();};function Ki(C){S=vbd.Util.AI('div',{position:'absolute',height:'auto',zIndex:100,width:'50px'});Bo=vbd.Util.AI('div',{width:'0px',height:'0px',cssFloat:'left',cursor:'pointer',background:vbd.Hf+' no-repeat scroll 0 0 rgba(0, 0, 0, 0)'},S);vbd.DomUtil.setTransform(Bo,null,0.8);Bn=vbd.Util.AI('div',{width:'34px',height:'68px',cssFloat:'left',background:'#DDD8D6',opacity:0.8},S);Bn.style[vbd.JV]='3px';var a={width:'32px',height:'32px',cssFloat:'left',background:'#E6E4E4',cursor:'pointer',margin:'1px'};vbd.Util.AI('a',a,Bn);vbd.Util.AI('a',a,Bn);Q.setControlStyle(B.style);}this.getOptions=function(){return B;};this.setOptions=function(o){B=new vbd.ZoomControlOptions(o);var R=S.style;R.left='';R.top='';R.right='';R.bottom='';var V=B.offset,x=V.width,y=V.height,p=vbd.ControlPosition;switch(B.position){case p.TOP_LEFT:R.left=x+'px';R.top=y+'px';break;case p.TOP_RIGHT:R.right=x+'px';R.top=y+'px';break;case p.BOTTOM_LEFT:R.left=x+'px';R.bottom=y+'px';break;case p.BOTTOM_RIGHT:R.right=x+'px';R.bottom=y+'px';break;default:break;}};this.setPosition=function(p){this.setOptions({position:p});return this;};this.setOffset=function(o){this.setOptions({offset:o});return this;};this.getContainer=function(){return S;};this.setMap=function(C){if(!C){vbd.DomUtil.remove(S);S=null;return;}EU=C;Ki(C);C.getContainer().appendChild(S);this.setOptions(B);};};vbd.ScaleControlOptions=function(opt){return vbd.Util.extend({position:vbd.ControlPosition.BOTTOM_LEFT,offset:new vbd.Size(120,10)},opt);};vbd.ScaleControl=function(opt){var B=new vbd.ScaleControlOptions(opt);var S;function Hs(C){var Kk=[10,5,2],EY=-1,FN=1000000,C_=0,Gg=0,FC=0;do{EY++;if(EY>2){EY=0;FN/=10;}C_=Kk[EY]*FN;Gg=vbd.Projection.GroundResolution(C.getCenter().Latitude,C.getZoom());FC=C_/Gg;if(FN<=0.1){break;}}while(FC>130);var l=(C_>=1000)?((C_/1000)+" km"):(C_+" m");return{label:l,width:FC,C_:C_};}function Ap(C){var p=Hs(C);var s=Math.round((1/(p.width*0.0002645833))*p.C_);S.style.width=p.width+'px';var lb=B.showScale?p.label+' - 1/'+s:p.label;S.childNodes[0].innerHTML=lb;}this.getContainer=function(){return S;};this.getOptions=function(){return B;};this.setOptions=function(o){B=new vbd.ScaleControlOptions(o);var R=S.style;R.left='';R.top='';R.right='';R.bottom='';var V=B.offset,x=V.width,y=V.height,p=vbd.ControlPosition;var w=S.parentElement.clientWidth/2;switch(B.position){case p.TOP_LEFT:R.left=x+'px';R.top=y+'px';break;case p.TOP_RIGHT:R.left=x+'px';R.top=y+'px';break;case p.TOP_CENTER:R.right=w+x+'px';R.top=y+'px';break;case p.BOTTOM_LEFT:R.left=x+'px';R.bottom=y+'px';break;case p.BOTTOM_CENTER:R.right=w+x+'px';R.bottom=y+'px';break;case p.BOTTOM_RIGHT:R.right=x+'px';R.bottom=y+'px';break;default:break;}};this.setPosition=function(p){this.setOptions({position:p});return this;};this.setOffset=function(o){this.setOptions({offset:o});return this;};this.setMap=function(C){if(!C){vbd.DomUtil.remove(S);S=null;return;}var W=Hs(C);S=vbd.Util.AI('div',{position:'absolute',margin:'0px',padding:'0px',zIndex:80,height:'12px',width:W.width+'px',border:'2px solid gray','border-top':'none'},C.getContainer());var L6=vbd.Util.AI('span',{position:'absolute',fontSize:'11px',bottom:'0px',left:'2px'},S);var s=Math.round((1/(W.width*0.0002645833))*W.C_);var lb=B.showScale?W.label+' - 1/'+s:W.label;L6.innerHTML=lb;vbd.event.addListener(C,'boundchange',function(){Ap(C);});this.setOptions(B);};};vbd.JN=vbd.Class.extend({run:function(Bq,V,Au,Kp){this.stop();this.DL=true;this.Au=Au||0.25;this.FO=1/Math.max(Kp||0.5,0.2);this.Bq=Bq;this.V=new vbd.Point(V.x*-1,V.y*-1);this.EQ=+new Date();this.Cz();},stop:function(){if(!this.DL){return;}this.EJ();this.EX();},Cz:function(){this.Kr=vbd.Util.requestAnimFrame(this.Cz,this);this.EJ();},EJ:function(){var Be=(+new Date())-this.EQ,Au=this.Au*1000;if(Be<Au){this.EP(this.Er(Be/Au));}else{this.EX();}},EP:function(n){var _pt=new vbd.Point((this.Bq.x+(this.V.x*n)),(this.Bq.y+(this.V.y*n)),true);if(!this.ER){this.ER=_pt;vbd.event.fire(this,'step',{pt:_pt});}else if(!this.ER.equals(_pt)||n===1){this.ER=_pt;vbd.event.fire(this,'step',{pt:_pt});}},EX:function(){vbd.Util.cancelAnimFrame(this.Kr);this.DL=false;this.ER=null;vbd.event.fire(this,'end');},Er:function(t){return 1-Math.pow(1-t,this.FO);}});vbd.DJ=vbd.Class.extend({statics:{JL:'touchstart mousedown',END:{mousedown:'mouseup',touchstart:'touchend',pointerdown:'touchend',MSPointerDown:'touchend'},MOVE:{mousedown:'mousemove',touchstart:'touchmove',pointerdown:'touchmove',MSPointerDown:'touchmove'}},initialize:function(_el,C){this._el=_el;this.C=C;this.BX=false;},enable:function(){if(this.El){return;}this.Hr=vbd.event.addDomListener(this._el,vbd.DJ.JL,this.CU,this);this.El=true;},disable:function(){if(!this.El){return;}vbd.event.removeDomListener(this.Hr);this.Hr=null;this.El=false;this.BX=false;},CU:function(e){if(e.K0||!this.El){return;}this.BX=false;if((e.which!==1)&&(e.button!==1)&&!e.touches){return;}var Ai=vbd.DomUtil.Fg(e);if(Ai.AD===vbd.Ah.CA){return;}e.preventDefault();vbd.DomUtil.disableImageDrag();vbd.DomUtil.disableTextSelection();this.Aq=Ai;if(this.Ep){return;}vbd.event.fire(this,'down');var Bd=e.touches?e.touches[0]:e;this.Bv=new vbd.Point(Bd.clientX,Bd.clientY);this.Bq=this.Cy=this._el.AH;this.Hm=vbd.event.addDomListener(document,vbd.DJ.MOVE[e.type],this.C4,this);this.Hi=vbd.event.addDomListener(document,vbd.DJ.END[e.type],this.B3,this);},C4:function(e){if(e.K0||!this.El){return;}if(e.touches&&e.touches.length>1){this.BX=true;return;}var Bd=(e.touches&&e.touches.length===1?e.touches[0]:e);var Hj=new vbd.Point(Bd.clientX,Bd.clientY);var V=Hj.subtract(this.Bv);if(!V.x&&!V.y){return;}if(Math.abs(V.x)+Math.abs(V.y)<this.C.getOptions().clickOffset){return;}vbd.event.preventDefault(e);this.V=V;if(!this.BX){vbd.event.fire(this,'dragstart',{obj:this.Aq,evt:e});this.BX=true;}this.Cy=new vbd.Point((this.Bq.x+V.x),(this.Bq.y+V.y));this.Ep=true;vbd.Util.cancelAnimFrame(this.Hk);this.Hk=vbd.Util.requestAnimFrame(this.Kv,this,true,e);},Kv:function(p){vbd.event.fire(this,'drag',{pt:this.Cy,obj:this.Aq,V:this.V,evt:p});},B3:function(e){vbd.event.removeDomListener(this.Hm);this.Hm=null;vbd.event.removeDomListener(this.Hi);this.Hi=null;if(e.K0||!this.El){return;}vbd.DomUtil.enableImageDrag();vbd.DomUtil.enableTextSelection();if(this.BX&&this.Ep){vbd.Util.cancelAnimFrame(this.Hk);vbd.event.fire(this,'dragend',{obj:this.Aq,evt:e});}this.Ep=false;}});vbd.LineUtil={checkLineIntersection:function(DC,DD,FH,FI,FJ,FW,Gd,Gf){var D$,a,b,Ge,Gh,Cn={x:null,y:null,L$:false,MH:false};D$=((Gf-FW)*(FH-DC))-((Gd-FJ)*(FI-DD));if(D$==0){return Cn;}a=DD-FW;b=DC-FJ;Ge=((Gd-FJ)*a)-((Gf-FW)*b);Gh=((FH-DC)*a)-((FI-DD)*b);a=Ge/D$;b=Gh/D$;Cn.x=DC+(a*(FH-DC));Cn.y=DD+(a*(FI-DD));if(a>0&&a<1){Cn.L$=true;}if(b>0&&b<1){Cn.MH=true;}return Cn;},simplify:function(U,GM){if(!GM||!U.length){return U.slice();}U=this.JU(U,GM);U=this.Ja(U,GM);return U;},J1:function(p,p1,p2){return Math.sqrt(this.Fz(p,p1,p2,true));},closestPointOnSegment:function(p,p1,p2){return this.Fz(p,p1,p2);},Ja:function(U,CT){var G=U.length,ArrayConstructor=typeof Uint8Array!==undefined+''?Uint8Array:Array,AX=new ArrayConstructor(G);AX[0]=AX[G-1]=1;this.Fx(U,AX,CT,0,G-1);var i,IK=[];for(i=0;i<G;i++){if(AX[i]){IK.push(U[i]);}}return IK;},Fx:function(U,AX,CT,Bd,Fy){var Fw=0,ES,i,CR;for(i=Bd+1;i<=Fy-1;i++){CR=this.Fz(U[i],U[Bd],U[Fy],true);if(CR>Fw){ES=i;Fw=CR;}}if(Fw>CT){AX[ES]=1;this.Fx(U,AX,CT,Bd,ES);this.Fx(U,AX,CT,ES,Fy);}},JU:function(U,CT){var Ft=[U[0]],prev=0,G=U.length;for(var i=1;i<G;i++){if(this.CR(U[i],U[prev])>CT){Ft.push(U[i]);prev=i;}}if(prev<G-1){Ft.push(U[G-1]);}return Ft;},Jb:null,Jd:function(a,b,F,JZ){var DU=JZ?this.Jb:this.Ca(a,F),DV=this.Ca(b,F),GJ,p,GF;this.Jb=DV;while(true){if(!(DU|DV)){return[a,b];}else if(DU&DV){return false;}else{GJ=DU||DV;p=this.F2(a,b,GJ,F);GF=this.Ca(p,F);if(GJ===DU){a=p;DU=GF;}else{b=p;DV=GF;}}}},F2:function(a,b,An,F){var dx=b.x-a.x;var dy=b.y-a.y;var min=F.min;var max=F.max;var x,y;if(An&8){x=a.x+dx*(max.y-a.y)/dy;y=max.y;}else if(An&4){x=a.x+dx*(min.y-a.y)/dy;y=min.y;}else if(An&2){x=max.x;y=a.y+dy*(max.x-a.x)/dx;}else if(An&1){x=min.x;y=a.y+dy*(min.x-a.x)/dx;}return new vbd.Point(x,y);},Ca:function(p,F){var An=0;if(p.x<F.min.x){An|=1;}else if(p.x>F.max.x){An|=2;}if(p.y<F.min.y){An|=4;}else if(p.y>F.max.y){An|=8;}return An;},CR:function(p1,p2){var dx=p2.x-p1.x,dy=p2.y-p1.y;return dx*dx+dy*dy;},Fz:function(p,p1,p2,CR){var x=p1.x,y=p1.y;var dx=p2.x-x;var dy=p2.y-y;var dot=dx*dx+dy*dy;var t;if(dot>0){t=((p.x-x)*dx+(p.y-y)*dy)/dot;if(t>1){x=p2.x;y=p2.y;}else if(t>0){x+=dx*t;y+=dy*t;}}dx=p.x-x;dy=p.y-y;return CR?(dx*dx+dy*dy):new vbd.Point(x,y);},ClosestPointOnSegment:function(p,p1,p2){var x=p1.x,y=p1.y;var dx=p2.x-x;var dy=p2.y-y;var dot=dx*dx+dy*dy;var t;if(dot>0){t=((p.x-x)*dx+(p.y-y)*dy)/dot;if(t>1){x=p2.x;y=p2.y;}else if(t>0){x+=dx*t;y+=dy*t;}}dx=p.x-x;dy=p.y-y;return{distance:dx*dx+dy*dy,point:new vbd.Point(x,y)}}};vbd.I_={};vbd.I_.Jy=function(U,F,CZ){var Df,Kb=[1,4,2,8],i,j,k,a,b,G=U.length,Cb,p,lu=vbd.LineUtil;for(i=0;i<G;i++){U[i].An=lu.Ca(U[i],F);}for(k=0;k<4;k++){Cb=Kb[k];Df=[];G=U.length;j=G-1;for(i=0;i<G;j=i++){a=U[i];b=U[j];if(!(a.An&Cb)){if(b.An&Cb){p=lu.F2(b,a,Cb,F,CZ);p.An=lu.Ca(p,F);Df.push(p);}Df.push(a);}else if(!(b.An&Cb)){p=lu.F2(b,a,Cb,F,CZ);p.An=lu.Ca(p,F);Df.push(p);}}U=Df;}return U;};vbd.I_.decodePolylineString=function(encodedPoints,COORDINATE_PRECISION){COORDINATE_PRECISION=COORDINATE_PRECISION||Math.pow(10,6);var polylineChars=encodedPoints;var index=0;var currentLat=0;var currentLng=0;var next5bits;var sum;var shifter;var length=polylineChars.length;var coords=[];while(index<length){sum=0;shifter=0;do{next5bits=polylineChars.charCodeAt(index++)-63;sum|=(next5bits&31)<<shifter;shifter+=5;}while(next5bits>=32&&index<length);if(index>=length)break;currentLat+=(sum&1)===1?~(sum>>1):(sum>>1);sum=0;shifter=0;do{next5bits=polylineChars.charCodeAt(index++)-63;sum|=(next5bits&31)<<shifter;shifter+=5;}while(next5bits>=32&&index<length);if(index>=length&&next5bits>=32)break;currentLng+=(sum&1)===1?~(sum>>1):(sum>>1);coords.push({lat:currentLat/COORDINATE_PRECISION,lng:currentLng/COORDINATE_PRECISION});}return coords;};vbd.PathOptions=function(){return{map:null,stroke:true,strokeColor:'#FF0000',strokeOpacity:1.0,strokeWidth:2,strokeDasharray:null,lineCap:'round',lineJoin:'round',visible:true,id:null,zIndex:0,cursor:'pointer',interactive:true,title:null,clip:true,drawPath:true,smoothFactor:2.0,pointerEvents:null};};vbd.Path=vbd.Class.extend({AS:function(AD,W){if(!this.AO||!(this.AO[AD]||this.AO[AD+'_idx'])){W=vbd.Util.extend({},W,{overlay:this});vbd.event.fire(this.C,AD,W);return;}if(this.NAME_SHAPE==='Polyline'){W=vbd.Util.extend(W,vbd.Util.ClosePointPolyline(W.LatLng,this.B.path.getArray()));}if(AD==='click'){if(!this.C.isMove()){vbd.event.fire(this,AD,W);}}else{vbd.event.fire(this,AD,W);}if(W){W.overlay=this;}vbd.event.fire(this.C,AD,W);},setZIndex:function(BZ){this.B.zIndex=BZ;},getOptions:function(){return this.B;},getCursor:function(){return this.B.cursor;},setCursor:function(CE){this.B.cursor=CE;this.H.style.cursor=CE;},getVisible:function(){return this.B.visible;},setVisible:function(G1){this.B.visible=G1;this.H.style.display=G1?'block':'none';},bringToFront:function(){if(this.H){vbd.DomUtil.toFront(this.H);}return this;},bringToBack:function(){if(this.H){vbd.DomUtil.toBack(this.H);}return this;},setStroke:function(opt){this.B=vbd.Util.extend(this.B,opt);var D=this.B,H=this.H;if(!H){return;}if(D.stroke){H.setAttribute('stroke',D.strokeColor);H.setAttribute('stroke-opacity',D.strokeOpacity);H.setAttribute('stroke-width',D.strokeWidth);H.setAttribute('stroke-linecap',D.lineCap);H.setAttribute('stroke-linejoin',D.lineJoin);if(D.strokeDasharray){H.setAttribute('stroke-dasharray',D.strokeDasharray);}else{H.removeAttribute('stroke-dasharray');}if(D.dashOffset){H.setAttribute('stroke-dashoffset',D.dashOffset);}else{H.removeAttribute('stroke-dashoffset');}}else{H.setAttribute('stroke','none');}},setFill:function(opt){this.B=vbd.Util.extend(this.B,opt);var D=this.B,H=this.H;if(!H){return;}if(D.fill){H.setAttribute('fill',D.fillColor||D.strokeColor);H.setAttribute('fill-opacity',D.fillOpacity);H.setAttribute('fill-rule',D.fillRule);}else{H.setAttribute('fill','none');}},Ln:function(H){if(!H){return;}var D=this.B;H.style.cursor=D.cursor;this.setStroke();this.setFill();H.setAttribute('pointer-events',D.pointerEvents||(D.interactive?'visiblePainted':'none'));this.setVisible(D.visible);},getStrokeDasharray:function(){return this.B.strokeDasharray;},setStrokeDasharray:function(Ll){this.setStroke({strokeDasharray:Ll});},getDashOffset:function(){return this.B.dashOffset;},setDashOffset:function(Lk){this.setStroke({dashOffset:Lk});},getStrokeColor:function(){return this.B.strokeColor;},setStrokeColor:function(Lm){this.setStroke({strokeColor:Lm});},getStrokeOpacity:function(){return this.B.strokeOpacity;},setStrokeOpacity:function(Lr){this.setStroke({strokeOpacity:Lr});},getStrokeWidth:function(){return this.B.strokeWidth;},setStrokeWidth:function(Lt){this.setStroke({strokeWidth:Lt});},getFillColor:function(){return this.B.fillColor;},setFillColor:function(Lx){this.setFill({fillColor:Lx});},getFillOpacity:function(){return this.B.fillOpacity;},setFillOpacity:function(Lu){this.setFill({fillOpacity:Lu});},getFillRule:function(){return this.B.fillRule;},setFillRule:function(L0){this.setFill({fillRule:L0});},getTitle:function(){return this.B.title;},getBounds:function(){return this.F;},setDrawArrows:function(D){},Dn:function(){},Ap:function(){this.Bw();this.Dn();},Eo:function(){vbd.DomUtil.remove(this.H);this.H=null;if(this.AK){this.AK.Et();}},getSVGPath:function(){return this.H;},FX:function(C,AY){this.AY=AY;this.C=C;this.Bw();if(!this.H&&this.B.drawPath){var H=document.createElementNS(vbd.ns,'path');H.BI=vbd.Ah.FG;H.obj=this;vbd.DomUtil.add(H,AY);this.H=H;this.Ln(H);}this.Dn();var Ij=this.getPaths?this.getPaths():this.getPath?this.getPath():null;if(Ij){this.Cu(Ij);}},getId:function(){return this.$;},getMap:function(){return this.C;},setMap:function(C){if(C){C.addShape(this);}else if(this.C){this.C.removeShape(this);}},Il:function(){return(this.B.stroke?this.B.strokeWidth/2:0)+(vbd.Browser.touch?10:1);},Ic:function(){var Ad={};if(this.CLASS_NAME==="Polyline"){Ad=new vbd.PolylineOptions(this.B);}else if(this.CLASS_NAME==="Polygon"){Ad=new vbd.PolygonOptions(this.B);}else if(this.CLASS_NAME==="Rect"){Ad=new vbd.RectangleOptions(this.B);}else if(this.CLASS_NAME==="Circle"){Ad=new vbd.CircleOptions(this.B);}Ad.path=null;Ad.paths=null;Ad.map=null;return Ad;},KI:function(JI){if(JI.type==="Feature"){return JI;}return{type:"Feature",properties:this.Ic(),geometry:JI};},getFeature:function(Da,H5){return this.KI(H5||Da);},H9:function(N){return[N.Longitude,N.Latitude];},C$:function(){},Fn:function(BD,Cs,CH){var J=[],G=BD.getLength(),i;for(i=0;i<G;i++){if(Cs){J.push(this.Fn(BD.getAt(i),Cs-1,CH));}else{J.push(this.H9(BD.getAt(i)));}}if(!Cs&&CH){J.push(J[0]);}return J;},Eq:function(N){return N.Longitude+' '+N.Latitude;},En:function(BD,Cs,CH){var J='(',G=BD.getLength(),i;for(i=0;i<G;i++){var _s=(i<G-1)?',':')';if(Cs){J=J.concat(this.En(BD.getAt(i),Cs-1,CH),_s);}else{if(i===(G-1)&&CH){J=J.concat(this.Eq(BD.getAt(i)),',',this.Eq(BD.getAt(0)),_s);}else{J=J.concat(this.Eq(BD.getAt(i)),_s);}}}return J;}});vbd.PolylineOptions=function(opt){return vbd.Util.extend(new vbd.PathOptions(),{path:null,drawArrows:false,repeatArrow:120,widthArrow:10,strokeArrow:true,strokeColorArrow:'#FF0000',fillColorArrow:'#FF0000',strokeOpacityArrow:1.0,fillOpacityArrow:1.0,strokeWidthArrow:1,fillRuleArrow:'evenodd',fillArrow:true},opt);};vbd.Polyline=vbd.Path.extend({initialize:function(D){this.B=new vbd.PolylineOptions(D);this.F=new vbd.LatLngBounds();this.B.path=this.B1(D.path);this.$=this.B.id||vbd.stamp(this);this.NAME_SHAPE=this.CLASS_NAME='Polyline';if(D.map){D.map.addShape(this);}},copy:function(){return new vbd.Polyline(new vbd.PolylineOptions(this.B,{map:null}));},Dj:function(H){if(H[0]instanceof vbd.MVCArray){return false;}return!vbd.Util.isArray(H[0])||typeof H[0][0]!=='object';},B1:function(H){var As=new vbd.MVCArray();if(H instanceof vbd.MVCArray){H=H.getArray();}else if(typeof H==='string'||H instanceof String){H=vbd.I_.decodePolylineString(H);}var Kd=this.Dj(H);var G=H.length;for(var i=0;i<G;i++){if(Kd){var IQ=vbd.latlng(H[i]);As.push(IQ);this.F.extend(IQ);}else{As.push(this.B1(H[i]));}}if(this.CLASS_NAME==='Polygon'&&As.getAt(0)instanceof vbd.LatLng){G=As.getLength();if(G>=2&&As.getAt(0).equals(As.getAt(G-1))){As.pop();}}return As;},Gk:function(Lz){var str='',AM=this.AM,i,j,G=AM.length,A1,U,p;for(i=0;i<G;i++){U=AM[i];A1=U.length;for(j=0;j<A1;j++){p=U[j];str+=(j?'L':'M')+p.x+' '+p.y;}str+=Lz?'z':'';}return str||'M0 0';},getCenter:function(){var i,FZ=0,FY,Fa=0,p1,p2,GN,U=this.A8[0],G=U.length;for(i=0;i<G-1;i++){FZ+=U[i].distanceTo(U[i+1])/2;}if(FZ===0){return this.C.convertLayerPointToLatLng(U[0]);}for(i=0;i<G-1;i++){p1=U[i];p2=U[i+1];FY=p1.distanceTo(p2);Fa+=FY;if(Fa>FZ){GN=(Fa-FZ)/FY;return this.C.convertLayerPointToLatLng(new vbd.Point(p2.x-GN*(p2.x-p1.x),p2.y-GN*(p2.y-p1.y)));}}},IB:function(){if(this.CL){var i,G=this.CL.length;for(i=0;i<G;i++){vbd.event.clearEvents(this.CL[i]);}}this.CL=[];},IC:function(){if(this instanceof vbd.Polygon){this.Ef(this.getPaths(),false);}else if(this instanceof vbd.Polyline){this.Ef(this.getPath(),false);}},Cu:function(H){if(!H){return null;}var Dj=H.getAt(0)instanceof vbd.LatLng,G=H.getLength(),i,Q=this;if(!this.CL){this.CL=[];}if(Dj){this.CL.push(vbd.event.addListener(H,'changed',function(){Q.IC();}));}else{this.CL.push(vbd.event.addListener(H,'changed',function(){Q.IC();}));for(i=0;i<G;i++){this.Cu(H.getAt(i));}}},Ef:function(H,_b){if(!_b){this.F=new vbd.LatLngBounds();H=this.B1(H);}this.Ap();vbd.event.fire(this,'pathchange');},D0:function(H,As,Af){var Dj=H.getAt(0)instanceof vbd.LatLng,G=H.getLength(),i,Ea,C=this.C,P=C.getZoom();if(Dj){Ea=[];for(i=0;i<G;i++){Ea[i]=C.latLngToLayerPoint(H.getAt(i));Af.extend(Ea[i]);}As.push(Ea);}else{for(i=0;i<G;i++){this.D0(H.getAt(i),As,Af);}}},Bw:function(C){this.C=C||this.C;if(!this.C){return;}var Af=new vbd.Bounds();this.A8=[];var D=this.B,H=this.NAME_SHAPE==='Polyline'?D.path:D.paths;this.D0(H,this.A8,Af);var w=this.Il(),p=new vbd.Point(w,w);if(this.F.isValid()&&Af.isValid()){Af.min.IS(p);Af.max.CI(p);this.Af=Af;}},Im:function(F){this.AM=[];if(!this.Af||!this.Af.intersects(F)){return;}if(!this.B.clip){this.AM=this.A8;return;}var AM=this.AM,i,j,k=0,G=this.A8.length,A1,DZ,U;for(i=0;i<G;i++){U=this.A8[i];A1=U.length;for(j=0;j<A1-1;j++){DZ=vbd.LineUtil.Jd(U[j],U[j+1],F,j);if(!DZ){continue;}AM[k]=AM[k]||[];AM[k].push(DZ[0]);if((DZ[1]!==U[j+1])||(j===A1-2)){AM[k].push(DZ[1]);k++;}}}},KG:function(){var AM=this.AM;var G=AM.length;var GM=this.B.smoothFactor+(vbd.Browser.touch?10:0);for(var i=0;i<G;i++){AM[i]=vbd.LineUtil.simplify(AM[i],GM);}},C$:function(){if(!this.B.drawPath)return;if(this.H){var d=this.Gk();this.H.setAttribute('d',d);}if(this.AK){this.AK.Et();if(this.AM.length){this.setDrawArrows(this.B.drawArrows);}}},Dn:function(F){F=F||this.C.getBoundsPaths();this.Im(F);this.KG();this.C$();},setDrawArrows:function(b){this.B.drawArrows=b;if(b){if(!this.AK){this.AK={DX:function(a,b,Gl){var Ci={x:(b.x-a.x),y:(b.y-a.y)},Gm=Math.sqrt(Ci.x*Ci.x+Ci.y*Ci.y),Gn={x:(Ci.x/Gm),y:(Ci.y/Gm)};return new vbd.Point((a.x+Gn.x*Gl),(a.y+Gn.y*Gl),true);},Eb:function(x1,y1,x2,y2,By,d){var Gs=Math.atan2(y2-y1,x2-x1),h=Math.abs(d/Math.cos(By)),Gp=Gs+Math.PI+By,KR=x2+Math.cos(Gp)*h,KQ=y2+Math.sin(Gp)*h,Gq=Gs+Math.PI-By;var KS=x2+Math.cos(Gq)*h,KP=y2+Math.sin(Gq)*h;return'M'+KR+','+KQ+'L'+x2+','+y2+'L'+KS+','+KP+'z';},Ei:function(L1,D){var H=document.createElementNS(vbd.ns,'path');if(D.strokeArrow){H.setAttribute('stroke',D.strokeColorArrow);H.setAttribute('stroke-opacity',D.strokeOpacityArrow);H.setAttribute('stroke-width',D.strokeWidthArrow);H.setAttribute('stroke-linecap',D.lineCap);H.setAttribute('stroke-linejoin',D.lineJoin);}else{H.setAttribute('stroke','none');}if(D.fillArrow){H.setAttribute('fill',D.fillColorArrow);H.setAttribute('fill-opacity',D.fillOpacityArrow);H.setAttribute('fill-rule',D.fillRuleArrow);}else{H.setAttribute('fill','none');}H.setAttribute('d',L1);this.AY.appendChild(H);if(!this.AK){this.AK=[];}this.AK.push(H);},Gr:function(pt,min,max){return(pt.x>min.x&&pt.x<max.x&&pt.y>min.y&&pt.y<max.y);},Ly:function(Aa,D){var i,Gt=Aa.length-1,By=Math.PI/8,d=0,Ab=null,Ee=0,BS=0,CQ=D.repeatArrow,wa=D.widthArrow,Bx=this.Cq.C.getBoundsPaths();for(i=0;i<Gt;i++){d=Aa[i].distanceTo(Aa[i+1]);if(d>CQ){Ee=Math.floor((d+BS)/CQ);Ab=this.DX(Aa[i],Aa[i+1],(CQ-BS));if(Aa[i].distanceTo(Ab)<wa){Ab=this.DX(Ab,Aa[i+1],wa);}for(var j=0;j<Ee;j++){if(!D.clip){if(this.Gr(Ab,Bx.min,Bx.max)){this.Ei(this.Eb(Aa[i].x,Aa[i].y,Ab.x,Ab.y,By,wa),D);}}else{this.Ei(this.Eb(Aa[i].x,Aa[i].y,Ab.x,Ab.y,By,wa),D);}Ab=this.DX(Ab,Aa[i+1],CQ);}BS=Math.abs((Ee*CQ)-(d+BS));}else{var JM=BS;BS+=d;if(BS>CQ){Ab=this.DX(Aa[i],Aa[i+1],(CQ-JM));if(d>wa){if(Aa[i].distanceTo(Ab)<wa){Ab=this.DX(Aa[i],Aa[i+1],(wa+1));}BS=Ab.distanceTo(Aa[i+1]);if(!D.clip){if(this.Gr(Ab,Bx.min,Bx.max)){this.Ei(this.Eb(Aa[i].x,Aa[i].y,Ab.x,Ab.y,By,wa),D);}}else{this.Ei(this.Eb(Aa[i].x,Aa[i].y,Ab.x,Ab.y,By,wa),D);}}else{BS=0;}}}}Gt=d=Ab=Ee=BS=null;},Et:function(){if(this.AK){for(var i in this.AK){vbd.DomUtil.remove(this.AK[i]);}this.AK.length=0;}},drawArrows:function(Cq){this.Cq=Cq;var D=this.Cq.B;this.AM=this.Cq.AM;this.AY=this.Cq.AY;this.Et();for(var i=0,G=this.AM.length;i<G;i++){this.Ly(this.AM[i],D);}}};}this.AK.drawArrows(this);}},setFillArrow:function(fo){if(!fo){return;}if(fo.hasOwnProperty('fillArrow')){this.B.fillArrow=fo.fillArrow;}if(fo.fillColorArrow){this.B.fillColorArrow=fo.fillColorArrow;}if(fo.fillOpacityArrow){this.B.fillOpacityArrow=fo.fillOpacityArrow;}if(fo.fillRuleArrow){this.B.fillRuleArrow=fo.fillRuleArrow;}if(!this.AK){return;}var D=this.B;var AK=this.AK.AK,i,G=AK.length;if(!D.fillArrow){for(i=0;i<G;i++){AK[i].setAttribute('fill','none');}return;}for(i=0;i<G;i++){AK[i].setAttribute('fill',D.fillColorArrow);AK[i].setAttribute('fill-opacity',D.fillOpacityArrow);AK[i].setAttribute('fill-rule',D.fillRuleArrow);}},setStrokeArrow:function(o){if(o.hasOwnProperty('strokeArrow')){this.B.strokeArrow=o.strokeArrow;}if(o.strokeColorArrow){this.B.strokeColorArrow=o.strokeColorArrow;}if(o.strokeOpacityArrow){this.B.strokeOpacityArrow=o.strokeOpacityArrow;}if(o.strokeWidthArrow){this.B.strokeWidthArrow=o.strokeWidthArrow;}if(o.lineCap){this.B.lineCap=o.lineCap;}if(o.lineJoin){this.B.lineJoin=o.lineJoin;}if(!this.AK){return;}var D=this.B;var AK=this.AK.AK,G=AK.length;var i=0;if(!D.strokeArrow){for(i=0;i<G;i++){AK[i].setAttribute('stroke','none');}return;}for(i=0;i<G;i++){AK[i].setAttribute('stroke',D.strokeColorArrow);AK[i].setAttribute('stroke-opacity',D.strokeOpacityArrow);AK[i].setAttribute('stroke-width',D.strokeWidthArrow);AK[i].setAttribute('stroke-linecap',D.lineCap);AK[i].setAttribute('stroke-linejoin',D.lineJoin);}},getParts:function(){return this.AM;},getPath:function(){return this.B.path;},setPath:function(H){this.F=new vbd.LatLngBounds();this.B.path=this.B1(H);this.Ef(this.B.path,true);this.IB();this.Cu(this.B.path);},D1:function(H){if(H.getAt(0)instanceof vbd.MVCArray){return true;}return false;},toGeoJSON:function(){var H=this.getPath(),Bb=this.D1(H);var J=this.Fn(H,Bb?1:0);return this.getFeature(this,{type:(Bb?'Multi':'')+'LineString',coordinates:J});},toWKT:function(){var H=this.getPath(),Bb=this.D1(H);var J=this.En(H,Bb?1:0);var AD=(Bb?'MULTI':'')+'LINESTRING ';return AD.concat(J);},FT:function(p,CH){var i,j,k,part;var w=this.Il();if(!this.Af.contains(p))return false;var G=this.AM.length;for(i=0;i<G;i++){part=this.AM[i];var A1=part.length,k=A1-1;for(j=0;j<A1;k=j++){if(!CH&&(j===0)){continue;}if(vbd.LineUtil.J1(p,part[k],part[j])<=w){return true;}}}return false;}});vbd.PolygonOptions=function(opt){return vbd.Util.extend(new vbd.PathOptions(),{paths:null,fill:true,fillColor:"#FF0000",fillOpacity:0.5,fillRule:'evenodd'},opt);};vbd.Polygon=vbd.Polyline.extend({initialize:function(D){this.NAME_SHAPE=this.CLASS_NAME='Polygon';this.B=new vbd.PolygonOptions(D);this.F=new vbd.LatLngBounds();this.B.paths=this.B1(D.paths);this.$=this.B.id||vbd.stamp(this);if(D.map){D.map.addShape(this);}},copy:function(){return new vbd.Polygon(new vbd.PolygonOptions(this.B,{map:null}));},getCenter:function(){var i,j,G,p1,p2,f,BK=0,x=0,y=0,BA,U=this.A8[0];G=U.length;j=G-1;for(i=0;i<G;j=i++){p1=U[i];p2=U[j];f=p1.y*p2.x-p2.y*p1.x;x+=(p1.x+p2.x)*f;y+=(p1.y+p2.y)*f;BK+=f*3;}if(BK===0){BA=U[0];}else{BA=new vbd.Point(x/BK,y/BK,true);}return this.C.convertLayerPointToLatLng(BA);},Im:function(F){this.AM=[];var D=this.B;var w=D.strokeWidth;var p=new vbd.Point(w,w);F=new vbd.Bounds(F.min.subtract(p),F.max.add(p));if(!this.Af||!this.Af.intersects(F)){return;}if(!D.clip){this.AM=this.A8;return;}this.AM=[];var A8=this.A8,G=A8.length,GQ;for(var i=0;i<G;i++){GQ=vbd.I_.Jy(A8[i],F,true);if(GQ.length){this.AM.push(GQ);}}},setPath:function(BD){var Ct=this.B.paths,el=Ct.getAt(0);if(el instanceof vbd.MVCArray){this.B.paths.setAt(0,this.B1(BD));}else{return this.setPaths(BD);}},getPath:function(){var Ct=this.B.paths,el=Ct.getAt(0);if(el instanceof vbd.MVCArray){return el}else{return Ct;}},setPaths:function(Ct){this.F=new vbd.LatLngBounds();this.B.paths=this.B1(Ct);this.Ef(this.B.paths,true);this.IB();this.Cu(this.B.paths);},getPaths:function(){return this.B.paths;},C$:function(){var d=this.Gk(true);if(!this.B.drawPath)return;if(this.H)this.H.setAttribute('d',d);},toGeoJSON:function(){var H=this.getPaths();var Cx=this.D1(H),E1=false;var Ds=H.getAt(0);if(Cx&&Ds instanceof vbd.MVCArray){E1=Ds.getAt(0)instanceof vbd.MVCArray;}var J=this.Fn(H,E1?2:Cx?1:0,true);if(!Cx){J=[J];}return this.getFeature(this,{type:(E1?'Multi':'')+'Polygon',coordinates:J});},toWKT:function(){var H=this.getPaths();var Cx=this.D1(H),Bb=false;var Ds=H.getAt(0);if(Cx&&Ds instanceof vbd.MVCArray){Bb=Ds.getAt(0)instanceof vbd.MVCArray;}var J=this.En(H,Bb?2:Cx?1:0,true);if(J.indexOf('((')===-1){J='('.concat(J,')');}var AD=(Bb?'MULTI':'')+'POLYGON ';return AD.concat(J);},FT:function(p){var GL=false;var part,p1,p2,i,j,k;if(!this.Af.contains(p))return false;var G=this.AM.length;for(i=0;i<G;i++){part=this.AM[i];var A1=part.length;k=A1-1;for(j=0;j<A1;k=j++){p1=part[j];p2=part[k];if(((p1.y>p.y)!==(p2.y>p.y))&&(p.x<(p2.x-p1.x)*(p.y-p1.y)/(p2.y-p1.y)+p1.x)){GL=!GL;}}}return GL||vbd.Polyline.prototype.FT.call(this,p,true);}});vbd.RectangleOptions=function(opt){return vbd.Util.extend({bounds:null,title:null},new vbd.PolygonOptions(),opt);};vbd.Rectangle=vbd.Polygon.extend({initialize:function(D){this.NAME_SHAPE='Polygon';this.CLASS_NAME='Rect';D=new vbd.RectangleOptions(D);this.B=D;this.F=new vbd.LatLngBounds(D.sw,D.ne);D.paths=this.B1(this.G3(D.bounds));this.$=D.id||vbd.stamp(this);if(D.map){this.setMap(D.map);}},copy:function(){return new vbd.Rectangle(new vbd.RectangleOptions(this.B,{map:null}));},getCenter:function(){return this.getBounds().getCenter();},setBounds:function(F){this.B.bounds=F;this.setPaths(this.G3(F));this.AS('bounds_changed');},getBounds:function(){return this.F;},Cu:function(){},G3:function(F){return[new vbd.LatLng(F.ne.Latitude,F.sw.Longitude),F.ne,new vbd.LatLng(F.sw.Latitude,F.ne.Longitude),F.sw];}});vbd.CircleOptions=function(B4){return vbd.Util.extend({center:null,radius:100,radius2:null,title:null},new vbd.PolygonOptions(B4));};vbd.Circle=vbd.Path.extend({initialize:function(D){this.CLASS_NAME='Circle';this.NAME_SHAPE='Point';D=new vbd.CircleOptions(D);if(!D.radius2){D.radius2=D.radius;}this.F=new vbd.LatLngBounds(D.center);this.B=D;this.$=D.id||vbd.stamp(this);if(D.map){D.map.addShape(this);}},copy:function(){return new vbd.Circle(new vbd.CircleOptions(this.B,{map:null}));},getBounds:function(){var C=this.C;if(!C){return new vbd.LatLngBounds(this.getCenter());}if(!this.pt){this.pt=C.BB(this.getCenter(),true);}var p0=new vbd.Point(this.pt.x-this.BP,this.pt.y-this.Bt);var p1=new vbd.Point(this.pt.x+this.BP,this.pt.y+this.Bt);return new vbd.LatLngBounds(C.convertLayerPointToLatLng(p0),C.convertLayerPointToLatLng(p1));},Bw:function(){var B4=this.B;this.pt=this.C.BB(B4.center,true);this.BP=this.G4(B4.radius);this.Bt=this.G4(B4.radius2);var Af=new vbd.Bounds(vbd.point(this.pt.x-this.BP,this.pt.y-this.Bt),vbd.point(this.pt.x+this.BP,this.pt.y+this.Bt));this.Af=Af;},C$:function(){var p=this.pt;var r=Math.abs(this.BP);var Lw=Math.abs(this.Bt||r);var arc='a'+r+','+Lw+' 0 1,0 ';var d='M'+(p.x-r)+','+p.y+arc+(r*2)+',0 '+arc+(-r*2)+',0 ';this.H.setAttribute('d',d);},Dn:function(){if(!this.C||!this.B.drawPath){return;}var F=this.C.getBoundsPaths();if(!this.Af||!this.Af.intersects(F)){this.H.setAttribute('d','M0 0');return;}this.C$();},setCenter:function(N){this.B.center=N;this.Ap();vbd.event.fire(this,'center_changed');},getCenter:function(){return this.B.center;},setRadius:function(BP,Bt){var B4=this.B;if(BP){B4.radius=BP;}if(Bt){B4.radius2=Bt;}this.Ap();vbd.event.fire(this,'radius_changed');},setBounds:function(BO){var D=this.B;var N=new vbd.LatLng(BO.ne.lat(),BO.sw.lng());D.center=BO.getCenter();D.radius=vbd.Util.DistanceBetween2LatLng(N,BO.ne)/2;D.radius2=vbd.Util.DistanceBetween2LatLng(N,BO.sw)/2;this.Ap();},getRadius:function(){return this.B.radius;},getRadius2:function(){return this.B.radius2;},Cu:function(){},G4:function(BP){return Math.round(BP/vbd.Projection.GroundResolution(this.B.center.lat(),this.C.getZoom()));},toGeoJSON:function(){return this.getFeature(this,{type:'Point',coordinates:this.H9(this.getCenter())});},toWKT:function(){return this.getCenter().toWKT();}});vbd.Icon=function(opt){this.url=vbd.JH;this.size=new vbd.Size(20,34);this.anchor=null;this.origin=new vbd.Point(0,0);vbd.Cf(this,opt,false);this.C1=function(){this.anchor=this.anchor||new vbd.Point(this.size.width/2,this.size.height,true);return this.anchor;};this.Lv=function(){if(this.img){this.img.style.left=this.origin.x+'px';this.img.style.top=this.origin.y+'px';}};this.HA=function(){if(!this.img){this.img=new Image();this.img.style.position='absolute';}this.Lv();this.img.src=this.url;};};vbd.MarkerShape=function(opt){return vbd.Util.extend({coords:null,type:null},opt);};vbd.MarkerOptions=function(opt){return vbd.Util.extend({anchorPoint:null,crossOnDrag:true,draggable:false,cursor:'pointer',map:null,position:null,shadow:null,shape:null,title:'',opacity:1.0,icon:null,zIndex:0,visible:true,content:null,backgroundColor:null,color:null},opt);};vbd.Marker=vbd.Class.extend({initialize:function(D){D=new vbd.MarkerOptions(D);D.position=vbd.latlng(D.position);this.NAME_SHAPE='Point';D.icon=new vbd.Icon(D.icon);D.icon.size=vbd.size(D.icon.size);if(D.icon.anchor)D.icon.anchor=vbd.point(D.icon.anchor);D.icon.origin=vbd.point(D.icon.origin);this.B=D;this.$=D.id||vbd.stamp(this);this.Lj(D);if(D.map){this.setMap(D.map);}},copy:function(){return new vbd.Marker(new vbd.MarkerOptions(this.B,{map:null}));},AS:function(AD,W){if(!this.AO||!(this.AO[AD]||this.AO[AD+'_idx'])){return;}vbd.event.fire(this,AD,W);},getDraggable:function(){return this.B.draggable;},setDraggable:function(AV){this.B.draggable=AV;if(AV&&!this.BY&&this.C){this.BY=new vbd.DragMarker(this);this.BY.AV.enable();}else if(this.BY){this.BY.AV.disable();this.BY=null;}},getOptions:function(){return this.B;},Gz:function(){if(this.Di){this.Di=false;vbd.DomUtil.remove(this.Aj);vbd.DomUtil.remove(this.AU);}},G0:function(){if(!this.Di){this.Di=true;vbd.DomUtil.add(this.Aj,this.HD);vbd.DomUtil.add(this.AU,this.Eg);}},setZIndex:function(BZ){this.B.zIndex=BZ;this.AU.style.zIndex=BZ;},getZIndex:function(){return this.B.zIndex;},setVisible:function(v){this.B.visible=v;var d=v?'block':'none';this.AU.style.display=d;if(this.Aj){this.AU.style.display=d;}},getContainer:function(){return this.AU;},getCenter:function(){return this.getPosition();},getContainerShadow:function(){return this.Aj;},setContent:function(Ak){this.B.content=Ak;if(Ak){this.AU.innerHTML=Ak;}},getContent:function(){return this.B.content;},getOpacity:function(){return this.B.opacity;},setOpacity:function(Cw){this.B.opacity=Cw;this.AU.style.opacity=Cw;},getCursor:function(){return this.B.cursor;},setCursor:function(CE){this.B.cursor=CE;this.AU.style.cursor=CE;},getTitle:function(){return this.B.title;},setTitle:function(HE){this.B.title=HE;this.AU.setAttribute('title',HE);},getPosition:function(){return this.B.position;},setPosition:function(Dc){this.B.position=vbd.latlng(Dc);this.Ap(true);},getShape:function(){return this.B.shape;},setShape:function(A5){},getPoint:function(){return this.pt;},Bz:function(B_,pt){vbd.DomUtil.setPosition(B_,pt);},HF:function(B_,L){B_.style.width=L.width+'px';B_.style.height=L.height+'px';},Dz:function(B_,BW){B_.style.marginLeft=(BW.x*-1)+'px';B_.style.marginTop=(BW.y*-1)+'px';},setBackgroundColor:function(p){this.B.backgroundColor=p;if(p){this.AU.style.backgroundColor=p;}},setColor:function(p){this.B.color=p;if(p){this.AU.style.color=p;}},Lj:function(D){this.AU=vbd.Util.AI('div',{position:'absolute',overflow:'hidden',opacity:D.opacity,zIndex:D.zIndex,title:D.title,cursor:D.cursor});this.setBackgroundColor(D.backgroundColor);this.setColor(D.color);this.setTitle(D.title);this.setVisible(D.visible);this.AU.BI=vbd.Ah.HX;this.AU.obj=this;},Li:function(D){this.Aj=vbd.Util.AI('div',{position:'absolute',overflow:'hidden',opacity:D.opacity,zIndex:D.zIndex});this.Aj.BI=vbd.Ah.B9;},getShadow:function(){return this.B.shadow;},Mf:function(){var Ac=this.getShadow();if(Ac){vbd.DomUtil.add(Ac.img,this.HD);}},Md:function(){var Ac=this.getShadow();if(Ac){vbd.DomUtil.remove(Ac.img);}},GK:function(D){if(D.shadow){var L=D.shadow.size,BW=D.shadow.C1();if(!this.Aj){this.Li(D);}this.HF(this.Aj,L);this.Dz(this.Aj,BW);D.shadow.HA();vbd.DomUtil.add(D.shadow.img,this.Aj);this.Bz(this.Aj,this.pt);}},setShadow:function(Ac){if(!Ac){return;}if(!(Ac instanceof vbd.Icon)){Ac=new vbd.Icon(Ac);}vbd.DomUtil.remove(this.B.shadow.img);this.B.shadow=Ac;this.B.shadow.url=Ac.url;this.B.shadow.size=Ac.size;this.B.shadow.anchor=Ac.C1();this.B.shadow.origin=Ac.origin;this.GK(this.B);},getIcon:function(){return this.B.icon;},GE:function(D,Lg){if(D.icon){var L=D.icon.size,BW=D.icon.C1();if(!D.anchorPoint)D.anchorPoint=vbd.point(0,-BW.y);else{D.anchorPoint=vbd.point(D.anchorPoint);}this.HF(this.AU,L);this.Dz(this.AU,BW);if(!Lg){D.icon.HA();vbd.DomUtil.add(D.icon.img,this.AU);}this.Bz(this.AU,this.pt);}},setIcon:function(Am){if(!Am){return;}if(!(Am instanceof vbd.Icon)){Am=new vbd.Icon(Am);}vbd.DomUtil.remove(this.B.icon.img);this.B.icon=Am;this.B.icon.url=Am.url;this.B.icon.size=Am.size;this.B.icon.anchor=Am.C1();this.B.icon.origin=Am.origin;this.GE(this.B,false);},D0:function(C,P){if(!C){C=this.C;}return C.BB(this.getPosition());},Bw:function(C,P){return this.D0(C,P);},CI:function(){this.G0();},FX:function(F){var D=this.getOptions();this.pt=this.Bw();var c=(this.CLASS_NAME==='CustomMarker')?true:false;this.GK(D,c);this.GE(D,c);this.setDraggable(D.draggable);if(c){this.setContent(D.content);}if(F&&F.contains(this.getPosition())){this.CI();}else if(!F){this.CI();}},setMap:function(C){if(C&&C instanceof vbd.Map){C.addMarker(this);}else if(this.C){this.C.removeMarker(this);}},LW:function(pt){this.Bz(this.AU,pt);if(this.Aj){this.Bz(this.Aj,pt);}},Ap:function(B0){if(!this.C){return;}if(B0||!this.Di){this.pt=this.Bw();}this.Bz(this.AU,this.pt);if(this.Aj){this.Bz(this.Aj,this.pt);}if(this.BY){vbd.DomUtil.setPosition(this.BY.C9,this.pt);}this.G0();},LT:function(_pt){this.pt=_pt;this.B.position=this.C.convertLayerPointToLatLng(_pt);this.Bz(this.AU,this.pt);if(this.Aj){this.Bz(this.Aj,this.pt);}},getId:function(){return this.$;},Eo:function(){this.Gz();if(this.BY){this.BY.AV.disable();this.BY=null;}},getMap:function(){return this.C;},getBounds:function(){return new vbd.LatLngBounds(this.getPosition());},CLASS_NAME:'Marker',toGeoJSON:function(){var Dc=this.getPosition();var Da=Dc.toGeoJSON();var Ad=new vbd.MarkerOptions(this.B);Ad.position=null;Ad.map=null;Ad.anchorPoint=Ad.anchorPoint?Ad.anchorPoint.toArray():null;var Am=Ad.icon;Ad.url=Am.url;Ad.size=Am.size.toArray();Ad.anchor=Am.anchor.toArray();Ad.origin=Am.origin.toArray();Ad.icon=null;Da.properties=Ad;return Da;},toWKT:function(){return this.getPosition().toWKT();}});vbd.DragMarker=vbd.Class.extend({initialize:function(u){this.u=u;this.AV=new vbd.DJ(this.u.AU,u.C);vbd.event.addListener(this.AV,'down',this.CU,this);vbd.event.addListener(this.AV,'dragstart',this.GD,this);vbd.event.addListener(this.AV,'drag',this.GC,this);vbd.event.addListener(this.AV,'dragend',this.GA,this);this.C9=vbd.Hb;},CU:function(){this.u.C.stop();},GB:function(u,AN){var D=u.getOptions(),BW=D.icon.C1().copy(),Ac=u.getShadow();BW.y+=AN;u.Dz(u.AU,BW);if(Ac){var HG=Ac.C1().copy();HG.y+=AN;u.Dz(u.Aj,HG);}},GD:function(p){var u=this.u,D=u.getOptions();this.LS=u.getCursor();u.setCursor('move');this.LU=u.getZIndex();u.setZIndex(10000);if(D.crossOnDrag){this.GB(u,8);this.C9.style.display='block';vbd.DomUtil.setPosition(this.C9,u.pt);}vbd.event.fire(this.u,'dragstart',p);},GC:function(W){this.u.LT(W.pt);if(this.u.B.crossOnDrag){vbd.DomUtil.setPosition(this.C9,W.pt);}vbd.event.fire(this.u,'drag',{offset:W.V,evt:W.evt});},LR:function(me,u,AN,Au){vbd.Util.K5({delay:10,duration:Au,delta:AN,step:function(del){me.GB(u,(18-18*del));},fnStop:function(){me.C9.style.display='none';}});},GA:function(W){var u=this.u,D=u.getOptions();if(D.crossOnDrag){this.LR(this,u,vbd.Util.JS(vbd.Util.Jc),1000);}else{this.GB(u,0);this.C9.style.display='none';}u.setZIndex(this.LU);u.setCursor(this.LS);vbd.event.fire(u,'dragend',W);}});vbd.CustomMarker=vbd.Marker.extend({setShadow:function(Ac){if(!(Ac instanceof vbd.Icon)){vbd.DomUtil.remove(this.AU);return;}this.B.shadow=Ac;this.GK(this.B);},setIcon:function(Am){if(!(Am instanceof vbd.Icon)){var JR=this.getIcon();if(JR){vbd.DomUtil.remove(this.Aj);vbd.DomUtil.remove(this.AU);this.B.icon=null;}return;}this.B.icon=Am;this.GE(this.B,true);this.setContent(this.B.content);},CLASS_NAME:'CustomMarker'});vbd.Overlays=function(){'use strict';vbd.Overlays.prototype.initialize.apply(this,arguments);this.EW=function(){};this.getOptions=function(){return this.B;};this.Es=this.Cv=this.refresh=this.update=function(){};this.E3=function(AB){return vbd.stamp(AB);};this.getOverlay=function(id){return this.AG[id];};this.getOverlays=function(){var AG=[];for(var i in this.AG){AG.push(this.AG[i]);}return AG;};this.getMap=function(){return this.C;};this.setMap=function(C){if(C){C.addLayer(this);this.B.map=C;}else if(this.C){this.C.removeLayer(this);}};this.Hl=function(){for(var i in this.AG){this.add(this.AG[i]);}};this.Dk=function(){for(var i in this.AG){this.remove(this.AG[i]);}};this.Io=function(AB){return!!AB&&(AB in this.AG||this.E3(AB)in this.AG);};this.clear=function(){this.Dk();this.AG={};};this.setZIndex=function(BZ){return this.invoke('setZIndex',BZ);};this.invoke=function(methodName){var args=Array.prototype.slice.call(arguments,1),i,AB;for(i in this.AG){AB=this.AG[i];if(AB[methodName]){AB[methodName].apply(AB,args);}}return this;};this.eachLayer=function(method,context){for(var i in this.AG){method.call(context,this.AG[i]);}return this;};this.toMultiPoint=function(){var coords=[];this.eachLayer(function(layer){coords.push(layer.toGeoJSON().geometry.coordinates);});return vbd.GeoJSON.getFeature(this,{type:'MultiPoint',coordinates:coords});};this.toGeoJSON=function(){var type=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(type==='MultiPoint'){return this.toMultiPoint();}var isGeometryCollection=type==='GeometryCollection',jsons=[];this.eachLayer(function(AB){if(AB.toGeoJSON&&vbd.GeoJSON){var json=AB.toGeoJSON();jsons.push(isGeometryCollection?json.geometry:vbd.GeoJSON.asFeature(json));}});if(isGeometryCollection&&vbd.GeoJSON){return vbd.GeoJSON.getFeature(this,{geometries:jsons,type:'GeometryCollection'});}return{type:'FeatureCollection',features:jsons};};};vbd.Overlays.prototype.initialize=function(AG,D){this.AG={};this.B=D||{};if(!AG){return;}var i,G=AG.length;if(AG){for(i=0;i<G;i++){this.add(AG[i]);}}};vbd.Overlays.prototype.add=function(AB){var id=this.E3(AB);if(this.AG[id]&&!this.AG[id].C){this.AG[id].setMap(this.C);return this;}this.AG[id]=AB;if(this.C){AB.setMap(this.C);}vbd.event.fire(this,'addObj',{obj:AB});return this;};vbd.Overlays.prototype.remove=function(AB){var id=this.E3(AB);if(this.AG[id]){this.AG[id].setMap(null);delete this.AG[id];}return this;};vbd.Features=function(){vbd.Features.prototype.initialize.apply(this,arguments);};vbd.Features.prototype=new vbd.Overlays();vbd.Features.prototype.constructor=vbd.Features;vbd.Features.prototype.initialize=function(){vbd.Overlays.prototype.initialize.apply(this,arguments);};vbd.Features.prototype.add=function(AB){if(this.Io(AB)){if(!AB.C){AB.setMap(this.C);}return this;}vbd.Overlays.prototype.add.call(this,AB);vbd.event.fire(this,'onadd');vbd.event.fire(this.C,'layeradd',{overlay:this});};vbd.Features.prototype.getFeature=function(){return this.AG;};vbd.Features.prototype.remove=function(AB){if(!this.Io(AB)){return this;}if(AB in this.AG){AB=this.AG[AB];}vbd.Overlays.prototype.remove.call(this,AB);vbd.event.fire(this,'remove');vbd.event.fire(this.C,'layerremove',{overlay:this});};vbd.Features.prototype.getBounds=function(){var F=new vbd.LatLngBounds();for(var id in this.AG){var AB=this.AG[id];F.extend(AB.getBounds());}return F;};vbd.GeoJSON=function(_geojson,AQ){vbd.GeoJSON.prototype.coordsToLatLng=function(coords){if(AQ.crs){var latlng=AQ.crs.inverse(coords);return new vbd.LatLng(latlng[1],latlng[0]);}return new vbd.LatLng(coords[1],coords[0],coords[2]);};this.coordsToLatLngs=function(coords,levelsDeep){var latlngs=[];for(var i=0,G=coords.length,latlng;i<G;i++){latlng=levelsDeep?this.coordsToLatLngs(coords[i],levelsDeep-1):this.coordsToLatLng(coords[i]);latlngs.push(latlng);}return latlngs;};this.geometryToOverlay=function(geojson,KF){var geometry=geojson.type==='Feature'?geojson.geometry:geojson,coords=geometry.coordinates,B,AG=[],latlng,latlngs;KF=KF||this.B;geojson.properties=geojson.properties||{};var markerTemplate=KF.markerTemplate;var i=0,G=0;switch(geometry.type){case'Point':latlng=this.coordsToLatLng(coords);if(markerTemplate){return markerTemplate(geojson,latlng);}if(geojson.properties.center){return new vbd.Circle(geojson.properties);}geojson.properties.position=latlng;return new vbd.Marker(geojson.properties);case'MultiPoint':G=coords.length;for(i=0;i<G;i++){latlng=this.coordsToLatLng(coords[i]);AG.push(markerTemplate?markerTemplate(geojson,latlng):new vbd.Marker({position:latlng}));}return new vbd.Features(AG);case'LineString':case'MultiLineString':latlngs=this.coordsToLatLngs(coords,geometry.type==='LineString'?0:1);B=geojson.properties;B.path=latlngs;return new vbd.Polyline(B);case'Polygon':case'MultiPolygon':latlngs=this.coordsToLatLngs(coords,geometry.type==='Polygon'?1:2);B=geojson.properties;if(B.bounds){return new vbd.Rectangle(B);}B.paths=latlngs;return new vbd.Polygon(B);case'GeometryCollection':G=geometry.geometries.length;for(i=0;i<G;i++){AG.push(this.geometryToOverlay({geometry:geometry.geometries[i],type:'Feature',properties:geojson.properties}));}return new vbd.Features(AG);default:throw new Error('Invalid GeoJSON object.');}};this.addData=function(geo){if(!geo){return;}var FP=vbd.Util.isArray(geo)?geo:geo.features,i,Ck;if(FP){var G=FP.length;for(i=0;i<G;i++){Ck=FP[i];if(Ck.geometries||Ck.geometry||Ck.features||Ck.coordinates){this.addData(Ck);}}return this;}var AQ=this.B;var AG=this.geometryToOverlay(geo,AQ);if(!AG){return this;}AG.feature=vbd.GeoJSON.asFeature(geo);return this.add(AG);};this.initialize=function(g,o){this.B=o||{};this.AG={};if(this.B.map){this.setMap(this.B.map);}if(g){this.addData(g);}};this.initialize(_geojson,AQ);};vbd.GeoJSON.prototype=new vbd.Features();vbd.GeoJSON.prototype.constructor=vbd.GeoJSON;vbd.geoJson=function(geojson,AQ){return new vbd.GeoJSON(geojson,AQ);};vbd.extend(vbd.GeoJSON,{getFeature:function(AB,newGeometry){return AB.feature?vbd.extend({},AB.feature,{geometry:newGeometry}):vbd.GeoJSON.asFeature(newGeometry);},asFeature:function(geojson){if(geojson.type==='Feature'){return geojson;}return{type:'Feature',properties:geojson.properties||{},geometry:geojson};}});vbd.LayerOptions=function(opt){return vbd.Util.extend({fnCallback:null,url:null,map:null,animationZoom:true,format:null,zIndex:0,isMoveInsert:true,errorTileUrl:vbd.Ek,subdomains:null,opacity:1},opt);};vbd.JK=vbd.Class.extend({initialize:function(D){this.B=new vbd.LayerOptions(D);this.$=vbd.stamp(this);if(this.B.map)this.setMap(D.map);},getId:function(){return this.$;},getOptions:function(){return this.B;},Ks:function(C0){return this.B.subdomains[Math.abs(C0.x+C0.y)%this.B.subdomains.length];},getMap:function(){return this.C;},setMap:function(C){if(C){C.addLayer(this);this.B.map=C;}else if(this.C){this.C.removeLayer(this);}},Hl:function(F,P){var C=this.C;if(!C.Ky(this)){return;}this.CI(F,P);vbd.event.fire(this,'onadd');vbd.event.fire(C,'layeradd',{layer:this});},setZIndex:function(zI){this.B.zIndex=zI;this.S.style.zIndex=zI;},Ex:function(){var Cw=this.B.opacity;if(!vbd.Browser.ielt9&&!this.C.Hn){vbd.DomUtil.setOpacity(this.S,Cw);return;}var Kx=+new Date(),Hp=false;for(var key in this.AE){var I=this.AE[key];if(!I.current||!I.loaded){continue;}var Ho=Math.min(1,(Kx-I.loaded)/200);if(Ho<1){vbd.DomUtil.setOpacity(I.el,Cw*Ho);Hp=true;}else{vbd.DomUtil.setOpacity(I.el,Cw);I.active=true;this.ED();}}if(Hp){vbd.Util.cancelAnimFrame(this.E0);this.E0=vbd.Util.requestAnimFrame(this.Ex,this);}},Eu:function(){this.S=vbd.Util.AI('div',{position:'absolute',left:'0px',top:'0px',width:'100%',height:'100%',margin:'0px',padding:'0px'},this.C.getContainerLayer());this.S.BI=vbd.Ah.B9;this.setZIndex(this.B.zIndex);if(this.B.opacity<1){this.Ex();}},Kw:function(){var i,I;for(i in this.AE){I=this.AE[i].el;I.onload=vbd.Util.DN;I.onerror=vbd.Util.DN;if(!I.complete){I.src=vbd.Ek;vbd.DomUtil.remove(I);}}},Ku:function(){var P=this.BU,DA=this.C.getOptions().maxZoom;for(var z in this.Bi){if(this.Bi[z].el.children.length||z===P){this.Bi[z].el.style.zIndex=DA-Math.abs(P-z);}else{vbd.DomUtil.remove(this.Bi[z].el);delete this.Bi[z];}}var AP=this.Bi[P],map=this.C;if(!AP){AP=this.Bi[P]={};AP.el=vbd.Util.AI('div',{position:'absolute',left:'0px',top:'0px',margin:'0px',padding:'0px','touch-action':'none'},this.S);AP.el.style.zIndex=DA;AP.zoom=P;}this.AP=AP;return AP;},HO:function(J){var F=this.C.getBoundMap().getTileRange();if((J.x<F.minX||J.x>F.maxX)||(J.y<F.minY||J.y>F.maxY)){return false;}return true;},C2:function(J){return J.x+':'+J.y+':'+J.z;},Kt:function(){for(var key in this.AE){if(!this.AE[key].loaded){return false;}}return true;},MP:function(J){var HM=new vbd.Point(J.x,J.y);HM.z=J.z;return HM;},K1:function(I){var R=I.style;R['position']='absolute';R[vbd.Bf]='none';R['image-rendering']='-webkit-optimize-contrast';R['filter']='inherit';R['visibility']='hidden';R['max-width']='none';I.onselectstart=vbd.Util.DN;I.onmousemove=vbd.Util.DN;if(vbd.Browser.ielt9&&this.B.opacity<1){vbd.DomUtil.setOpacity(I,this.B.opacity);}if(vbd.Browser.android&&!vbd.Browser.android23){I.style.WebkitBackfaceVisibility='hidden';}},Gu:function(key){var I=this.AE[key];if(I){vbd.DomUtil.remove(I.el);delete this.AE[key];}},Gv:function(){for(var key in this.AE){this.Gu(key);}},Gw:function(x,y,z,I9){var x2=Math.floor(x/2),y2=Math.floor(y/2),z2=z-1;var key=x2+':'+y2+':'+z2,tile=this.AE[key];if(tile&&tile.active){tile.retain=true;return true;}else if(tile&&tile.loaded){tile.retain=true;}if(z2>I9){return this.Gw(x2,y2,z2,I9);}return false;},Gx:function(x,y,z,DA){for(var i=2*x;i<2*x+2;i++){for(var j=2*y;j<2*y+2;j++){var key=i+':'+j+':'+(z+1),tile=this.AE[key];if(tile&&tile.active){tile.retain=true;continue;}else if(tile&&tile.loaded){tile.retain=true;}if(z+1<DA){this.Gx(i,j,z+1,DA);}}}},ED:function(){var key,tile;for(key in this.AE){tile=this.AE[key];tile.retain=tile.current;}for(key in this.AE){tile=this.AE[key];if(tile.current&&!tile.active){var coords=tile.coords;if(!this.Gw(coords.x,coords.y,coords.z,coords.z-5)){this.Gx(coords.x,coords.y,coords.z,coords.z+2);}}}for(key in this.AE){if(!this.AE[key].retain){this.Gu(key);}}},Gy:function(J,err,I){var key=this.C2(J);I=this.AE[key];if(!I){return;}I.loaded=+new Date();if(this.C.Hn){vbd.DomUtil.setOpacity(I.el,0);vbd.Util.cancelAnimFrame(this.E0);this.E0=vbd.Util.requestAnimFrame(this.Ex,this);}else{I.active=true;this.ED();}I.el.style['visibility']='inherit';if(this.B.fnCallback){this.B.fnCallback.call(this,{tile:I.el,coords:J});}vbd.event.fire(this,'tileload',{tile:I.el,coords:J});if(this.Kt()){vbd.event.fire(this,'load');}},LK:function(J,S,F){var LM=F.getTilePos(J),key=this.C2(J);var I=this.createTile(J,vbd.bind(this.Gy,this,J),this.EV);this.K1(I);if(this.createTile.length<2){setTimeout(vbd.bind(this.Gy,this,J,null,I),0);}vbd.DomUtil.setPosition(I,LM,true);this.AE[key]={el:I,coords:J,current:true};S.appendChild(I);},Cv:function(F,P){this.BU=P;var At=F.getTileRange();for(var key in this.AE){this.AE[key].current=false;}for(var j=At.minY;j<=At.maxY;j++){for(var i=At.minX;i<=At.maxX;i++){var J=new vbd.Point(i,j);J.z=this.BU;if(!this.HO(J)){continue;}var I=this.AE[this.C2(J)];if(I){I.current=true;vbd.DomUtil.setPosition(I.el,F.getTilePos(J),true);}}}},update:function(F,P,Iq){this.BU=P;var At=F.getTileRange(),Ey=F.getCenter(),Dl=[];for(var key in this.AE){this.AE[key].current=false;}for(var j=At.minY;j<=At.maxY;j++){for(var i=At.minX;i<=At.maxX;i++){var J=new vbd.Point(i,j);J.z=this.BU;if(!this.HO(J)){continue;}var I=this.AE[this.C2(J)];if(I){I.current=true;vbd.DomUtil.setPosition(I.el,F.getTilePos(J),true);}else{Dl.push(J);}}}Dl.sort(function(a,b){return a.distanceTo(Ey)-b.distanceTo(Ey);});if(Dl.length!==0){var G2=document.createDocumentFragment();for(i=0;i<Dl.length;i++){this.LK(Dl[i],G2,F);}this.AP.el.appendChild(G2);}},EW:function(F,P){var Lh=this.BU!==P;if(Lh){this.BU=P;this.Kw();this.Ku();}this.update(F,P,true);this.ED();},Es:function(AA,x,y,dx,dy){for(var i in this.Bi){this.LN(this.Bi[i],AA,x,y,dx,dy);}},LN:function(AP,AA,x,y,dx,dy){vbd.DomUtil.Jf(AP.el,AA,x,y,dx,dy);},CI:function(F,P){this.host=window.location.host;this.key=this.C.Kz();this.Eu();this.Bi={};this.AE={};this.EW(F,P);},Dk:function(){this.Gv();vbd.DomUtil.remove(this.S);this.S=null;this.BU=-1;vbd.event.removeListener(this.Lp);this.Lp=null;vbd.event.fire(this,'remove');vbd.event.fire(this.C,'layerremove',{layer:this});},getContainer:function(){return this.S;},show:function(){var c=this.getContainer();if(c){c.style.visibility="visible";}},hide:function(){var c=this.getContainer();if(c){c.style.visibility="hidden";}}});vbd.Layer=vbd.JK.extend({initialize:function(D){this.B=new vbd.LayerOptions(D);if(!this.B.subdomains){this.B.subdomains=[this.B.url];}if(this.B.map){this.setMap(this.B.map);}},createTile:function(J,Cj,EV){var I=document.createElement('img');I.style.width=EV+'px';I.style.height=EV+'px';I.onload=vbd.bind(this.Lo,this,Cj,I);I.onerror=vbd.bind(this.Lq,this,Cj,I);if(this.B.crossOrigin){I.crossOrigin='';}I.alt='';I.draggable='false';I.src=this.getTileUrl(J);return I;},getTileUrl:function(J){var _sz=vbd.Ce[J.z];var D=this.B;var A_=this.Ks(J),x=((J.x%_sz)+_sz)%_sz;if(D.format){return D.format.call(this,[A_,x,J.y,J.z,J,this]);}else if(A_.indexOf('{x}')>0&&A_.indexOf('{y}')>0&&A_.indexOf('{z}')>0){return vbd.Util.JP(A_,vbd.extend({r:D.detectRetina&&vbd.Browser.retina&&D.maxZoom>0?'@2x':'',s:A_,x:x,y:J.y,z:J.z},D));}else{if(A_.indexOf('?')<0){A_+='?';}return encodeURI(A_+'&Level='+J.z+'&X='+x+'&Y='+J.y+'&key='+this.key+'&lc='+this.host);}},Lo:function(Cj,I){Cj(null,I);},Lq:function(Cj,I,e){I.src=vbd.Ek;Cj(e,I);},getAllTile:function(){var AE=[];for(var key in this.AE){AE.push({Opt:this.AE[key].coords});}return AE;},refresh:function(b){var C=this.C;if(!b)this.Gv();this.EW(C.getBoundMap(),C.getZoom());},setUrl:function(A_){this.B.subdomains=vbd.Util.isArray(A_)?A_:[A_];var I;for(var key in this.AE){I=this.AE[key];I.el.src=this.getTileUrl(I.coords);}}});vbd.LayerWMS=vbd.Layer.extend({defaultWmsParams:{service:'WMS',request:'GetMap',layers:'',styles:'',format:'image/jpeg',transparent:false,version:'1.1.1'},B:{crs:null,uppercase:false},initialize:function(url,AQ){this.A_=url;var wmsParams=vbd.extend({},this.defaultWmsParams);for(var i in AQ){if(!(i in this.B)){wmsParams[i]=AQ[i];}}AQ.url=url;this.B=new vbd.LayerOptions(AQ);if(!this.B.subdomains){this.B.subdomains=[url];}wmsParams.width=wmsParams.height=AQ.tileSize||256;this.wmsParams=wmsParams;},Hl:function(F,P){var C=this.C;if(!C.Ky(this)){return;}this._crs=this.B.crs||{code:'EPSG:3857'};this._wmsVersion=parseFloat(this.wmsParams.version);var projectionKey=this._wmsVersion>=1.3?'crs':'srs';this.wmsParams[projectionKey]=this._crs.code;this.CI(F,P);vbd.event.fire(this,'onadd');vbd.event.fire(C,'layeradd',{layer:this});},getTileUrl:function(coords){var _tileB=this.C.getBoundsOfTile(coords);var nw=vbd.Projection.project(_tileB.getNorthWest());var se=vbd.Projection.project(_tileB.getSouthEast());var bbox=(this._wmsVersion>=1.3&&this._crs.code==='EPSG:4326'?[se.y,nw.x,nw.y,se.x]:[nw.x,se.y,se.x,nw.y]).join(',');var _sz=vbd.Ce[coords.z];var A_=this.Ks(coords);var x=((coords.x%_sz)+_sz)%_sz;A_=A_+vbd.Util.getParamString(this.wmsParams,A_,this.B.uppercase)+(this.B.uppercase?'&BBOX=':'&bbox=')+bbox;return vbd.Util.JP(window.decodeURI(A_),vbd.extend({x:x,y:coords.y,z:coords.z}));},setParams:function(params,noRedraw){vbd.extend(this.wmsParams,params);this.refresh(noRedraw);return this;}});vbd.LayerCanvas=vbd.Layer.extend({initialize:function(D){D=new vbd.LayerOptions(D);D.isMoveInsert=false;vbd.Layer.prototype.initialize.call(this,D);},getContext:function(){var cv=this.AP.el.childNodes[0];if(cv)return cv.getContext('2d');return null;},F9:function(W){var L=this.C.getSize();var tile=W.tile;var ctx=tile.getContext('2d');tile.width=L.width;tile.height=L.height;tile.style.width=L.width+'px';tile.style.height=L.height+'px';ctx.clearRect(0,0,L.width,L.height);vbd.DomUtil.setPosition(tile,new vbd.Point(0,0),true);vbd.event.fire(this,'ondraw',W);},createTile:function(coords){return document.createElement('canvas');},Cv:function(F,P){this.BU=P;var At=F.getTileRange();for(var key in this.AE){this.AE[key].current=false;}var J=new vbd.Point(At.minX,At.minY);J.z=this.BU;var I=this.AE[this.C2(J)];if(I){I.current=true;}vbd.DomUtil.setPosition(this.AP.el,new vbd.Point(0,0),true);},update:function(F,P,Iq){this.BU=P;var At=F.getTileRange();var Ey=F.getCenter();var key;for(key in this.AE){this.AE[key].current=false;}var J=new vbd.Point(At.minX,At.minY);var C=this.C;J.z=P;key=this.C2(J);var I=this.AE[key];var p={tile:null,coords:J,zoomChange:Iq};if(I){I.current=true;p.tile=I.el;this.F9(p);}else{I=this.createTile(J);p.tile=I;vbd.event.fire(this,'tileload',p);this.AE[key]={el:I,coords:J,current:true,active:true};this.ED();this.AP.el.appendChild(I);this.F9(p);}vbd.DomUtil.setPosition(this.AP.el,C.containerPointToLayerPoint(new vbd.Point(0,0)),true);}});vbd.LayerVector=vbd.LayerCanvas.extend({initialize:function(KH,D){this._=new vbd.RTree();var AC=KH.getOverlays(),G=AC.length,i;for(i=0;i<G;i++){this.addVector(AC[i]);}vbd.LayerCanvas.prototype.initialize.call(this,D);},addVector:function(layer){if(this.C){layer.Bw(this.C);}var BO=layer.getBounds();var Ie=[BO.sw.Longitude,BO.sw.Latitude,BO.ne.Longitude,BO.ne.Latitude,layer];layer.DM=Ie;this._.insert(Ie);},getAllData:function(){return this._.getAll();},removeVector:function(layer){if(layer&&layer.DM){this._.remove(layer.DM);layer.DM=null;layer=null;}},getDataInbox:function(FK){return this._.getDataInBox(FK);},getAllCurrents:function(){return this.D7;},KE:function(ctx,AT){var AQ=AT.getOptions();ctx.globalCompositeOperation='source-over';if(AQ.fill){ctx.globalAlpha=AQ.fillOpacity;ctx.fillStyle=AQ.fillColor;ctx.fill(AQ.fillRule||'evenodd');}if(AQ.stroke&&AQ.strokeWidth!==0){ctx.globalAlpha=AQ.opacity;ctx.lineWidth=AQ.strokeWidth;ctx.strokeStyle=AQ.strokeColor;ctx.lineCap=AQ.lineCap;ctx.lineJoin=AQ.lineJoin;ctx.stroke();}},KC:function(ctx,AT){var i,j,p;var parts=AT.AM;var G=parts.length;var AQ=AT.getOptions();if(!G){return;}ctx.beginPath();if(ctx.setLineDash){ctx.setLineDash(AQ&&AQ.strokeDasharray||[]);}for(i=0;i<G;i++){var A1=parts[i].length;for(j=0;j<A1;j++){p=parts[i][j];if(j===0){ctx.moveTo(p.x,p.y);}else{ctx.lineTo(p.x,p.y);}}if(AT.CLASS_NAME==='Polygon'){ctx.closePath();}}this.KE(ctx,AT);},EG:function(ctx){var FK=this.C.getBounds().toArray(false);var AC=this.getDataInbox(FK);var G=AC.length,AT;var F=this.C.getBoundsPaths();for(var i=0;i<G;i++){AT=AC[i][4];AT.Im(F);AT.KG();this.KC(ctx,AT);}this.D7=AC;},redraw:function(isProject){var C=this.C,L=C.getSize();this.DT.width=L.width;this.DT.height=L.height;this.DT.style.width=L.width+'px';this.DT.style.height=L.height+'px';var ctx=this.DT.getContext('2d');if(isProject){var Ik=this._.getAll();var G=Ik.length;for(var i=0;i<G;i++){Ik[i][4].Bw(C);}}var pt=C.getPositionLayer();ctx.translate(pt.x,pt.y);this.EG(ctx);},F9:function(W){var C=this.C,L=C.getSize(),I=W.tile,ctx=I.getContext('2d');I.width=L.width;I.height=L.height;I.style.width=L.width+'px';I.style.height=L.height+'px';this.DT=I;this.redraw(W.zoomChange);vbd.event.addDomListener(I,'mousemove',this.KB,this);vbd.event.fire(this,'ondraw',W);},Jq:function(poly){if(this.B.handlerEvents&&this.B.handlerEvents.events&&this.B.handlerEvents.handler){vbd.event.addListener(poly,this.B.handlerEvents.events,this.B.handlerEvents.handler);}},KB:function(e){var pt=vbd.event.getMousePosition(e);var Kf=this.C.getMouseOnMap(pt.x,pt.y);var L2=this.C.containerPointToLayerPoint(Kf),AT;if(this.D7&&this.D7.length){var i,G=this.D7.length;for(i=0;i<G;i++){AT=this.D7[i][4];if(AT.FT(L2)){if(this.AT){this.AT.setMap(null);}this.AT=AT.copy();this.AT.DM=AT.DM;this.AT.setMap(this.C);this.Jq(this.AT);break;}else if(this.AT){this.AT.setMap(null);this.AT=null;}}}vbd.event.fire(this,'mousemove',{LatLng:this.C.Dr(pt),poly:this.AT});},Dk:function(){vbd.LayerCanvas.prototype.Dk.call(this);if(this.AT){this.AT.setMap(null);this.AT=null;}if(!this.B.isNotClear){this._.clear();}}});vbd.InfoWindowOptions=function(opt){return vbd.Util.extend({content:null,autoPan:true,pixelOffset:null,position:null,zIndex:1},opt);};vbd.InfoWindow=function(opt){this.B=new vbd.InfoWindowOptions(opt);this.AS=function(AD){vbd.event.fire(this,AD);};this.GG=null;this.getOptions=function(){return this.B;};this.setOffset=function(LP){this.B.pixelOffset=LP;if(this.Al){this.F$(false);}};this.getPosition=function(){return this.B.position;};this.setPosition=function(Dc){this.B.position=vbd.latlng(Dc);this.Ap(false);if(this.B.autoPan){this.GI();}this.AS('position_changed');};this.GI=function(){var C=this.C;if(!C){return;}var D=this.B,L=this.L,_pt=this.HI(L,D),pt=C.divPixelToContainerPixel(_pt),CY=C.getSize(),C3=new vbd.Point(CY.width/8,CY.width/8,true),dx=0,dy=0;if(pt.x<C3.x){dx=C3.x-pt.x;}else if((pt.x+L.width)>CY.width){dx=CY.width-(pt.x+L.width)-C3.x;}if(pt.y<C3.y){dy=C3.y-pt.y;}else if((pt.y+L.height+24)>CY.height){dy=CY.height-((pt.y+L.height+24))-C3.y;}C.panBy(-dx,-dy);};this.Ap=function(_n){if(!this.C){return;}this.AL=this.C.BB(this.B.position);this.F$(_n);};this.getContent=function(){return this.B.content;};this.setContent=function(Ak,L,LO){this.B.content=Ak;if(!this.C){return;}this.L=L||vbd.Util.getRenderedDimensions(Ak);vbd.DomUtil.remove(this.Al);this.Al=null;this.Ap(true);if(LO){this.GI();}this.AS('content_changed');};this.getZIndex=function(){return this.B.zIndex;};this.setZIndex=function(BZ){this.B.zIndex=BZ;if(this.Al){this.Al.style.zIndex=BZ;}this.AS('zindex_changed');};this.close=function(){vbd.DomUtil.remove(this.Al);this.Al=null;vbd.event.removeListener(this.GG);this.GG=null;this.C=null;this.AS('closeclick');};this.open=function(C,Aq){this.C=C||this.C;if(Aq instanceof vbd.Size){this.B.pixelOffset=Aq;}else if(Aq instanceof vbd.Marker){this.B.pixelOffset=Aq.getOptions().anchorPoint;this.B.position=Aq.getPosition();}if(!this.C){return;}var D=this.B;if(!this.Bu){this.Bu=this.C.LQ();}vbd.DomUtil.remove(this.Al);this.Al=null;this.AL=this.C.BB(D.position);this.L=vbd.Util.getRenderedDimensions(D.content);this.F$(true);if(!this.GG){var Q=this;this.GG=vbd.event.addListener(C,'boundchange',function(){Q.Ap();});}if(D.autoPan){this.GI();}};this.HI=function(L,D){var _pt=new vbd.Point(this.AL.x-(L.width/2),this.AL.y-L.height-24,true);if(!D.pixelOffset){return _pt;}if(D.pixelOffset instanceof vbd.Size){_pt.x+=D.pixelOffset.width;_pt.y+=D.pixelOffset.height;return _pt;}if(D.pixelOffset instanceof vbd.Point){_pt.x+=D.pixelOffset.x;_pt.y+=D.pixelOffset.y;return _pt;}return _pt;};this.getContainer=function(){return this.Al;};this.F$=function(_n){var Bp=new vbd.Size(this.L.width+24,this.L.height+18),D=this.B,_pt=this.HI(Bp,D),LV=Math.round(Bp.width/2)-10;if(this.Al&&!_n){vbd.DomUtil.setPosition(this.Al,_pt);return;}this.Al=vbd.Util.AI('div',{width:Bp.width+'px',height:Bp.height+'px',position:'absolute','border-radius':'5px',zIndex:D.zIndex},this.Bu);vbd.DomUtil.setPosition(this.Al,_pt);this.Al.BI=vbd.Ah.CA;var GU=vbd.Util.AI('div',{position:'absolute',left:'0px',top:'0px'},this.Al);var LX=vbd.Util.AI('div',{position:'absolute',left:'0px',top:'0px',backgroundColor:'rgba(0, 0, 0, 0.2)',width:Bp.width+'px',height:Bp.height+'px','border-radius':'5px'},GU);LX.style[vbd.F1]='0px 1px 4px -1px rgba(0, 0, 0, 0.3)';var HJ=vbd.Util.AI('div',{borderTopWidth:'24px',position:'absolute',left:LV+'px',top:(Bp.height-3)+'px'},GU);var Lb=vbd.Util.AI('div',{position:'absolute',overflow:'hidden',left:'-6px',top:'-1px',width:'16px',height:'30px'},HJ);var Gb=vbd.Util.AI('div',{position:'absolute',left:'6px',backgroundColor:'rgb(255, 255, 255)',height:'24px',width:'10px'},Lb);Gb.style[vbd.D5]='skewX(22.6deg)';Gb.style[vbd.Fu]='0px 0px';Gb.style[vbd.F1]='0px 1px 6px rgba(0, 0, 0, 0.6)';var LY=vbd.Util.AI('div',{position:'absolute',overflow:'hidden',top:'-1px',left:'10px',width:'16px',height:'30px'},HJ);var Ga=vbd.Util.AI('div',{'position':'absolute','left':'0px',backgroundColor:'rgb(255, 255, 255)',height:'24px',width:'10px'},LY);Ga.style[vbd.D5]='skewX(-22.6deg)';Ga.style[vbd.Fu]='10px 0px';Ga.style[vbd.F1]='0px 1px 6px rgba(0, 0, 0, 0.6)';vbd.Util.AI('div',{position:'absolute',left:'1px',top:'1px',backgroundColor:'rgb(255, 255, 255)',height:(Bp.height-2)+'px',width:(Bp.width-2)+'px','border-radius':'5px'},GU);var Le=vbd.Util.AI('div',{position:'absolute',left:'12px',top:'9px',overflow:'visible',width:this.L.width+'px',height:this.L.height+'px'},this.Al);Le.innerHTML=D.content;var wI=vbd.Browser.touch?new vbd.Size(24,24):new vbd.Size(13,13);var ET=vbd.Util.AI('div',{width:wI.width+'px',height:wI.height+'px',overflow:'hidden',position:'absolute',opacity:'0.5',right:'5px',top:'5px',cursor:'pointer',zIndex:1000},this.Al);var img=new Image();vbd.Cf(img.style,{position:'absolute',left:'0px',top:'0px',width:wI.width+'px',height:wI.height+'px',border:'0px none'},false);img.src=vbd.J4;ET.appendChild(img);if(!vbd.Browser.touch){vbd.event.addDomListener(ET,"mouseover mouseout",function(e){this.style.opacity=e.type==="mouseover"?1:0.5;});}vbd.event.addDomListener(ET,"click",this.close,this);};};vbd.JT=function(T){var svg=document.createElementNS("http://www.w3.org/2000/svg",'svg');var AZ=svg.createSVGMatrix();T.getTransform=function(){return AZ;};T.copyMatrix=function(){var mt=svg.createSVGMatrix();mt.a=AZ.a;mt.b=AZ.b;mt.c=AZ.c;mt.d=AZ.d;mt.e=AZ.e;mt.f=AZ.f;return mt;};var JD=[],KO=T.save;T.save=function(){JD.push(AZ.translate(0,0));return KO.call(T);};var KT=T.restore;T.restore=function(){AZ=JD.pop();return KT.call(T);};var AA=T.scale;T.scale=function(sx,sy){AZ=AZ.scaleNonUniform(sx,sy);return AA.call(T,sx,sy);};var KV=T.translate;T.translate=function(dx,dy){AZ=AZ.translate(dx,dy);return KV.call(T,dx,dy);};var KZ=T.transform;T.transform=function(a,b,c,d,e,f){var m2=svg.createSVGMatrix();m2.a=a;m2.b=b;m2.c=c;m2.d=d;m2.e=e;m2.f=f;AZ=AZ.multiply(m2);return KZ.call(T,a,b,c,d,e,f);};var KW=T.setTransform;T.setTransform=function(a,b,c,d,e,f){AZ.a=a;AZ.b=b;AZ.c=c;AZ.d=d;AZ.e=e;AZ.f=f;return KW.call(T,a,b,c,d,e,f);};var pt=svg.createSVGPoint();T.transformedPoint=function(x,y){pt.x=x;pt.y=y;return pt.matrixTransform(AZ.inverse());};T.transformedPointWithMatrix=function(x,y,m){pt.x=x;pt.y=y;return pt.matrixTransform(m);};};vbd.Gi=vbd.Class.extend({HK:function(CX,B7){this.CX=CX;this.B7=B7;this.V=B7-CX;},run:function(Av,AL,AN){vbd.Util.cancelAnimFrame(this.Ae);this.DL=true;this.Au=500;this.Av=Av;this.AL=AL;this.AN=AN||new vbd.Point(0,0);this.FO=5.0;this.EQ=+new Date();vbd.event.fire(this,'start',{AL:AL});this.Cz();},stop:function(B7,Av){vbd.Util.cancelAnimFrame(this.Ae);if(this.DL&&this.Ae){this.Av=Av;this.B7=B7;this.CX=this.HL;this.V=this.B7-this.CX;this.EQ=+new Date();this.Cz();return;}},Cz:function(){this.Ae=vbd.Util.requestAnimFrame(this.Cz,this,true);this.EJ();},EJ:function(){var Be=(+new Date())-this.EQ,Au=this.Au;if(Be<Au){this.EP(this.Er(Be/Au));}else{this.EP(1);this.EX();}},EP:function(C5){this.HL=this.CX+this.V*C5;vbd.event.fire(this,'step',{AA:this.HL,AL:this.AL,AN:this.AN});},EX:function(){vbd.Util.cancelAnimFrame(this.Ae);this.DL=false;vbd.event.fire(this,'end',{Av:this.Av,AL:this.AL});},Er:function(t){return 1-Math.pow(1-t,this.FO);}});vbd.Ld=vbd.Class.extend({initialize:function(C,BH,AV){this.C=C;this.AV=new vbd.DJ(BH,C);vbd.event.addListener(this.AV,'down',this.CU,this);vbd.event.addListener(this.AV,'dragstart',this.GD,this);vbd.event.addListener(this.AV,'drag',this.GC,this);vbd.event.addListener(this.AV,'dragend',this.GA,this);if(AV){this.AV.enable();}},_d:function(p){return(p.obj.AD===vbd.Ah.B9||p.obj.AD===vbd.Ah.FG||(p.obj.AD===vbd.Ah.HX&&!p.obj.obj.getDraggable()));},CU:function(W){this.C.stop();},GD:function(W){var C=this.C;if(this._d(W)){if(C.getOptions().inertia){this.EN=[];this.Db=[];}vbd.event.fire(C,'movestart');vbd.event.fire(C,'dragstart');}},GC:function(W){if(this._d(W)){var C=this.C;if(C.getOptions().inertia){var time=this.EO=+new Date(),pos=this.HC=this.AV.Cy;this.EN.push(pos);this.Db.push(time);if(time-this.Db[0]>50){this.EN.shift();this.Db.shift();}}C.Cg(W.pt,true);C.Bj=true;vbd.event.fire(C,'move',W);vbd.event.fire(C,'drag',W);}},GA:function(W){if(this._d(W)){var C=this.C;var B=C.getOptions();var Lf=!B.inertia||this.Db.length<2;vbd.event.fire(C,'dragend');if(!B.moveAnimation){C.Cd();return;}if(Lf){C.Cd();}else{var HH=new vbd.Point((this.HC.x-this.EN[0].x),(this.HC.y-this.EN[0].y));var Au=(this.EO-this.Db[0])/1000;var GW=B.easeLinearity;var HB=GW/Au;var GZ=new vbd.Point(HH.x*HB,HH.y*HB);var G8=Math.round(GZ.distanceTo(new vbd.Point(0,0)));var G5=Math.min(B.inertiaMaxSpeed,G8);var JC=G5/G8;var G6=new vbd.Point(GZ.x*JC,GZ.y*JC);var G7=G5/(B.inertiaDeceleration*GW);var JE=-G7/2;var V=new vbd.Point(G6.x*JE,G6.y*JE,true);if(!V.x||!V.y){C.Cd();}else{V=C.Lc(V);vbd.Util.requestAnimFrame(function(){C.panBy(V.x,V.y,{duration:G7,easeLinearity:GW,noMoveStart:true,animate:true});C.AS('startPanBy',{dx:V.x,dy:V.y});});}}}}});vbd.MapOptions=function(opt){return vbd.Util.extend({backgroundColor:"#EDEAE2",extendView:new vbd.Size(0,0),showInView:true,zoom:5,registerKey:null,center:new vbd.LatLng(14.102783,109.649506),disableDoubleClickZoom:false,mapTypeId:vbd.MapTypeId.ROADMAP,maxZoom:19,minZoom:2,scrollWheel:true,isMoveInsert:true,titleSize:vbd.TILE_SIZE,layer:null,scaleControl:true,scaleControlOptions:null,draggable:true,limitBounds:null,zoomControl:true,zoomControlOptions:null,extendTile:0,moveAnimation:true,inertia:!vbd.Browser.android23,inertiaDeceleration:5000,inertiaMaxSpeed:Infinity,easeLinearity:0.25,timeDblClick:250,clickOffset:3,tapOffset:15},opt);};vbd.MapTap=vbd.Class.extend({initialize:function(S){vbd.event.addDomListener(S,'touchstart',this.CU,this);},CU:function(e){if(!e.touches){return;}vbd.event.preventDefault(e);this.Ew=true;if(e.touches.length>1){this.Ew=false;clearTimeout(this.Ig);return;}var first=e.touches[0];this.Bq=this.Cy=new vbd.Point(first.clientX,first.clientY);this.Ig=setTimeout(vbd.bind(function(){if(this.Ih()){this.Ew=false;this.B3();this.D3('contextmenu',first);}},this),1000);this.D3('mousedown',first);this.Ii=vbd.event.addDomListener(document,'touchmove',this.C4,this);this._touchEnd=vbd.event.addDomListener(document,'touchend',this.B3,this);},B3:function(e){clearTimeout(this.Ig);vbd.event.removeDomListener(this.Ii);this.Ii=null;vbd.event.removeDomListener(this._touchEnd);this._touchEnd=null;if(this.Ew&&e&&e.changedTouches){var first=e.changedTouches[0];this.D3('mouseup',first);if(this.Ih()){this.D3('click',first);}}},Ih:function(){return this.Cy.distanceTo(this.Bq)<=15;},C4:function(e){var first=e.touches[0];this.Cy=new vbd.Point(first.clientX,first.clientY);this.D3('mousemove',first);},D3:function(type,e){var Ez=document.createEvent('MouseEvents');Ez.K0=true;e.target.K2=true;Ez.initMouseEvent(type,true,true,window,1,e.screenX,e.screenY,e.clientX,e.clientY,false,false,false,false,0,null);e.target.dispatchEvent(Ez);}});vbd.JX=vbd.Class.extend({initialize:function(C,La){this.C=C;vbd.event.addDomListener(La,'touchstart',this.EB,this);},EB:function(e){if(!e.touches||e.touches.length!==2||this.C.BN){return;}var C=this.C;C.stop();var p1=C.mouseEventToContainerPoint(new vbd.Point(e.touches[0].clientX,e.touches[0].clientY));var p2=C.mouseEventToContainerPoint(new vbd.Point(e.touches[1].clientX,e.touches[1].clientY));this.LZ=p1.distanceTo(p2);this.Bv=new vbd.Point((p1.x+p2.x)/2,(p1.y+p2.y)/2,true);this.BX=false;C.BN=true;this.G$=vbd.event.addDomListener(document,'touchmove',this.Kh,this);this.G9=vbd.event.addDomListener(document,'touchend',this.EI,this);vbd.event.preventDefault(e);},Kh:function(e){if(!e.touches||e.touches.length!==2||!this.C.BN){return;}var C=this.C;var p1=C.mouseEventToContainerPoint(new vbd.Point(e.touches[0].clientX,e.touches[0].clientY));var p2=C.mouseEventToContainerPoint(new vbd.Point(e.touches[1].clientX,e.touches[1].clientY));this.Fl=new vbd.Point((p1.x+p2.x)/2,(p1.y+p2.y)/2,true);this.AA=(p1.distanceTo(p2)/this.LZ);if((this.C.getZoom()===this.C.getOptions().maxZoom)&&(this.AA>1)){return;}this.AN=new vbd.Point(this.Fl.x-this.Bv.x,this.Fl.y-this.Bv.y,true);if(!this.BX){this.BX=true;C.Cv({AL:this.Bv});}vbd.Util.cancelAnimFrame(this.F_);this.F_=vbd.Util.requestAnimFrame(this.LL,this,true);vbd.event.preventDefault(e);},LL:function(){if(this.AA!==1||this.AN.x!==0||this.AN.y!==0){this.C.G_(this.Bv,this.AA,this.AN);}},EI:function(e){vbd.event.removeDomListener(this.G$);this.G$=null;vbd.event.removeDomListener(this.G9);this.G9=null;vbd.Util.cancelAnimFrame(this.F_);this.F_=null;if(!this.BX||!this.C.BN){this.C.BN=false;return;}this.C.BN=false;var C=this.C;var P=C.getScaleZoom(this.AA);var Kg=C.getZoom();var Ke=P-Kg;var HN=C.CS(Ke>0?Math.ceil(P):Math.floor(P));var AA=C.getZoomScale(HN);if(!this.Ae){this.Ae=new vbd.Gi();vbd.event.addListener(this.Ae,'step',this.Fp,this);vbd.event.addListener(this.Ae,'end',this.EL,this);}this.Ae.HK(this.AA,AA);this.Ae.run(HN,this.Bv,this.AN);},Fp:function(_){this.C.G_(_.AL,_.AA,_.AN);},EL:function(_){_.AL=this.Fl;this.C.EL(_);}});vbd.Map=function(S,Jz){'use strict';S.style['overflow']='hidden';S.style['-ms-touch-action']='none';S.style['touch-action']='none';S.style.msTouchAction='none';S.BI=vbd.Ah.CA;var CP,CK;this.$=vbd.Util.stamp(this);var CV,T,BH,Bl,Hy,Dg,AY,Is,Eg,Fo,Hz,Bu,AJ,A0;var A7={x:0,y:0};var Ch={x:0,y:0};var B=new vbd.MapOptions(Jz);B.center=vbd.latlng(B.center);var Z=B.titleSize;var GV=B.zoom;var Fi=B.center;var AX={};var Az={};var EH;var CF,CN=0,Ax,De,F,DR;var Q=this;B.extendTile=Math.min(B.extendTile,3);var _pixelOrigin=vbd.point(0,0);var L,_sizeChanged;this.setCursor=function(CE){BH.style.cursor=CE;};this.getCursor=function(){return BH.style.cursor;};this.AH=new vbd.Point(0,0);this.getPositionLayer=function(){return this.AH.copy();};this.getTileSize=function(){return Z;};this.getOptions=function(){return B;};this.AS=function(AD,W){vbd.event.fire(this,AD,W);};this.pathImg=vbd.getUrl(B.mapTypeId);this.getMapTypeId=function(){return B.mapTypeId;};this.setMapTypeId=function(id){B.mapTypeId=id;this.pathImg=vbd.getUrl(id);var _lb=this.getLayerBase();if(_lb)_lb.setUrl(this.pathImg);this.AS('maptypeid_changed');};this.getSize=function(){if(!L||_sizeChanged){L=new vbd.Size(S.clientWidth||parseInt(S.style.width),S.clientHeight||parseInt(S.style.height));_sizeChanged=false;}return L.copy();};this.getContainer=function(){return S;};this.getContainerLayer=function(){return Hy;};this.getBoundMap=function(){return F;};this.H7=function(){var BA=this.getCenter(),z=this.getZoom(),x;var _d=vbd.Ce[z]*Z;var pt=this.latlngToContainerPoint(BA);x=pt.x;A7.x=F.Left-x;if(x<0&&((x+_d)<AJ.Size.width)){A7.x=F.Left-F.CB()+_d;}else{A7.x=F.Left-F.CB();}};this.Cg=function(pt,Jl){this.AH=pt.copy();BH.AH=pt;vbd.DomUtil.setPosition(Bl,pt);if(Jl){this.Jk(pt);}var x=F.CB(),y=F.DQ();A7.x=F.Left-x;A7.y=F.Top-y;Ch.x=x-Q.AH.x-F.Left-AJ.Left;Ch.y=y-Q.AH.y-F.Top-AJ.Top;};this.Kz=function(){return B.registerKey||(function(){var Dd=null;try{var IL=document.getElementsByTagName('script'),IA='';var ck=vbd.checkKey.toLowerCase();for(var i=0;i<IL.length;i++){var src=IL[i].src.toLowerCase();if((src.indexOf(ck)!==-1)&&src.indexOf('key')!==-1){IA=src;break;}}Dd=vbd.Util.convertUrl2Object(IA).key;while(Dd&&Dd.indexOf('+')>-1)Dd=Dd.replace('+','!?!');return Dd}catch(err){return null;}})();};this.getPixelOrigin=function(){return _pixelOrigin;};this.layerPointToLatLng=function(pt){pt=vbd.point(pt).add(_pixelOrigin);return vbd.Projection.Pixel2LatLng(pt,B.zoom);};this.containerPointToLayerPoint=function(pt){return new vbd.Point(pt.x-this.AH.x,pt.y-this.AH.y);};this.divPixelToContainerPixel=function(pt){return vbd.point(pt.x+this.AH.x,pt.y+this.AH.y);};this.layerPointToContainerPoint=function(pt){return vbd.point(pt.x+this.AH.x,pt.y+this.AH.y);};this._getCenterLayerPoint=function(){return this.containerPointToLayerPoint(this.EE());};this.getCenter2=function(){return this.layerPointToLatLng(this._getCenterLayerPoint());};this._getNewPixelOrigin=function(BA,P){var c=this.EE();P=P===undefined?this.getZoom():P;return vbd.Projection.LatLng2Pixel(BA,P).IS(c).CI(this.AH);};this.ContainerPixel2LatLng=function(pt){return this.layerPointToLatLng(this.containerPointToLayerPoint(vbd.point(pt)));};this.BB=function(N){var pt=vbd.Projection.LatLng2Pixel(N,B.zoom);return pt.IS(this.getPixelOrigin());};this.getOffsetLayer=function(){return new vbd.Point(A7.x+this.AH.x,A7.y+this.AH.y);};this.getOffsetConvertLatLngToXY=function(){return new vbd.Point(A7.x,A7.y);};this.Ir=function(N,_mapSize,r){var pt=vbd.Projection.LatLng2PixelEx(N,_mapSize,r);return pt.IS(this.getPixelOrigin());};this.mouseEventToContainerPoint=function(pt){var p=vbd.Util.getOffset(S);AJ={Left:p.x,Top:p.y,Size:this.getSize()};return vbd.point(pt.x-p.x,pt.y-p.y);};this.mouseEventToLayerPoint=function(pt){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(pt));};this.Dr=function(pt){return this.layerPointToLatLng(this.mouseEventToLayerPoint(pt));};this.containerPointToLatLng=function(pt){return this.ContainerPixel2LatLng(pt)};this.latlngToContainerPoint=function(N){var pt=this.BB(N);pt.x+=this.AH.x;pt.y+=this.AH.y;return pt;};this.latlngToContainerPointEx=function(N,_mapSize){var pt=this.Ir(N,_mapSize);pt.x+=this.AH.x;pt.y+=this.AH.y;return pt;};this.latLngToLayerPoint=function(latlng){var pt=vbd.Projection.LatLng2Pixel(latlng,this.getZoom());return pt.IS(this.getPixelOrigin());};this.convertLayerPointToLatLng=function(pt){var _pt=vbd.point(pt).add(this.getPixelOrigin());return vbd.Projection.Pixel2LatLng(_pt,B.zoom);};this.getPositionOfTile=function(C0){return F.getTilePos(C0);};this.getBoundsOfTile=function(C0){var _pt=F.getTilePos(C0);var BC=new vbd.Point(_pt.x,_pt.y+Z);var A6=new vbd.Point(_pt.x+Z,_pt.y);var KX=this.convertLayerPointToLatLng(BC);var KL=this.convertLayerPointToLatLng(A6);return new vbd.LatLngBounds(KX,KL);};this.ContainerPixel2DivPixel=function(pt){return vbd.point((pt.x-this.AH.x),(pt.y-this.AH.y));};this.Point2Mouse=function(pt){return vbd.point((pt.x+AJ.Left+this.AH.x),(pt.y+AJ.Top+this.AH.y));};this.getProjection=function(){return{latlngToContainerPoint:vbd.bind(this.latlngToContainerPoint,this),latLngToLayerPoint:vbd.bind(this.latLngToLayerPoint,this),fromLatLngToPoint:vbd.bind(this.BB,this),fromPointToLatLng:vbd.bind(this.Dr,this),containerPointToLayerPoint:vbd.bind(this.containerPointToLayerPoint,this),layerPointToContainerPoint:vbd.bind(this.layerPointToContainerPoint,this),containerPointToLatLng:vbd.bind(this.containerPointToLatLng,this),layerPointToLatLng:vbd.bind(this.layerPointToLatLng,this)};};this.CS=function(P){return Math.max(B.minZoom,Math.min(B.maxZoom,P));};var Mg=function(N){N.Latitude=Math.max(vbd.Projection.Ed,Math.min(vbd.Projection.Ec,N.Latitude));N.Longitude=Math.max(vbd.Projection.F3,Math.min(vbd.Projection.Fv,N.Longitude));return N;};var Fm=function(){if(AY){var Bx=Q.getBoundsPaths();var s=Q.getSize();AY.setAttribute('width',s.width);AY.setAttribute('height',s.height);vbd.DomUtil.setPosition(AY,Bx.min);AY.setAttribute('viewBox',[Bx.min.x,Bx.min.y,s.width,s.height].join(' '));}};var I8=function(Bk){if(EH){var A4,pt,i,G=EH.length;for(i=0;i<G;i++){A4=EH[i];pt=T.transformedPointWithMatrix(A4.pt.x,A4.pt.y,Bk);A4.LW(pt);}}};var D4=function(L){L=L||B.extendView;var BC=vbd.point(AJ.Left-L.width,AJ.Top+AJ.Size.height+L.height),A6=vbd.point((AJ.Left+L.width+AJ.Size.width),AJ.Top-L.height),BR=Q.Dr(BC),BV=Q.Dr(A6),KN=Q.BB(BR),KM=Q.BB(BV),_b,Dm=false;if(KM.x-KN.x<(AJ.Size.width+2*L.width)){BR.Longitude=-180;BV.Longitude=180;Dm=true;}_b=new vbd.LatLngBounds(BR,BV);_b.Dm=Dm;return _b;};var Iw=function(e){var d={evt:e};d.Point=vbd.event.getMousePosition(e);d.containerPoint=Q.mouseEventToContainerPoint(d.Point);d.LatLng=Q.Dr(d.Point);return d;};var J7={timeout:10000,watch:false};var Jv=function(e){Ax=vbd.DomUtil.Fg(e);if(!Ax||Ax.AD===vbd.Ah.CA||Q.Bj||Q.BN)return;if(!Ax.obj)Ax.obj=Q;CN++;if(CN===1){De=Iw(e);CF=setTimeout(function(){CF&&clearTimeout(CF);CN=0;Ax.obj.AS('click',De);Ax=null;},B.timeDblClick);}else if(CN>1){vbd.event.preventDefault(e);CF&&clearTimeout(CF);Ax.obj.AS('dblclick',De);CN=0;if(B.disableDoubleClickZoom){return false;}if(Ax.AD===vbd.Ah.B9||Ax.AD===vbd.Ah.FG)Q.zoomAt(De.containerPoint,1);Ax=null;}};var Ff=function(e,obj){if(e.type==='keypress'){return false;}var _=Iw(e);if(e.type==='mousewheel'||e.type==='DOMMouseScroll'){vbd.event.preventDefault(e);Q.Jn(_);return false;}if(Q.BN||Q.Bj){return;}if(e.type==='contextmenu'){vbd.event.preventDefault(e);obj.AS('rightclick',_);obj.AS(e.type,_);return false;}if(e.type==='mouseup'){if(!Q.B$)Q.B$={};Q.B$.e=e;}if(e.type==='mousemove'&&CN===1&&Ax&&Ax.obj){CF&&clearTimeout(CF);CN=0;Ax.obj.AS('click',De);Ax=null;return false;}obj.AS(e.type,_);};var Ls=function(e){if(!Q.Ej||vbd.event.EC(e)){return;}var Ai=vbd.DomUtil.Fg(e);if(Ai.AD===vbd.Ah.CA)return false;if(e.type==='mousedown'){vbd.DomUtil.preventOutline(e.target||e.srcElement);}var obj=(Ai.obj||Q);if(e.type==='mousemove'){if(!Q.B$){Q.B$={x:e.clientX,y:e.clientY};Ff(e,obj);return false;}if(Math.abs(e.clientX-Q.B$.x)>0||Math.abs(e.clientY-Q.B$.y)>0){Q.B$={x:e.clientX,y:e.clientY};Ff(e,obj);}return false;}Ff(e,obj);};var Jq=function(){vbd.event.addDomListener(window,'resize',Q.Jw,Q);vbd.event.addDomListener(S,'mousedown mouseup mouseover mouseout mousemove contextmenu keypress mousewheel',Ls);BH.oncontextmenu=function(e){return false;};S.addEventListener('click',Jv);};var Eu=function(){var pt=new vbd.Point(0,0);BH=vbd.Util.AI('div',{position:'absolute',left:'0px',top:'0px',width:'100%',height:'100%',overflow:'hidden'},S);BH.style.background=B.backgroundColor;var R={position:'absolute',left:'0px',top:'0px'};Bl=vbd.Util.AI('div',R,BH);Bl.BI=vbd.Ah.B9;Bl.AH=pt;vbd.DomUtil.setTransform(Bl,pt,1);Hy=vbd.Util.AI('div',R,Bl);Dg=vbd.Util.AI('div',R,Bl);Dg.BI=vbd.Ah.B9;var Iv=vbd.Util.AI('div',R,Dg);R.zIndex=30;Is=vbd.Util.AI('div',R,Iv);R.zIndex=40;var DP=vbd.Util.AI('div',R,Iv);DP.appendChild(vbd.Hb);R.zIndex=0;Fo=vbd.Util.AI('div',R,DP);Fo.BI=vbd.Ah.B9;R.zIndex=50;Eg=vbd.Util.AI('div',R,DP);R.zIndex=70;Hz=vbd.Util.AI('div',R,DP);R.zIndex=100;Bu=vbd.Util.AI('div',R,DP);Bu.BI=vbd.Ah.CA;Jq();};this.getBoundsPaths=function(){var L=AJ.Size;var BC=new vbd.Point(-this.AH.x,-this.AH.y);var A6=new vbd.Point(BC.x+L.width,BC.y+L.height);return new vbd.Bounds(BC,A6);};this.setCenter=function(BA,P){var cO=B.center,zO=B.zoom;B.center=vbd.latlng(BA||cO);B.zoom=this.CS((P||B.zoom));F=new vbd.Eh(B.zoom,B.center,AJ.Size,Z,B.extendTile);this.Cg(new vbd.Point(0,0));_pixelOrigin=this._getNewPixelOrigin(B.center);A0=D4();for(var i in this.AC){this.AC[i].EW(F,B.zoom);}this.H7();Fm();EH=null;this.Fc(A0,true);this.I4(true);this.Bj=false;if(AY)AY.style.display='block';Bu.style.display='block';if(!cO.equals(B.center))this.AS('center_changed');if(zO!==B.zoom)this.AS('zoom_changed');this.AS('boundchange',F.getBounds());};this.Jw=function(){vbd.Util.cancelAnimFrame(this.Js);this.Js=vbd.Util.requestAnimFrame(this.resize,this);};this.resize=function(){this.stop();_sizeChanged=true;var Bs=vbd.Util.getOffset(S);var s=this.getSize();AJ={Left:Bs.x,Top:Bs.y,Size:s};CV.width=s.width;CV.height=s.height;B.center=this.getCenter2();F=new vbd.Eh(B.zoom,B.center,s,Z,B.extendTile);this.setCenter(B.center,this.getZoom());this.AS('resize');};this.EG=function(B0){for(var i in this.AC){if(this.AC[i].getOptions().isMoveInsert||B0){this.AC[i].update(F,this.getZoom());}}};this.refresh=function(b){for(var i in this.AC){this.AC[i].refresh(b);}};this.Jk=function(pt){var a=B.extendTile*Z;var dx=pt.x+F.Left+a;var dy=pt.y+F.Top+a;var Dt=false;while(dx>0){F.BG--;F.Left-=Z;dx-=Z;Dt=true;}while(dx<-Z){F.BG++;F.Left+=Z;dx+=Z;Dt=true;}while(dy>0){F.BL--;F.Top-=Z;dy-=Z;Dt=true;}while(dy<-Z){F.BL++;F.Top+=Z;dy+=Z;Dt=true;}if(Dt&&B.isMoveInsert){this.EG(false);}};this.panTo=function(N,D){this.stop();N=vbd.latlng(N);var pt=this.BB(this.getCenter());var A6=this.BB(N);return this.panBy(A6.x-pt.x,A6.y-pt.y,D);};this.getScaleZoom=function(AA,Bg){Bg=Bg===undefined?B.zoom:Bg;return Bg+(Math.log(AA)/Math.LN2);};this.getZoomScale=function(Jj,Bg){Bg=Bg===undefined?B.zoom:Bg;return vbd.Projection.scale(Jj)/vbd.Projection.scale(Bg);};this.zoomIn=function(){this.zoomAt(null,1);};this.zoomOut=function(){this.zoomAt(null,-1);};this.EE=function(){var L=AJ.Size;return new vbd.Point(L.width/2,L.height/2);};this.zoomAt=function(pt,BF){if((BF>0&&B.zoom===B.maxZoom)||(BF<0&&B.zoom===B.minZoom)){return;}var P;if(!pt){pt=this.EE();}if(this.BF===undefined){this.BF=BF;}else if((this.BF*BF)<0){return;}if(this.BN){if(this.Ae){P=this.CS(this.Ae.Av+BF);var AA=this.getZoomScale(P);this.Ae.stop(AA,P,null);}return;}P=this.CS(this.getZoom()+BF);this.J0(pt,P);};this.J0=function(pt,P){P=this.CS(P);var AA=this.getZoomScale(P);this.Jh(P,pt,AA);};this.Jh=function(Av,AL,AA){this.stop();if(this.Ej&&(this.P!==Av)){this.Jg(Av,AL,AA);return;}this.BF=undefined;this.setCenter(null,Av);};this.Jg=function(Av,AL,AA,Fd,AN){if(!this.Ae){this.Ae=new vbd.Gi();vbd.event.addListener(this.Ae,'start',this.Cv,this);vbd.event.addListener(this.Ae,'step',this.Fp,this);vbd.event.addListener(this.Ae,'end',this.EL,this);}Fd=Fd||1.0;this.Ae.HK(Fd,AA);this.Ae.run(Av,AL,AN);};this.Jm=function(){B.center=this.getCenter2();F=new vbd.Eh(B.zoom,B.center,AJ.Size,Z,B.extendTile);this.Cg(new vbd.Point(0,0));_pixelOrigin=this._getNewPixelOrigin(B.center);for(var i in this.AC){this.AC[i].Cv(F,B.zoom);}this.Fc(A0,true);if(AY)AY.style.display='none';Bu.style.display='none';};this.Cv=function(_){this.Jm();this._X=((_.AL.x-F.Left)/Z);this._Y=((_.AL.y-F.Top)/Z);EH=this.getMarkersWithBounds(A0);this.BN=true;this.AS('zoomstart');};var Ji=function(AA,x,y,dx,dy){T.save();T.translate(x,y);T.scale(AA,AA);T.translate(-x,-y);T.translate(dx,dy);var Bk=T.getTransform();T.restore();return Bk;};var KA=function(AA,x,y,dx,dy){T.save();T.translate(x+dx,y+dy);T.scale(AA,AA);T.translate(-x,-y);var Bk=T.getTransform();T.restore();return Bk;};this.Fp=function(_){for(var i in this.AC){this.AC[i].Es(_.AA,_.AL.x,_.AL.y,_.AN.x,_.AN.y);}var Bk=Ji(_.AA,_.AL.x,_.AL.y,_.AN.x,_.AN.y);I8(Bk);};this.EL=function(_){this.BF=undefined;var P=_.Av;var Fb=vbd.Projection.Pixel2LatLng({x:(this._X+F.BG)*Z,y:(this._Y+F.BL)*Z},B.zoom);var B2=vbd.Projection.LatLng2Pixel(Fb,P);var I7=this.EE();B2.x=B2.x-_.AL.x+I7.x;B2.y=B2.y-_.AL.y+I7.y;Fb=vbd.Projection.Pixel2LatLng(B2,P);this.BN=false;this.setCenter(Fb,P);this.AS('zoomend');};this.G_=function(pt,AA,AN){for(var i in this.AC){this.AC[i].Es(AA,pt.x,pt.y,AN.x,AN.y);}var Bk=KA(AA,pt.x,pt.y,AN.x,AN.y);I8(Bk);};this.Jn=function(_){var evt=_.evt;if(!B.scrollWheel){return;}var AN=vbd.event.getWheelDelta(evt);if(AN){this.Jp=AN>0?1:-1;this.Jt=_.containerPoint;if(!this.Fe){this.Fe=setTimeout(vbd.bind(function(){clearTimeout(this.Fe);this.Fe=null;this.zoomAt(this.Jt,this.Jp);},this),40);}}};this.getMouseOnMap=function(x,y){return this.mouseEventToContainerPoint(vbd.point(x,y));};this.getTileUnderMouse=function(pt){return{x:(F.BG+Math.floor((pt.x-AJ.Left-this.AH.x-F.Left)/Z)),y:(F.BL+Math.floor((pt.y-AJ.Top-this.AH.y-F.Top)/Z))};};this.getTilePosition=function(pt){var tile=Q.getTileUnderMouse(pt);var x=pt.x-AJ.Left-this.AH.x-F.Left-(tile.x-F.BG)*Z;var y=pt.y-AJ.Top-this.AH.y-F.Top-(tile.y-F.BL)*Z;return{Tile:tile,Position:{x:x,y:y}};};this.hideOverlay=function(){Dg.style.display='none';};this.showOverlay=function(){Dg.style.display='block';};this.getRectView=function(){return AJ;};this.getCenter=function(){B.center=this.getCenter2();return B.center;};this.getZoom=function(){return B.zoom;};this.setZoom=function(z){this.setCenter(null,z);};this.zoomFitEx=function(arr){this.stop();var CJ=vbd.Util.K$(arr);if(CJ){this.fitBounds(CJ);}};this.fitBounds=function(bounds){this.stop();bounds=vbd.latLngBounds(bounds);if(!bounds.isValid()){throw new Error('Bounds are not valid.');}var target=vbd.getBoundsCenterZoom(bounds,this.getSize());this.setCenter(target.center,target.zoom);};this.I2=function(){var Ao=null,_b,key;for(key in AX){_b=AX[key].getBounds();Ao=Ao?Ao.extend(_b):_b.copy();}for(key in Az){_b=Az[key].getBounds();Ao=Ao?Ao.extend(_b):_b.copy();}return Ao;};this.zoomFitCenter=function(){var Ao=this.I2();if(Ao){Ao.extend(this.getCenter());this.zoomFitEx(Ao.toArray(true),true);}};this.zoomFit=function(){this.stop();var Ao=this.I2();if(Ao&&Ao.isLatLng())this.panTo(Ao.getCenter());if(Ao){this.fitBounds(Ao)}else{this.setCenter(Fi,GV);}};this.Bj=false;this.getViewPort=function(){return BH;};this.getZoomControl=function(){return CP;};this.setZoomControl=function(b){B.zoomControl=b;if(b&&!CP){CP=new vbd.ZoomControl(B.zoomControlOptions);CP.setMap(this);}else if(CP){CP.setMap(null);CP=null;}};this.getScaleControl=function(){return CK;};this.setScaleControl=function(b){B.scaleControl=b;if(b&&!CK){CK=new vbd.ScaleControl(B.scaleControlOptions);CK.setMap(this);}else if(CK){CK.setMap(null);CK=null;}};this.setLogo=function(src){DR.src=src;};this.getLogo=function(){return DR;};this.disableDoubleClickZoom=function(b){B.disableDoubleClickZoom=b;};this.MW=function(){return Hz;};this.LQ=function(){return Bu;};this.AC={};this.addLayer=function(A9){var id=vbd.stamp(A9);if(this.AC[id]){return;}this.AC[id]=A9;A9.EV=Z;A9.C=this;A9.Hl(F,this.getZoom());};this.removeLayer=function(A9){var id=vbd.stamp(A9);if(!this.AC[id]){return;}if(this.Ej){A9.Dk();}delete this.AC[id];A9.C=null;A9.B.map=null;};this.Ky=function(A9){return!!A9&&(vbd.stamp(A9)in this.AC);};this.Jx=function(AC){AC=AC?(vbd.Util.isArray(AC)?AC:[AC]):[];for(var i=0,G=AC.length;i<G;i++){this.addLayer(AC[i]);}};this.getLayerWithId=function(Ju){for(var DS in this.AC){if(this.AC[DS].$===Ju){return this.AC[DS];}}return null;};this.getAllLayers=function(){return this.AC;};this.getMarkerWithId=function(id){return AX[id];};this.getAllMarker=function(){return AX;};this.getMarkersWithBounds=function(F){var Ix=[],A4;for(var key in AX){A4=AX[key];if(F.contains(A4.getPosition())){Ix.push(A4);}}return Ix;};this.Fc=function(F,B0){var key;if(B.showInView){var A4;for(key in AX){A4=AX[key];if(F.contains(A4.getPosition())){A4.Ap(B0);}else{A4.Gz();}}}else{for(key in AX){AX[key].Ap(B0);}}};this.addMarker=function(u){var id=vbd.stamp(u);if(AX[id]){return;}AX[id]=u;u.Eg=Eg;u.HD=Fo;u.C=this;u.Di=false;u.FX(A0);};this.removeMarker=function(u){var id=vbd.stamp(u);if(!AX[id]){return;}if(this.Ej){u.Eo();}delete AX[id];u.C=null;u.B.map=null;};this.getShapeWithId=function(id){return Az[id];};this.getAllShape=function(){return Az;};this.I4=function(B0){var key;if(B0){for(key in Az){Az[key].Ap();}return;}for(key in Az){Az[key].Dn();}};this.getShapeWithBounds=function(F){var I0=[],A5;for(var key in Az){A5=Az[key];if(F.intersects(A5.getBounds())){I0.push(A5);}}return I0;};this.addShape=function(A5){var id=vbd.stamp(A5);if(Az[id]){return;}if(!AY&&A5.B.drawPath){AY=document.createElementNS(vbd.ns,'svg');AY.setAttribute('pointer-events','none');AY.setAttribute('version',"1.1");AY.style.position="absolute";Is.appendChild(AY);Fm();}Az[id]=A5;A5.FX(this,AY);};this.removeShape=function(A5){var id=vbd.stamp(A5);if(!Az[id]){return;}A5.Eo();delete Az[id];A5=null;};this.Lc=function(V){var s=this.getSize(),x=s.width*3,y=s.height*3,x1=-x,x2=x,y1=-y,y2=y;V.x=Math.max(x1,Math.min(V.x,x2));V.y=Math.max(y1,Math.min(V.y,y2));return V;};this.stop=function(){if(this.CW){this.CW.stop();}};this.panBy=function(dx,dy,AQ){var V=new vbd.Point(dx,dy);AQ=AQ||{};if(!V.x&&!V.y)return;this.stop();var s=this.getSize();if(!AQ.noMoveStart)this.AS('movestart');this.Bj=true;if((Math.abs(V.x)>s.width*3)||(Math.abs(V.y)>s.height*3)){var pt=this.BB(this.getCenter(),B.zoom);pt.x+=V.x;pt.y+=V.y;var BA=this.convertLayerPointToLatLng(pt);this.setCenter(BA,B.zoom);return;}if(!this.CW){this.CW=new vbd.JN();vbd.event.addListener(this.CW,'step',this.Jr,this);vbd.event.addListener(this.CW,'end',this.Cd,this);}if(AQ.animate!==false){this.CW.run(this.AH,V,AQ.duration,AQ.easeLinearity);}else{this.Cg(V,true);this.Cd();}};this.Jr=function(_){this.Cg(_.pt,true);this.AS('move');};this.isMove=function(){return this.Bj;};this.Cd=function(_){A0=D4();this.H7();Fm();this.EG(true);this.Fc(A0,A0.Dm);this.I4(A0,A0.Dm);setTimeout(function(){Q.Bj=false;},1);this.AS('moveend');this.AS('boundchange');};this.getBounds=function(L){if(L){A0=D4(L);}return A0;};this.setDraggable=function(AV){B.draggable=AV;if(AV){this.Iu.AV.enable();}else{this.Iu.AV.disable();}};this.getDraggable=function(){return B.draggable;};this.getLayerBase=function(){for(var DS in this.AC){if(this.AC[DS]){return this.AC[DS];}}return null;};this.IH=function(GR,GS){return GR+GS>0?Math.round(GR-GS)/2:Math.max(0,Math.ceil(GR))-Math.max(0,Math.floor(GS));};this.KU=function(BA,P,GT){if(!GT){return BA;}var B8=vbd.Projection.LatLng2Pixel(BA,P,true);var D8=this.EE();var BC=new vbd.Point((B8.x-D8.x),(B8.y-D8.y));var A6=new vbd.Point((B8.x+D8.x),(B8.y+D8.y));var min=new vbd.Point(Math.min(BC.x,A6.x),Math.min(BC.y,A6.y));var max=new vbd.Point(Math.max(BC.x,A6.x),Math.max(BC.y,A6.y));var D9=vbd.Projection.LatLng2Pixel(GT.sw,P,true);var D_=vbd.Projection.LatLng2Pixel(GT.ne,P,true);var H$=new vbd.Point(Math.min(D9.x,D_.x),Math.min(D9.y,D_.y));var H4=new vbd.Point(Math.max(D9.x,D_.x),Math.max(D9.y,D_.y));var H0=new vbd.Point(H$.x-min.x,H$.y-min.y);var H1=new vbd.Point(H4.x-max.x,H4.y-max.y);var dx=this.IH(H0.x,-H1.x);var dy=this.IH(H0.y,-H1.y);B8.x+=dx;B8.y+=dy;return vbd.Projection.Pixel2LatLng(B8,P);};this.restrictBounds=function(DY){B.limitBounds=DY;vbd.event.removeListener(this.H2);this.H2=null;vbd.event.removeListener(this.H3);this.H3=null;if(DY){this.H3=vbd.event.addListener(this,'movestart',function(){if(Q.D2){Q.D2=false;}});this.H2=vbd.event.addListener(this,'moveend zoom_changed',function(){if(!(A0.contains(DY)||DY.contains(A0))){var BA=Q.getCenter();var P=Q.getZoom();var KK=Q.KU(BA,P,DY);Q.D2=!Q.D2;if(Q.D2){Q.panTo(KK,{noMoveStart:true});}}});}};this.restrictZoom=function(Fj,Fk){B.minZoom=this.CS(Fj);B.maxZoom=this.CS(Fk);};this.locate=function(Dq){Dq=this.Dp=vbd.extend({},J7,Dq);if(!window.navigator.geolocation){this.H8({code:0,message:'Geolocation not supported.'});return this;}var H_=vbd.bind(this.J6,this);var IO=vbd.bind(this.H8,this);if(Dq.watch){this.J2=window.navigator.geolocation.watchPosition(H_,IO,Dq);}else{window.navigator.geolocation.getCurrentPosition(H_,IO,Dq);}return this;};this.stopLocate=function(){if(window.navigator.geolocation){window.navigator.geolocation.clearWatch(this.J2);}if(this.Dp){this.Dp.setCenter=false;}vbd.event.fire(this,'stoplocation');return this;};this.H8=function(IR){var c=IR.code,J8=IR.message||(c===1?'permission denied':(c===2?'position unavailable':'timeout'));this.AS('locationerror',{code:c,message:'Geolocation error: '+J8+'.'})};this.J6=function(pos){var lat=pos.coords.latitude,lng=pos.coords.longitude,N=new vbd.LatLng(lat,lng),J5=N.toBounds(pos.coords.accuracy),Dp=this.Dp;if(Dp.setCenter){this.setCenter(N);}var _={latlng:N,bounds:J5,timestamp:pos.timestamp};for(var i in pos.coords){if(typeof pos.coords[i]==='number'){_[i]=pos.coords[i];}}this.AS('locationfound',_)};var IW=function(){for(var i=1,G=(B.maxZoom+1);i<G;i++)vbd.Ce[i]=2<<(i-1);};this.setOptions=function(D){B=vbd.Util.extend(B,D);Z=B.titleSize;GV=B.zoom;Fi=B.center;B.extendTile=Math.min(B.extendTile,3);IW();this.setCenter(Fi,GV);};(function(){IW();var Fr=vbd.DomUtil.getStyle(S,'position');if(Fr!=='absolute'&&Fr!=='relative'&&Fr!=='fixed'){S.style.position='relative';}S.style[vbd.Bf]='none';_sizeChanged=true;var Bs=vbd.Util.getOffset(S);var s=Q.getSize();AJ={Left:Bs.x,Top:Bs.y,Size:s};F=new vbd.Eh(B.zoom,B.center,s,Z,B.extendTile);Q.Hn=vbd.Browser.any3d;Eu();_pixelOrigin=Q._getNewPixelOrigin(B.center);CV=document.createElement('canvas');CV.style.display='none';CV.width=AJ.Size.width;CV.height=AJ.Size.height;T=CV.getContext('2d');vbd.JT(T);DR=vbd.Util.K7(vbd.root+'/V2/Images/poweredby.png',{position:'absolute',left:'1px',bottom:'1px',zIndex:100,cursor:'pointer'},{width:105,height:35});vbd.event.addDomListener(DR,'click',function(){window.open('http://www.vietbando.com/');});S.appendChild(DR);Q.Cg(new vbd.Point(0,0));A0=D4();B.layer=B.layer||new vbd.Layer({subdomains:[vbd.getUrl(B.mapTypeId)]});Q.Jx(B.layer);Q.Iu=new vbd.Ld(Q,BH,B.draggable);Q.Ej=true;Q.restrictBounds(B.limitBounds);Q.setZoomControl(B.zoomControl);Q.setScaleControl(B.scaleControl);vbd.event.addDomListener(S,'scroll',function(){this.scrollTop=0;this.scrollLeft=0;});Bl.style['-ms-touch-action']='none';Bl.style['touch-action']='none';Bl.style.msTouchAction='none';new vbd.JX(Q,Bl);new vbd.MapTap(Bl);})();};if(typeof module!=='undefined'&&typeof exports!=='undefined'){module.exports=exports=vbd;}